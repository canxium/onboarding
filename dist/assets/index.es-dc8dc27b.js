import{g as ta,b7 as eb,b6 as Qd,c as Yr,_ as tb}from"./index-06a81a86.js";import{c as rb}from"./_commonjs-dynamic-modules-302442b1.js";var Tu={exports:{}},Un=typeof Reflect=="object"?Reflect:null,cl=Un&&typeof Un.apply=="function"?Un.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},Bo;Un&&typeof Un.ownKeys=="function"?Bo=Un.ownKeys:Object.getOwnPropertySymbols?Bo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Bo=function(e){return Object.getOwnPropertyNames(e)};function ib(i){console&&console.warn&&console.warn(i)}var Xd=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}Tu.exports=ot;Tu.exports.once=ab;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var ul=10;function ra(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return ul},set:function(i){if(typeof i!="number"||i<0||Xd(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");ul=i}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Xd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Zd(i){return i._maxListeners===void 0?ot.defaultMaxListeners:i._maxListeners}ot.prototype.getMaxListeners=function(){return Zd(this)};ot.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var d=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw d.context=l,d}var y=c[e];if(y===void 0)return!1;if(typeof y=="function")cl(y,this,t);else for(var g=y.length,_=np(y,g),s=0;s<g;++s)cl(_[s],this,t);return!0};function ep(i,e,t,s){var o,c,l;if(ra(t),c=i._events,c===void 0?(c=i._events=Object.create(null),i._eventsCount=0):(c.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),c=i._events),l=c[e]),l===void 0)l=c[e]=t,++i._eventsCount;else if(typeof l=="function"?l=c[e]=s?[t,l]:[l,t]:s?l.unshift(t):l.push(t),o=Zd(i),o>0&&l.length>o&&!l.warned){l.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=i,d.type=e,d.count=l.length,ib(d)}return i}ot.prototype.addListener=function(e,t){return ep(this,e,t,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,t){return ep(this,e,t,!0)};function nb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function tp(i,e,t){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},o=nb.bind(s);return o.listener=t,s.wrapFn=o,o}ot.prototype.once=function(e,t){return ra(t),this.on(e,tp(this,e,t)),this};ot.prototype.prependOnceListener=function(e,t){return ra(t),this.prependListener(e,tp(this,e,t)),this};ot.prototype.removeListener=function(e,t){var s,o,c,l,d;if(ra(t),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(c=-1,l=s.length-1;l>=0;l--)if(s[l]===t||s[l].listener===t){d=s[l].listener,c=l;break}if(c<0)return this;c===0?s.shift():sb(s,c),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,d||t)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var t,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var c=Object.keys(s),l;for(o=0;o<c.length;++o)l=c[o],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function rp(i,e,t){var s=i._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?ob(o):np(o,o.length)}ot.prototype.listeners=function(e){return rp(this,e,!0)};ot.prototype.rawListeners=function(e){return rp(this,e,!1)};ot.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):ip.call(i,e)};ot.prototype.listenerCount=ip;function ip(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?Bo(this._events):[]};function np(i,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=i[s];return t}function sb(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function ob(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function ab(i,e){return new Promise(function(t,s){function o(l){i.removeListener(e,c),s(l)}function c(){typeof i.removeListener=="function"&&i.removeListener("error",o),t([].slice.call(arguments))}sp(i,e,c,{once:!0}),e!=="error"&&cb(i,o,{once:!0})})}function cb(i,e,t){typeof i.on=="function"&&sp(i,"error",e,t)}function sp(i,e,t,s){if(typeof i.on=="function")s.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function o(c){s.once&&i.removeEventListener(e,o),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var Or=Tu.exports;const Nu=ta(Or);var Ru={},ia={},$e={},op={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(d,y){var g=d>>>16&65535,_=d&65535,O=y>>>16&65535,T=y&65535;return _*T+(g*T+_*O<<16>>>0)|0}i.mul=Math.imul||e;function t(d,y){return d+y|0}i.add=t;function s(d,y){return d-y|0}i.sub=s;function o(d,y){return d<<y|d>>>32-y}i.rotl=o;function c(d,y){return d<<32-y|d>>>y}i.rotr=c;function l(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d}i.isInteger=Number.isInteger||l,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(d){return i.isInteger(d)&&d>=-i.MAX_SAFE_INTEGER&&d<=i.MAX_SAFE_INTEGER}})(op);Object.defineProperty($e,"__esModule",{value:!0});var ap=op;function ub(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}$e.readInt16BE=ub;function hb(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}$e.readUint16BE=hb;function fb(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}$e.readInt16LE=fb;function lb(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}$e.readUint16LE=lb;function cp(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>8,e[t+1]=i>>>0,e}$e.writeUint16BE=cp;$e.writeInt16BE=cp;function up(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e}$e.writeUint16LE=up;$e.writeInt16LE=up;function au(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}$e.readInt32BE=au;function cu(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}$e.readUint32BE=cu;function uu(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}$e.readInt32LE=uu;function hu(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}$e.readUint32LE=hu;function Wo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>24,e[t+1]=i>>>16,e[t+2]=i>>>8,e[t+3]=i>>>0,e}$e.writeUint32BE=Wo;$e.writeInt32BE=Wo;function Go(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e[t+2]=i>>>16,e[t+3]=i>>>24,e}$e.writeUint32LE=Go;$e.writeInt32LE=Go;function db(i,e){e===void 0&&(e=0);var t=au(i,e),s=au(i,e+4);return t*4294967296+s-(s>>31)*4294967296}$e.readInt64BE=db;function pb(i,e){e===void 0&&(e=0);var t=cu(i,e),s=cu(i,e+4);return t*4294967296+s}$e.readUint64BE=pb;function gb(i,e){e===void 0&&(e=0);var t=uu(i,e),s=uu(i,e+4);return s*4294967296+t-(t>>31)*4294967296}$e.readInt64LE=gb;function yb(i,e){e===void 0&&(e=0);var t=hu(i,e),s=hu(i,e+4);return s*4294967296+t}$e.readUint64LE=yb;function hp(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Wo(i/4294967296>>>0,e,t),Wo(i>>>0,e,t+4),e}$e.writeUint64BE=hp;$e.writeInt64BE=hp;function fp(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Go(i>>>0,e,t),Go(i/4294967296>>>0,e,t+4),e}$e.writeUint64LE=fp;$e.writeInt64LE=fp;function mb(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=i/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}$e.readUintBE=mb;function vb(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+i/8;c++)s+=e[c]*o,o*=256;return s}$e.readUintLE=vb;function _b(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ap.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=i/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}$e.writeUintBE=_b;function bb(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ap.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+i/8;c++)t[c]=e/o&255,o*=256;return t}$e.writeUintLE=bb;function wb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e)}$e.readFloat32BE=wb;function Eb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e,!0)}$e.readFloat32LE=Eb;function Db(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e)}$e.readFloat64BE=Db;function Sb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e,!0)}$e.readFloat64LE=Sb;function Ib(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i),e}$e.writeFloat32BE=Ib;function Ob(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i,!0),e}$e.writeFloat32LE=Ob;function xb(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i),e}$e.writeFloat64BE=xb;function Ab(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i,!0),e}$e.writeFloat64LE=Ab;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});function Pb(i){for(var e=0;e<i.length;e++)i[e]=0;return i}xr.wipe=Pb;Object.defineProperty(ia,"__esModule",{value:!0});var er=$e,fu=xr,Cb=20;function Tb(i,e,t){for(var s=1634760805,o=857760878,c=2036477234,l=1797285236,d=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],g=t[11]<<24|t[10]<<16|t[9]<<8|t[8],_=t[15]<<24|t[14]<<16|t[13]<<8|t[12],O=t[19]<<24|t[18]<<16|t[17]<<8|t[16],T=t[23]<<24|t[22]<<16|t[21]<<8|t[20],C=t[27]<<24|t[26]<<16|t[25]<<8|t[24],P=t[31]<<24|t[30]<<16|t[29]<<8|t[28],H=e[3]<<24|e[2]<<16|e[1]<<8|e[0],L=e[7]<<24|e[6]<<16|e[5]<<8|e[4],Y=e[11]<<24|e[10]<<16|e[9]<<8|e[8],p=e[15]<<24|e[14]<<16|e[13]<<8|e[12],w=s,v=o,b=c,D=l,u=d,E=y,k=g,ne=_,ue=O,ye=T,me=C,A=P,U=H,ee=L,X=Y,V=p,W=0;W<Cb;W+=2)w=w+u|0,U^=w,U=U>>>32-16|U<<16,ue=ue+U|0,u^=ue,u=u>>>32-12|u<<12,v=v+E|0,ee^=v,ee=ee>>>32-16|ee<<16,ye=ye+ee|0,E^=ye,E=E>>>32-12|E<<12,b=b+k|0,X^=b,X=X>>>32-16|X<<16,me=me+X|0,k^=me,k=k>>>32-12|k<<12,D=D+ne|0,V^=D,V=V>>>32-16|V<<16,A=A+V|0,ne^=A,ne=ne>>>32-12|ne<<12,b=b+k|0,X^=b,X=X>>>32-8|X<<8,me=me+X|0,k^=me,k=k>>>32-7|k<<7,D=D+ne|0,V^=D,V=V>>>32-8|V<<8,A=A+V|0,ne^=A,ne=ne>>>32-7|ne<<7,v=v+E|0,ee^=v,ee=ee>>>32-8|ee<<8,ye=ye+ee|0,E^=ye,E=E>>>32-7|E<<7,w=w+u|0,U^=w,U=U>>>32-8|U<<8,ue=ue+U|0,u^=ue,u=u>>>32-7|u<<7,w=w+E|0,V^=w,V=V>>>32-16|V<<16,me=me+V|0,E^=me,E=E>>>32-12|E<<12,v=v+k|0,U^=v,U=U>>>32-16|U<<16,A=A+U|0,k^=A,k=k>>>32-12|k<<12,b=b+ne|0,ee^=b,ee=ee>>>32-16|ee<<16,ue=ue+ee|0,ne^=ue,ne=ne>>>32-12|ne<<12,D=D+u|0,X^=D,X=X>>>32-16|X<<16,ye=ye+X|0,u^=ye,u=u>>>32-12|u<<12,b=b+ne|0,ee^=b,ee=ee>>>32-8|ee<<8,ue=ue+ee|0,ne^=ue,ne=ne>>>32-7|ne<<7,D=D+u|0,X^=D,X=X>>>32-8|X<<8,ye=ye+X|0,u^=ye,u=u>>>32-7|u<<7,v=v+k|0,U^=v,U=U>>>32-8|U<<8,A=A+U|0,k^=A,k=k>>>32-7|k<<7,w=w+E|0,V^=w,V=V>>>32-8|V<<8,me=me+V|0,E^=me,E=E>>>32-7|E<<7;er.writeUint32LE(w+s|0,i,0),er.writeUint32LE(v+o|0,i,4),er.writeUint32LE(b+c|0,i,8),er.writeUint32LE(D+l|0,i,12),er.writeUint32LE(u+d|0,i,16),er.writeUint32LE(E+y|0,i,20),er.writeUint32LE(k+g|0,i,24),er.writeUint32LE(ne+_|0,i,28),er.writeUint32LE(ue+O|0,i,32),er.writeUint32LE(ye+T|0,i,36),er.writeUint32LE(me+C|0,i,40),er.writeUint32LE(A+P|0,i,44),er.writeUint32LE(U+H|0,i,48),er.writeUint32LE(ee+L|0,i,52),er.writeUint32LE(X+Y|0,i,56),er.writeUint32LE(V+p|0,i,60)}function lp(i,e,t,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),l=c.length-e.length,c.set(e,l)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,l=o}for(var d=new Uint8Array(64),y=0;y<t.length;y+=64){Tb(d,c,i);for(var g=y;g<y+64&&g<t.length;g++)s[g]=t[g]^d[g-y];Rb(c,0,l)}return fu.wipe(d),o===0&&fu.wipe(c),s}ia.streamXOR=lp;function Nb(i,e,t,s){return s===void 0&&(s=0),fu.wipe(t),lp(i,e,t,t,s)}ia.stream=Nb;function Rb(i,e,t){for(var s=1;t--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var dp={},$i={};Object.defineProperty($i,"__esModule",{value:!0});function Ub(i,e,t){return~(i-1)&e|i-1&t}$i.select=Ub;function Fb(i,e){return(i|0)-(e|0)-1>>>31&1}$i.lessOrEqual=Fb;function pp(i,e){if(i.length!==e.length)return 0;for(var t=0,s=0;s<i.length;s++)t|=i[s]^e[s];return 1&t-1>>>8}$i.compare=pp;function $b(i,e){return i.length===0||e.length===0?!1:pp(i,e)!==0}$i.equal=$b;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=$i,t=xr;i.DIGEST_LENGTH=16;var s=function(){function l(d){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var y=d[0]|d[1]<<8;this._r[0]=y&8191;var g=d[2]|d[3]<<8;this._r[1]=(y>>>13|g<<3)&8191;var _=d[4]|d[5]<<8;this._r[2]=(g>>>10|_<<6)&7939;var O=d[6]|d[7]<<8;this._r[3]=(_>>>7|O<<9)&8191;var T=d[8]|d[9]<<8;this._r[4]=(O>>>4|T<<12)&255,this._r[5]=T>>>1&8190;var C=d[10]|d[11]<<8;this._r[6]=(T>>>14|C<<2)&8191;var P=d[12]|d[13]<<8;this._r[7]=(C>>>11|P<<5)&8065;var H=d[14]|d[15]<<8;this._r[8]=(P>>>8|H<<8)&8191,this._r[9]=H>>>5&127,this._pad[0]=d[16]|d[17]<<8,this._pad[1]=d[18]|d[19]<<8,this._pad[2]=d[20]|d[21]<<8,this._pad[3]=d[22]|d[23]<<8,this._pad[4]=d[24]|d[25]<<8,this._pad[5]=d[26]|d[27]<<8,this._pad[6]=d[28]|d[29]<<8,this._pad[7]=d[30]|d[31]<<8}return l.prototype._blocks=function(d,y,g){for(var _=this._fin?0:2048,O=this._h[0],T=this._h[1],C=this._h[2],P=this._h[3],H=this._h[4],L=this._h[5],Y=this._h[6],p=this._h[7],w=this._h[8],v=this._h[9],b=this._r[0],D=this._r[1],u=this._r[2],E=this._r[3],k=this._r[4],ne=this._r[5],ue=this._r[6],ye=this._r[7],me=this._r[8],A=this._r[9];g>=16;){var U=d[y+0]|d[y+1]<<8;O+=U&8191;var ee=d[y+2]|d[y+3]<<8;T+=(U>>>13|ee<<3)&8191;var X=d[y+4]|d[y+5]<<8;C+=(ee>>>10|X<<6)&8191;var V=d[y+6]|d[y+7]<<8;P+=(X>>>7|V<<9)&8191;var W=d[y+8]|d[y+9]<<8;H+=(V>>>4|W<<12)&8191,L+=W>>>1&8191;var te=d[y+10]|d[y+11]<<8;Y+=(W>>>14|te<<2)&8191;var ie=d[y+12]|d[y+13]<<8;p+=(te>>>11|ie<<5)&8191;var De=d[y+14]|d[y+15]<<8;w+=(ie>>>8|De<<8)&8191,v+=De>>>5|_;var oe=0,Se=oe;Se+=O*b,Se+=T*(5*A),Se+=C*(5*me),Se+=P*(5*ye),Se+=H*(5*ue),oe=Se>>>13,Se&=8191,Se+=L*(5*ne),Se+=Y*(5*k),Se+=p*(5*E),Se+=w*(5*u),Se+=v*(5*D),oe+=Se>>>13,Se&=8191;var fe=oe;fe+=O*D,fe+=T*b,fe+=C*(5*A),fe+=P*(5*me),fe+=H*(5*ye),oe=fe>>>13,fe&=8191,fe+=L*(5*ue),fe+=Y*(5*ne),fe+=p*(5*k),fe+=w*(5*E),fe+=v*(5*u),oe+=fe>>>13,fe&=8191;var Ce=oe;Ce+=O*u,Ce+=T*D,Ce+=C*b,Ce+=P*(5*A),Ce+=H*(5*me),oe=Ce>>>13,Ce&=8191,Ce+=L*(5*ye),Ce+=Y*(5*ue),Ce+=p*(5*ne),Ce+=w*(5*k),Ce+=v*(5*E),oe+=Ce>>>13,Ce&=8191;var z=oe;z+=O*E,z+=T*u,z+=C*D,z+=P*b,z+=H*(5*A),oe=z>>>13,z&=8191,z+=L*(5*me),z+=Y*(5*ye),z+=p*(5*ue),z+=w*(5*ne),z+=v*(5*k),oe+=z>>>13,z&=8191;var B=oe;B+=O*k,B+=T*E,B+=C*u,B+=P*D,B+=H*b,oe=B>>>13,B&=8191,B+=L*(5*A),B+=Y*(5*me),B+=p*(5*ye),B+=w*(5*ue),B+=v*(5*ne),oe+=B>>>13,B&=8191;var $=oe;$+=O*ne,$+=T*k,$+=C*E,$+=P*u,$+=H*D,oe=$>>>13,$&=8191,$+=L*b,$+=Y*(5*A),$+=p*(5*me),$+=w*(5*ye),$+=v*(5*ue),oe+=$>>>13,$&=8191;var f=oe;f+=O*ue,f+=T*ne,f+=C*k,f+=P*E,f+=H*u,oe=f>>>13,f&=8191,f+=L*D,f+=Y*b,f+=p*(5*A),f+=w*(5*me),f+=v*(5*ye),oe+=f>>>13,f&=8191;var R=oe;R+=O*ye,R+=T*ue,R+=C*ne,R+=P*k,R+=H*E,oe=R>>>13,R&=8191,R+=L*u,R+=Y*D,R+=p*b,R+=w*(5*A),R+=v*(5*me),oe+=R>>>13,R&=8191;var se=oe;se+=O*me,se+=T*ye,se+=C*ue,se+=P*ne,se+=H*k,oe=se>>>13,se&=8191,se+=L*E,se+=Y*u,se+=p*D,se+=w*b,se+=v*(5*A),oe+=se>>>13,se&=8191;var he=oe;he+=O*A,he+=T*me,he+=C*ye,he+=P*ue,he+=H*ne,oe=he>>>13,he&=8191,he+=L*k,he+=Y*E,he+=p*u,he+=w*D,he+=v*b,oe+=he>>>13,he&=8191,oe=(oe<<2)+oe|0,oe=oe+Se|0,Se=oe&8191,oe=oe>>>13,fe+=oe,O=Se,T=fe,C=Ce,P=z,H=B,L=$,Y=f,p=R,w=se,v=he,y+=16,g-=16}this._h[0]=O,this._h[1]=T,this._h[2]=C,this._h[3]=P,this._h[4]=H,this._h[5]=L,this._h[6]=Y,this._h[7]=p,this._h[8]=w,this._h[9]=v},l.prototype.finish=function(d,y){y===void 0&&(y=0);var g=new Uint16Array(10),_,O,T,C;if(this._leftover){for(C=this._leftover,this._buffer[C++]=1;C<16;C++)this._buffer[C]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(_=this._h[1]>>>13,this._h[1]&=8191,C=2;C<10;C++)this._h[C]+=_,_=this._h[C]>>>13,this._h[C]&=8191;for(this._h[0]+=_*5,_=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=_,_=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=_,g[0]=this._h[0]+5,_=g[0]>>>13,g[0]&=8191,C=1;C<10;C++)g[C]=this._h[C]+_,_=g[C]>>>13,g[C]&=8191;for(g[9]-=8192,O=(_^1)-1,C=0;C<10;C++)g[C]&=O;for(O=~O,C=0;C<10;C++)this._h[C]=this._h[C]&O|g[C];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,T=this._h[0]+this._pad[0],this._h[0]=T&65535,C=1;C<8;C++)T=(this._h[C]+this._pad[C]|0)+(T>>>16)|0,this._h[C]=T&65535;return d[y+0]=this._h[0]>>>0,d[y+1]=this._h[0]>>>8,d[y+2]=this._h[1]>>>0,d[y+3]=this._h[1]>>>8,d[y+4]=this._h[2]>>>0,d[y+5]=this._h[2]>>>8,d[y+6]=this._h[3]>>>0,d[y+7]=this._h[3]>>>8,d[y+8]=this._h[4]>>>0,d[y+9]=this._h[4]>>>8,d[y+10]=this._h[5]>>>0,d[y+11]=this._h[5]>>>8,d[y+12]=this._h[6]>>>0,d[y+13]=this._h[6]>>>8,d[y+14]=this._h[7]>>>0,d[y+15]=this._h[7]>>>8,this._finished=!0,this},l.prototype.update=function(d){var y=0,g=d.length,_;if(this._leftover){_=16-this._leftover,_>g&&(_=g);for(var O=0;O<_;O++)this._buffer[this._leftover+O]=d[y+O];if(g-=_,y+=_,this._leftover+=_,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(g>=16&&(_=g-g%16,this._blocks(d,y,_),y+=_,g-=_),g){for(var O=0;O<g;O++)this._buffer[this._leftover+O]=d[y+O];this._leftover+=g}return this},l.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var d=new Uint8Array(16);return this.finish(d),d},l.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},l}();i.Poly1305=s;function o(l,d){var y=new s(l);y.update(d);var g=y.digest();return y.clean(),g}i.oneTimeAuth=o;function c(l,d){return l.length!==i.DIGEST_LENGTH||d.length!==i.DIGEST_LENGTH?!1:e.equal(l,d)}i.equal=c})(dp);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=ia,t=dp,s=xr,o=$e,c=$i;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var l=new Uint8Array(16),d=function(){function y(g){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,g.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(g)}return y.prototype.seal=function(g,_,O,T){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var C=new Uint8Array(16);C.set(g,C.length-g.length);var P=new Uint8Array(32);e.stream(this._key,C,P,4);var H=_.length+this.tagLength,L;if(T){if(T.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");L=T}else L=new Uint8Array(H);return e.streamXOR(this._key,C,_,L,4),this._authenticate(L.subarray(L.length-this.tagLength,L.length),P,L.subarray(0,L.length-this.tagLength),O),s.wipe(C),L},y.prototype.open=function(g,_,O,T){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(_.length<this.tagLength)return null;var C=new Uint8Array(16);C.set(g,C.length-g.length);var P=new Uint8Array(32);e.stream(this._key,C,P,4);var H=new Uint8Array(this.tagLength);if(this._authenticate(H,P,_.subarray(0,_.length-this.tagLength),O),!c.equal(H,_.subarray(_.length-this.tagLength,_.length)))return null;var L=_.length-this.tagLength,Y;if(T){if(T.length!==L)throw new Error("ChaCha20Poly1305: incorrect destination length");Y=T}else Y=new Uint8Array(L);return e.streamXOR(this._key,C,_.subarray(0,_.length-this.tagLength),Y,4),s.wipe(C),Y},y.prototype.clean=function(){return s.wipe(this._key),this},y.prototype._authenticate=function(g,_,O,T){var C=new t.Poly1305(_);T&&(C.update(T),T.length%16>0&&C.update(l.subarray(T.length%16))),C.update(O),O.length%16>0&&C.update(l.subarray(O.length%16));var P=new Uint8Array(8);T&&o.writeUint64LE(T.length,P),C.update(P),o.writeUint64LE(O.length,P),C.update(P);for(var H=C.digest(),L=0;L<H.length;L++)g[L]=H[L];C.clean(),s.wipe(H),s.wipe(P)},y}();i.ChaCha20Poly1305=d})(Ru);var gp={},Es={},Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});function jb(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}Uu.isSerializableHash=jb;Object.defineProperty(Es,"__esModule",{value:!0});var ri=Uu,Lb=$i,Mb=xr,yp=function(){function i(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),ri.isSerializableHash(this._inner)&&ri.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Mb.wipe(s)}return i.prototype.reset=function(){if(!ri.isSerializableHash(this._inner)||!ri.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){ri.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ri.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!ri.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!ri.isSerializableHash(this._inner)||!ri.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!ri.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();Es.HMAC=yp;function qb(i,e,t){var s=new yp(i,e);s.update(t);var o=s.digest();return s.clean(),o}Es.hmac=qb;Es.equal=Lb.equal;Object.defineProperty(gp,"__esModule",{value:!0});var hl=Es,fl=xr,Bb=function(){function i(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=hl.hmac(this._hash,s,t);this._hmac=new hl.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},i.prototype.clean=function(){this._hmac.clean(),fl.wipe(this._buffer),fl.wipe(this._counter),this._bufpos=0},i}(),zb=gp.HKDF=Bb,$n={},na={},sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.BrowserRandomSource=void 0;const ll=65536;class Hb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=ll)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,ll)));return t}}sa.BrowserRandomSource=Hb;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.NodeRandomSource=void 0;const Kb=xr;class Vb{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof rb<"u"){const e=eb;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,Kb.wipe)(t),s}}oa.NodeRandomSource=Vb;Object.defineProperty(na,"__esModule",{value:!0});na.SystemRandomSource=void 0;const kb=sa,Wb=oa;class Gb{constructor(){if(this.isAvailable=!1,this.name="",this._source=new kb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Wb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}na.SystemRandomSource=Gb;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=na,t=$e,s=xr;i.defaultRandomSource=new e.SystemRandomSource;function o(g,_=i.defaultRandomSource){return _.randomBytes(g)}i.randomBytes=o;function c(g=i.defaultRandomSource){const _=o(4,g),O=(0,t.readUint32LE)(_);return(0,s.wipe)(_),O}i.randomUint32=c;const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(g,_=l,O=i.defaultRandomSource){if(_.length<2)throw new Error("randomString charset is too short");if(_.length>256)throw new Error("randomString charset is too long");let T="";const C=_.length,P=256-256%C;for(;g>0;){const H=o(Math.ceil(g*256/P),O);for(let L=0;L<H.length&&g>0;L++){const Y=H[L];Y<P&&(T+=_.charAt(Y%C),g--)}(0,s.wipe)(H)}return T}i.randomString=d;function y(g,_=l,O=i.defaultRandomSource){const T=Math.ceil(g/(Math.log(_.length)/Math.LN2));return d(T,_,O)}i.randomStringForEntropy=y})($n);var aa={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=$e,t=xr;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function d(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},d.prototype.update=function(y,g){if(g===void 0&&(g=y.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var _=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&g>0;)this._buffer[this._bufferLength++]=y[_++],g--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(_=c(this._temp,this._state,y,_,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=y[_++],g--;return this},d.prototype.finish=function(y){if(!this._finished){var g=this._bytesHashed,_=this._bufferLength,O=g/536870912|0,T=g<<3,C=g%64<56?64:128;this._buffer[_]=128;for(var P=_+1;P<C-8;P++)this._buffer[P]=0;e.writeUint32BE(O,this._buffer,C-8),e.writeUint32BE(T,this._buffer,C-4),c(this._temp,this._state,this._buffer,0,C),this._finished=!0}for(var P=0;P<this.digestLength/4;P++)e.writeUint32BE(this._state[P],y,P*4);return this},d.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(y){return this._state.set(y.state),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(y){t.wipe(y.state),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},d}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(d,y,g,_,O){for(;O>=64;){for(var T=y[0],C=y[1],P=y[2],H=y[3],L=y[4],Y=y[5],p=y[6],w=y[7],v=0;v<16;v++){var b=_+v*4;d[v]=e.readUint32BE(g,b)}for(var v=16;v<64;v++){var D=d[v-2],u=(D>>>17|D<<32-17)^(D>>>19|D<<32-19)^D>>>10;D=d[v-15];var E=(D>>>7|D<<32-7)^(D>>>18|D<<32-18)^D>>>3;d[v]=(u+d[v-7]|0)+(E+d[v-16]|0)}for(var v=0;v<64;v++){var u=(((L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7))+(L&Y^~L&p)|0)+(w+(o[v]+d[v]|0)|0)|0,E=((T>>>2|T<<32-2)^(T>>>13|T<<32-13)^(T>>>22|T<<32-22))+(T&C^T&P^C&P)|0;w=p,p=Y,Y=L,L=H+u|0,H=P,P=C,C=T,T=u+E|0}y[0]+=T,y[1]+=C,y[2]+=P,y[3]+=H,y[4]+=L,y[5]+=Y,y[6]+=p,y[7]+=w,_+=64,O-=64}return _}function l(d){var y=new s;y.update(d);var g=y.digest();return y.clean(),g}i.hash=l})(aa);var Fu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=$n,t=xr;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(v){const b=new Float64Array(16);if(v)for(let D=0;D<v.length;D++)b[D]=v[D];return b}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function l(v){let b=1;for(let D=0;D<16;D++){let u=v[D]+b+65535;b=Math.floor(u/65536),v[D]=u-b*65536}v[0]+=b-1+37*(b-1)}function d(v,b,D){const u=~(D-1);for(let E=0;E<16;E++){const k=u&(v[E]^b[E]);v[E]^=k,b[E]^=k}}function y(v,b){const D=s(),u=s();for(let E=0;E<16;E++)u[E]=b[E];l(u),l(u),l(u);for(let E=0;E<2;E++){D[0]=u[0]-65517;for(let ne=1;ne<15;ne++)D[ne]=u[ne]-65535-(D[ne-1]>>16&1),D[ne-1]&=65535;D[15]=u[15]-32767-(D[14]>>16&1);const k=D[15]>>16&1;D[14]&=65535,d(u,D,1-k)}for(let E=0;E<16;E++)v[2*E]=u[E]&255,v[2*E+1]=u[E]>>8}function g(v,b){for(let D=0;D<16;D++)v[D]=b[2*D]+(b[2*D+1]<<8);v[15]&=32767}function _(v,b,D){for(let u=0;u<16;u++)v[u]=b[u]+D[u]}function O(v,b,D){for(let u=0;u<16;u++)v[u]=b[u]-D[u]}function T(v,b,D){let u,E,k=0,ne=0,ue=0,ye=0,me=0,A=0,U=0,ee=0,X=0,V=0,W=0,te=0,ie=0,De=0,oe=0,Se=0,fe=0,Ce=0,z=0,B=0,$=0,f=0,R=0,se=0,he=0,Ee=0,ze=0,Ve=0,je=0,pt=0,gt=0,Me=D[0],Ie=D[1],Re=D[2],Ue=D[3],qe=D[4],xe=D[5],Fe=D[6],we=D[7],Ae=D[8],He=D[9],Oe=D[10],ke=D[11],Ge=D[12],Ze=D[13],et=D[14],Je=D[15];u=b[0],k+=u*Me,ne+=u*Ie,ue+=u*Re,ye+=u*Ue,me+=u*qe,A+=u*xe,U+=u*Fe,ee+=u*we,X+=u*Ae,V+=u*He,W+=u*Oe,te+=u*ke,ie+=u*Ge,De+=u*Ze,oe+=u*et,Se+=u*Je,u=b[1],ne+=u*Me,ue+=u*Ie,ye+=u*Re,me+=u*Ue,A+=u*qe,U+=u*xe,ee+=u*Fe,X+=u*we,V+=u*Ae,W+=u*He,te+=u*Oe,ie+=u*ke,De+=u*Ge,oe+=u*Ze,Se+=u*et,fe+=u*Je,u=b[2],ue+=u*Me,ye+=u*Ie,me+=u*Re,A+=u*Ue,U+=u*qe,ee+=u*xe,X+=u*Fe,V+=u*we,W+=u*Ae,te+=u*He,ie+=u*Oe,De+=u*ke,oe+=u*Ge,Se+=u*Ze,fe+=u*et,Ce+=u*Je,u=b[3],ye+=u*Me,me+=u*Ie,A+=u*Re,U+=u*Ue,ee+=u*qe,X+=u*xe,V+=u*Fe,W+=u*we,te+=u*Ae,ie+=u*He,De+=u*Oe,oe+=u*ke,Se+=u*Ge,fe+=u*Ze,Ce+=u*et,z+=u*Je,u=b[4],me+=u*Me,A+=u*Ie,U+=u*Re,ee+=u*Ue,X+=u*qe,V+=u*xe,W+=u*Fe,te+=u*we,ie+=u*Ae,De+=u*He,oe+=u*Oe,Se+=u*ke,fe+=u*Ge,Ce+=u*Ze,z+=u*et,B+=u*Je,u=b[5],A+=u*Me,U+=u*Ie,ee+=u*Re,X+=u*Ue,V+=u*qe,W+=u*xe,te+=u*Fe,ie+=u*we,De+=u*Ae,oe+=u*He,Se+=u*Oe,fe+=u*ke,Ce+=u*Ge,z+=u*Ze,B+=u*et,$+=u*Je,u=b[6],U+=u*Me,ee+=u*Ie,X+=u*Re,V+=u*Ue,W+=u*qe,te+=u*xe,ie+=u*Fe,De+=u*we,oe+=u*Ae,Se+=u*He,fe+=u*Oe,Ce+=u*ke,z+=u*Ge,B+=u*Ze,$+=u*et,f+=u*Je,u=b[7],ee+=u*Me,X+=u*Ie,V+=u*Re,W+=u*Ue,te+=u*qe,ie+=u*xe,De+=u*Fe,oe+=u*we,Se+=u*Ae,fe+=u*He,Ce+=u*Oe,z+=u*ke,B+=u*Ge,$+=u*Ze,f+=u*et,R+=u*Je,u=b[8],X+=u*Me,V+=u*Ie,W+=u*Re,te+=u*Ue,ie+=u*qe,De+=u*xe,oe+=u*Fe,Se+=u*we,fe+=u*Ae,Ce+=u*He,z+=u*Oe,B+=u*ke,$+=u*Ge,f+=u*Ze,R+=u*et,se+=u*Je,u=b[9],V+=u*Me,W+=u*Ie,te+=u*Re,ie+=u*Ue,De+=u*qe,oe+=u*xe,Se+=u*Fe,fe+=u*we,Ce+=u*Ae,z+=u*He,B+=u*Oe,$+=u*ke,f+=u*Ge,R+=u*Ze,se+=u*et,he+=u*Je,u=b[10],W+=u*Me,te+=u*Ie,ie+=u*Re,De+=u*Ue,oe+=u*qe,Se+=u*xe,fe+=u*Fe,Ce+=u*we,z+=u*Ae,B+=u*He,$+=u*Oe,f+=u*ke,R+=u*Ge,se+=u*Ze,he+=u*et,Ee+=u*Je,u=b[11],te+=u*Me,ie+=u*Ie,De+=u*Re,oe+=u*Ue,Se+=u*qe,fe+=u*xe,Ce+=u*Fe,z+=u*we,B+=u*Ae,$+=u*He,f+=u*Oe,R+=u*ke,se+=u*Ge,he+=u*Ze,Ee+=u*et,ze+=u*Je,u=b[12],ie+=u*Me,De+=u*Ie,oe+=u*Re,Se+=u*Ue,fe+=u*qe,Ce+=u*xe,z+=u*Fe,B+=u*we,$+=u*Ae,f+=u*He,R+=u*Oe,se+=u*ke,he+=u*Ge,Ee+=u*Ze,ze+=u*et,Ve+=u*Je,u=b[13],De+=u*Me,oe+=u*Ie,Se+=u*Re,fe+=u*Ue,Ce+=u*qe,z+=u*xe,B+=u*Fe,$+=u*we,f+=u*Ae,R+=u*He,se+=u*Oe,he+=u*ke,Ee+=u*Ge,ze+=u*Ze,Ve+=u*et,je+=u*Je,u=b[14],oe+=u*Me,Se+=u*Ie,fe+=u*Re,Ce+=u*Ue,z+=u*qe,B+=u*xe,$+=u*Fe,f+=u*we,R+=u*Ae,se+=u*He,he+=u*Oe,Ee+=u*ke,ze+=u*Ge,Ve+=u*Ze,je+=u*et,pt+=u*Je,u=b[15],Se+=u*Me,fe+=u*Ie,Ce+=u*Re,z+=u*Ue,B+=u*qe,$+=u*xe,f+=u*Fe,R+=u*we,se+=u*Ae,he+=u*He,Ee+=u*Oe,ze+=u*ke,Ve+=u*Ge,je+=u*Ze,pt+=u*et,gt+=u*Je,k+=38*fe,ne+=38*Ce,ue+=38*z,ye+=38*B,me+=38*$,A+=38*f,U+=38*R,ee+=38*se,X+=38*he,V+=38*Ee,W+=38*ze,te+=38*Ve,ie+=38*je,De+=38*pt,oe+=38*gt,E=1,u=k+E+65535,E=Math.floor(u/65536),k=u-E*65536,u=ne+E+65535,E=Math.floor(u/65536),ne=u-E*65536,u=ue+E+65535,E=Math.floor(u/65536),ue=u-E*65536,u=ye+E+65535,E=Math.floor(u/65536),ye=u-E*65536,u=me+E+65535,E=Math.floor(u/65536),me=u-E*65536,u=A+E+65535,E=Math.floor(u/65536),A=u-E*65536,u=U+E+65535,E=Math.floor(u/65536),U=u-E*65536,u=ee+E+65535,E=Math.floor(u/65536),ee=u-E*65536,u=X+E+65535,E=Math.floor(u/65536),X=u-E*65536,u=V+E+65535,E=Math.floor(u/65536),V=u-E*65536,u=W+E+65535,E=Math.floor(u/65536),W=u-E*65536,u=te+E+65535,E=Math.floor(u/65536),te=u-E*65536,u=ie+E+65535,E=Math.floor(u/65536),ie=u-E*65536,u=De+E+65535,E=Math.floor(u/65536),De=u-E*65536,u=oe+E+65535,E=Math.floor(u/65536),oe=u-E*65536,u=Se+E+65535,E=Math.floor(u/65536),Se=u-E*65536,k+=E-1+37*(E-1),E=1,u=k+E+65535,E=Math.floor(u/65536),k=u-E*65536,u=ne+E+65535,E=Math.floor(u/65536),ne=u-E*65536,u=ue+E+65535,E=Math.floor(u/65536),ue=u-E*65536,u=ye+E+65535,E=Math.floor(u/65536),ye=u-E*65536,u=me+E+65535,E=Math.floor(u/65536),me=u-E*65536,u=A+E+65535,E=Math.floor(u/65536),A=u-E*65536,u=U+E+65535,E=Math.floor(u/65536),U=u-E*65536,u=ee+E+65535,E=Math.floor(u/65536),ee=u-E*65536,u=X+E+65535,E=Math.floor(u/65536),X=u-E*65536,u=V+E+65535,E=Math.floor(u/65536),V=u-E*65536,u=W+E+65535,E=Math.floor(u/65536),W=u-E*65536,u=te+E+65535,E=Math.floor(u/65536),te=u-E*65536,u=ie+E+65535,E=Math.floor(u/65536),ie=u-E*65536,u=De+E+65535,E=Math.floor(u/65536),De=u-E*65536,u=oe+E+65535,E=Math.floor(u/65536),oe=u-E*65536,u=Se+E+65535,E=Math.floor(u/65536),Se=u-E*65536,k+=E-1+37*(E-1),v[0]=k,v[1]=ne,v[2]=ue,v[3]=ye,v[4]=me,v[5]=A,v[6]=U,v[7]=ee,v[8]=X,v[9]=V,v[10]=W,v[11]=te,v[12]=ie,v[13]=De,v[14]=oe,v[15]=Se}function C(v,b){T(v,b,b)}function P(v,b){const D=s();for(let u=0;u<16;u++)D[u]=b[u];for(let u=253;u>=0;u--)C(D,D),u!==2&&u!==4&&T(D,D,b);for(let u=0;u<16;u++)v[u]=D[u]}function H(v,b){const D=new Uint8Array(32),u=new Float64Array(80),E=s(),k=s(),ne=s(),ue=s(),ye=s(),me=s();for(let X=0;X<31;X++)D[X]=v[X];D[31]=v[31]&127|64,D[0]&=248,g(u,b);for(let X=0;X<16;X++)k[X]=u[X];E[0]=ue[0]=1;for(let X=254;X>=0;--X){const V=D[X>>>3]>>>(X&7)&1;d(E,k,V),d(ne,ue,V),_(ye,E,ne),O(E,E,ne),_(ne,k,ue),O(k,k,ue),C(ue,ye),C(me,E),T(E,ne,E),T(ne,k,ye),_(ye,E,ne),O(E,E,ne),C(k,E),O(ne,ue,me),T(E,ne,c),_(E,E,ue),T(ne,ne,E),T(E,ue,me),T(ue,k,u),C(k,ye),d(E,k,V),d(ne,ue,V)}for(let X=0;X<16;X++)u[X+16]=E[X],u[X+32]=ne[X],u[X+48]=k[X],u[X+64]=ue[X];const A=u.subarray(32),U=u.subarray(16);P(A,A),T(U,U,A);const ee=new Uint8Array(32);return y(ee,U),ee}i.scalarMult=H;function L(v){return H(v,o)}i.scalarMultBase=L;function Y(v){if(v.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const b=new Uint8Array(v);return{publicKey:L(b),secretKey:b}}i.generateKeyPairFromSeed=Y;function p(v){const b=(0,e.randomBytes)(32,v),D=Y(b);return(0,t.wipe)(b),D}i.generateKeyPair=p;function w(v,b,D=!1){if(v.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(b.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=H(v,b);if(D){let E=0;for(let k=0;k<u.length;k++)E|=u[k];if(E===0)throw new Error("X25519: invalid shared key")}return u}i.sharedKey=w})(Fu);function $u(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function mp(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?$u(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function lu(i,e){e||(e=i.reduce((o,c)=>o+c.length,0));const t=mp(e);let s=0;for(const o of i)t.set(o,s),s+=o.length;return $u(t)}function Yb(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var d=i.length,y=i.charAt(0),g=Math.log(d)/Math.log(256),_=Math.log(256)/Math.log(d);function O(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var H=0,L=0,Y=0,p=P.length;Y!==p&&P[Y]===0;)Y++,H++;for(var w=(p-Y)*_+1>>>0,v=new Uint8Array(w);Y!==p;){for(var b=P[Y],D=0,u=w-1;(b!==0||D<L)&&u!==-1;u--,D++)b+=256*v[u]>>>0,v[u]=b%d>>>0,b=b/d>>>0;if(b!==0)throw new Error("Non-zero carry");L=D,Y++}for(var E=w-L;E!==w&&v[E]===0;)E++;for(var k=y.repeat(H);E<w;++E)k+=i.charAt(v[E]);return k}function T(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var H=0;if(P[H]!==" "){for(var L=0,Y=0;P[H]===y;)L++,H++;for(var p=(P.length-H)*g+1>>>0,w=new Uint8Array(p);P[H];){var v=t[P.charCodeAt(H)];if(v===255)return;for(var b=0,D=p-1;(v!==0||b<Y)&&D!==-1;D--,b++)v+=d*w[D]>>>0,w[D]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");Y=b,H++}if(P[H]!==" "){for(var u=p-Y;u!==p&&w[u]===0;)u++;for(var E=new Uint8Array(L+(p-u)),k=L;u!==p;)E[k++]=w[u++];return E}}}function C(P){var H=T(P);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:T,decode:C}}var Jb=Yb,Qb=Jb;const Xb=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},Zb=i=>new TextEncoder().encode(i),ew=i=>new TextDecoder().decode(i);class tw{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class rw{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vp(this,e)}}class iw{constructor(e){this.decoders=e}or(e){return vp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vp=(i,e)=>new iw({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class nw{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new tw(e,t,s),this.decoder=new rw(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ca=({name:i,prefix:e,encode:t,decode:s})=>new nw(i,e,t,s),Ds=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=Qb(t,e);return ca({prefix:i,name:e,encode:s,decode:c=>Xb(o(c))})},sw=(i,e,t,s)=>{const o={};for(let _=0;_<e.length;++_)o[e[_]]=_;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let d=0,y=0,g=0;for(let _=0;_<c;++_){const O=o[i[_]];if(O===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|O,d+=t,d>=8&&(d-=8,l[g++]=255&y>>d)}if(d>=t||255&y<<8-d)throw new SyntaxError("Unexpected end of data");return l},ow=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,d=0;for(let y=0;y<i.length;++y)for(d=d<<8|i[y],l+=8;l>t;)l-=t,c+=e[o&d>>l];if(l&&(c+=e[o&d<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Jt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ca({prefix:e,name:i,encode(o){return ow(o,s,t)},decode(o){return sw(o,s,t,i)}}),aw=ca({prefix:"\0",name:"identity",encode:i=>ew(i),decode:i=>Zb(i)}),cw=Object.freeze(Object.defineProperty({__proto__:null,identity:aw},Symbol.toStringTag,{value:"Module"})),uw=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),hw=Object.freeze(Object.defineProperty({__proto__:null,base2:uw},Symbol.toStringTag,{value:"Module"})),fw=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),lw=Object.freeze(Object.defineProperty({__proto__:null,base8:fw},Symbol.toStringTag,{value:"Module"})),dw=Ds({prefix:"9",name:"base10",alphabet:"0123456789"}),pw=Object.freeze(Object.defineProperty({__proto__:null,base10:dw},Symbol.toStringTag,{value:"Module"})),gw=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),yw=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),mw=Object.freeze(Object.defineProperty({__proto__:null,base16:gw,base16upper:yw},Symbol.toStringTag,{value:"Module"})),vw=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_w=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bw=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ww=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ew=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dw=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Sw=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Iw=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ow=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),xw=Object.freeze(Object.defineProperty({__proto__:null,base32:vw,base32hex:Ew,base32hexpad:Sw,base32hexpadupper:Iw,base32hexupper:Dw,base32pad:bw,base32padupper:ww,base32upper:_w,base32z:Ow},Symbol.toStringTag,{value:"Module"})),Aw=Ds({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Pw=Ds({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Cw=Object.freeze(Object.defineProperty({__proto__:null,base36:Aw,base36upper:Pw},Symbol.toStringTag,{value:"Module"})),Tw=Ds({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Nw=Ds({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Rw=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Tw,base58flickr:Nw},Symbol.toStringTag,{value:"Module"})),Uw=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fw=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$w=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jw=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Lw=Object.freeze(Object.defineProperty({__proto__:null,base64:Uw,base64pad:Fw,base64url:$w,base64urlpad:jw},Symbol.toStringTag,{value:"Module"})),_p=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Mw=_p.reduce((i,e,t)=>(i[t]=e,i),[]),qw=_p.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function Bw(i){return i.reduce((e,t)=>(e+=Mw[t],e),"")}function zw(i){const e=[];for(const t of i){const s=qw[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Hw=ca({prefix:"🚀",name:"base256emoji",encode:Bw,decode:zw}),Kw=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Hw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const dl={...cw,...hw,...lw,...pw,...mw,...xw,...Cw,...Rw,...Lw,...Kw};function bp(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const pl=bp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Bc=bp("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=mp(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),wp={utf8:pl,"utf-8":pl,hex:dl.base16,latin1:Bc,ascii:Bc,binary:Bc,...dl};function vr(i,e="utf8"){const t=wp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$u(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function ur(i,e="utf8"){const t=wp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}var pe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var du=function(i,e){return du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},du(i,e)};function Vw(i,e){du(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pu=function(){return pu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},pu.apply(this,arguments)};function kw(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function Ww(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var d=i.length-1;d>=0;d--)(l=i[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Gw(i,e){return function(t,s){e(t,s,i)}}function Yw(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function Jw(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(_){try{g(s.next(_))}catch(O){l(O)}}function y(_){try{g(s.throw(_))}catch(O){l(O)}}function g(_){_.done?c(_.value):o(_.value).then(d,y)}g((s=s.apply(i,e||[])).next())})}function Qw(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(g){return function(_){return y([g,_])}}function y(g){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=g[0]&2?o.return:g[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,g[1])).done)return c;switch(o=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,o=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(_){g=[6,_],o=0}finally{s=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function Xw(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function Zw(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function gu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ep(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function eE(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Ep(arguments[e]));return i}function tE(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)s[o]=c[l];return s}function vs(i){return this instanceof vs?(this.v=i,this):new vs(i)}function rE(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(T){s[T]&&(o[T]=function(C){return new Promise(function(P,H){c.push([T,C,P,H])>1||d(T,C)})})}function d(T,C){try{y(s[T](C))}catch(P){O(c[0][3],P)}}function y(T){T.value instanceof vs?Promise.resolve(T.value.v).then(g,_):O(c[0][2],T)}function g(T){d("next",T)}function _(T){d("throw",T)}function O(T,C){T(C),c.shift(),c.length&&d(c[0][0],c[0][1])}}function iE(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:vs(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function nE(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof gu=="function"?gu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(d,y){l=i[c](l),o(d,y,l.done,l.value)})}}function o(c,l,d,y){Promise.resolve(y).then(function(g){c({value:g,done:d})},l)}}function sE(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function oE(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function aE(i){return i&&i.__esModule?i:{default:i}}function cE(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function uE(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const hE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pu},__asyncDelegator:iE,__asyncGenerator:rE,__asyncValues:nE,__await:vs,__awaiter:Jw,__classPrivateFieldGet:cE,__classPrivateFieldSet:uE,__createBinding:Xw,__decorate:Ww,__exportStar:Zw,__extends:Vw,__generator:Qw,__importDefault:aE,__importStar:oE,__makeTemplateObject:sE,__metadata:Yw,__param:Gw,__read:Ep,__rest:kw,__spread:eE,__spreadArrays:tE,__values:gu},Symbol.toStringTag,{value:"Module"})),wi=Qd(hE);var zc={},ss={},gl;function fE(){if(gl)return ss;gl=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.delay=void 0;function i(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return ss.delay=i,ss}var Zi={},Hc={},en={},yl;function lE(){return yl||(yl=1,Object.defineProperty(en,"__esModule",{value:!0}),en.ONE_THOUSAND=en.ONE_HUNDRED=void 0,en.ONE_HUNDRED=100,en.ONE_THOUSAND=1e3),en}var Kc={},ml;function dE(){return ml||(ml=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(Kc)),Kc}var vl;function Dp(){return vl||(vl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=wi;e.__exportStar(lE(),i),e.__exportStar(dE(),i)}(Hc)),Hc}var _l;function pE(){if(_l)return Zi;_l=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.fromMiliseconds=Zi.toMiliseconds=void 0;const i=Dp();function e(s){return s*i.ONE_THOUSAND}Zi.toMiliseconds=e;function t(s){return Math.floor(s/i.ONE_THOUSAND)}return Zi.fromMiliseconds=t,Zi}var bl;function gE(){return bl||(bl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=wi;e.__exportStar(fE(),i),e.__exportStar(pE(),i)}(zc)),zc}var Cn={},wl;function yE(){if(wl)return Cn;wl=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return Cn.Watch=i,Cn.default=i,Cn}var Vc={},os={},El;function mE(){if(El)return os;El=1,Object.defineProperty(os,"__esModule",{value:!0}),os.IWatch=void 0;class i{}return os.IWatch=i,os}var Dl;function vE(){return Dl||(Dl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),wi.__exportStar(mE(),i)}(Vc)),Vc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=wi;e.__exportStar(gE(),i),e.__exportStar(yE(),i),e.__exportStar(vE(),i),e.__exportStar(Dp(),i)})(pe);var st={};Object.defineProperty(st,"__esModule",{value:!0});st.getLocalStorage=st.getLocalStorageOrThrow=st.getCrypto=st.getCryptoOrThrow=Ip=st.getLocation=st.getLocationOrThrow=ju=st.getNavigator=st.getNavigatorOrThrow=Sp=st.getDocument=st.getDocumentOrThrow=st.getFromWindowOrThrow=st.getFromWindow=void 0;function sn(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}st.getFromWindow=sn;function jn(i){const e=sn(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}st.getFromWindowOrThrow=jn;function _E(){return jn("document")}st.getDocumentOrThrow=_E;function bE(){return sn("document")}var Sp=st.getDocument=bE;function wE(){return jn("navigator")}st.getNavigatorOrThrow=wE;function EE(){return sn("navigator")}var ju=st.getNavigator=EE;function DE(){return jn("location")}st.getLocationOrThrow=DE;function SE(){return sn("location")}var Ip=st.getLocation=SE;function IE(){return jn("crypto")}st.getCryptoOrThrow=IE;function OE(){return sn("crypto")}st.getCrypto=OE;function xE(){return jn("localStorage")}st.getLocalStorageOrThrow=xE;function AE(){return sn("localStorage")}st.getLocalStorage=AE;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.getWindowMetadata=void 0;const Sl=st;function PE(){let i,e;try{i=Sl.getDocumentOrThrow(),e=Sl.getLocationOrThrow()}catch{return null}function t(){const O=i.getElementsByTagName("link"),T=[];for(let C=0;C<O.length;C++){const P=O[C],H=P.getAttribute("rel");if(H&&H.toLowerCase().indexOf("icon")>-1){const L=P.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let Y=e.protocol+"//"+e.host;if(L.indexOf("/")===0)Y+=L;else{const p=e.pathname.split("/");p.pop();const w=p.join("/");Y+=w+"/"+L}T.push(Y)}else if(L.indexOf("//")===0){const Y=e.protocol+L;T.push(Y)}else T.push(L)}}return T}function s(...O){const T=i.getElementsByTagName("meta");for(let C=0;C<T.length;C++){const P=T[C],H=["itemprop","property","name"].map(L=>P.getAttribute(L)).filter(L=>L?O.includes(L):!1);if(H.length&&H){const L=P.getAttribute("content");if(L)return L}}return""}function o(){let O=s("name","og:site_name","og:title","twitter:title");return O||(O=i.title),O}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),d=c(),y=e.origin,g=t();return{description:d,url:y,icons:g,name:l}}Lu.getWindowMetadata=PE;var CE={},Mu=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Op="%[a-f0-9]{2}",Il=new RegExp("("+Op+")|([^%]+?)","gi"),Ol=new RegExp("("+Op+")+","gi");function yu(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var t=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],yu(t),yu(s))}function TE(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(Il)||[],t=1;t<e.length;t++)i=yu(e,t).join(""),e=i.match(Il)||[];return i}}function NE(i){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=Ol.exec(i);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=TE(t[0]);s!==t[0]&&(e[t[0]]=s)}t=Ol.exec(i)}e["%C2"]="�";for(var o=Object.keys(e),c=0;c<o.length;c++){var l=o[c];i=i.replace(new RegExp(l,"g"),e[l])}return i}var qu=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return NE(i)}},Bu=(i,e)=>{if(!(typeof i=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[i];const t=i.indexOf(e);return t===-1?[i]:[i.slice(0,t),i.slice(t+e.length)]},zu=function(i,e){for(var t={},s=Object.keys(i),o=Array.isArray(e),c=0;c<s.length;c++){var l=s[c],d=i[l];(o?e.indexOf(l)!==-1:e(l,d,i))&&(t[l]=d)}return t};(function(i){const e=Mu,t=qu,s=Bu,o=zu,c=p=>p==null,l=Symbol("encodeFragmentIdentifier");function d(p){switch(p.arrayFormat){case"index":return w=>(v,b)=>{const D=v.length;return b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,[_(w,p),"[",D,"]"].join("")]:[...v,[_(w,p),"[",_(D,p),"]=",_(b,p)].join("")]};case"bracket":return w=>(v,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,[_(w,p),"[]"].join("")]:[...v,[_(w,p),"[]=",_(b,p)].join("")];case"colon-list-separator":return w=>(v,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,[_(w,p),":list="].join("")]:[...v,[_(w,p),":list=",_(b,p)].join("")];case"comma":case"separator":case"bracket-separator":{const w=p.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:(D=D===null?"":D,b.length===0?[[_(v,p),w,_(D,p)].join("")]:[[b,_(D,p)].join(p.arrayFormatSeparator)])}default:return w=>(v,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,_(w,p)]:[...v,[_(w,p),"=",_(b,p)].join("")]}}function y(p){let w;switch(p.arrayFormat){case"index":return(v,b,D)=>{if(w=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!w){D[v]=b;return}D[v]===void 0&&(D[v]={}),D[v][w[1]]=b};case"bracket":return(v,b,D)=>{if(w=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!w){D[v]=b;return}if(D[v]===void 0){D[v]=[b];return}D[v]=[].concat(D[v],b)};case"colon-list-separator":return(v,b,D)=>{if(w=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!w){D[v]=b;return}if(D[v]===void 0){D[v]=[b];return}D[v]=[].concat(D[v],b)};case"comma":case"separator":return(v,b,D)=>{const u=typeof b=="string"&&b.includes(p.arrayFormatSeparator),E=typeof b=="string"&&!u&&O(b,p).includes(p.arrayFormatSeparator);b=E?O(b,p):b;const k=u||E?b.split(p.arrayFormatSeparator).map(ne=>O(ne,p)):b===null?b:O(b,p);D[v]=k};case"bracket-separator":return(v,b,D)=>{const u=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!u){D[v]=b&&O(b,p);return}const E=b===null?[]:b.split(p.arrayFormatSeparator).map(k=>O(k,p));if(D[v]===void 0){D[v]=E;return}D[v]=[].concat(D[v],E)};default:return(v,b,D)=>{if(D[v]===void 0){D[v]=b;return}D[v]=[].concat(D[v],b)}}}function g(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(p,w){return w.encode?w.strict?e(p):encodeURIComponent(p):p}function O(p,w){return w.decode?t(p):p}function T(p){return Array.isArray(p)?p.sort():typeof p=="object"?T(Object.keys(p)).sort((w,v)=>Number(w)-Number(v)).map(w=>p[w]):p}function C(p){const w=p.indexOf("#");return w!==-1&&(p=p.slice(0,w)),p}function P(p){let w="";const v=p.indexOf("#");return v!==-1&&(w=p.slice(v)),w}function H(p){p=C(p);const w=p.indexOf("?");return w===-1?"":p.slice(w+1)}function L(p,w){return w.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):w.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function Y(p,w){w=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},w),g(w.arrayFormatSeparator);const v=y(w),b=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return b;for(const D of p.split("&")){if(D==="")continue;let[u,E]=s(w.decode?D.replace(/\+/g," "):D,"=");E=E===void 0?null:["comma","separator","bracket-separator"].includes(w.arrayFormat)?E:O(E,w),v(O(u,w),E,b)}for(const D of Object.keys(b)){const u=b[D];if(typeof u=="object"&&u!==null)for(const E of Object.keys(u))u[E]=L(u[E],w);else b[D]=L(u,w)}return w.sort===!1?b:(w.sort===!0?Object.keys(b).sort():Object.keys(b).sort(w.sort)).reduce((D,u)=>{const E=b[u];return E&&typeof E=="object"&&!Array.isArray(E)?D[u]=T(E):D[u]=E,D},Object.create(null))}i.extract=H,i.parse=Y,i.stringify=(p,w)=>{if(!p)return"";w=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},w),g(w.arrayFormatSeparator);const v=E=>w.skipNull&&c(p[E])||w.skipEmptyString&&p[E]==="",b=d(w),D={};for(const E of Object.keys(p))v(E)||(D[E]=p[E]);const u=Object.keys(D);return w.sort!==!1&&u.sort(w.sort),u.map(E=>{const k=p[E];return k===void 0?"":k===null?_(E,w):Array.isArray(k)?k.length===0&&w.arrayFormat==="bracket-separator"?_(E,w)+"[]":k.reduce(b(E),[]).join("&"):_(E,w)+"="+_(k,w)}).filter(E=>E.length>0).join("&")},i.parseUrl=(p,w)=>{w=Object.assign({decode:!0},w);const[v,b]=s(p,"#");return Object.assign({url:v.split("?")[0]||"",query:Y(H(p),w)},w&&w.parseFragmentIdentifier&&b?{fragmentIdentifier:O(b,w)}:{})},i.stringifyUrl=(p,w)=>{w=Object.assign({encode:!0,strict:!0,[l]:!0},w);const v=C(p.url).split("?")[0]||"",b=i.extract(p.url),D=i.parse(b,{sort:!1}),u=Object.assign(D,p.query);let E=i.stringify(u,w);E&&(E=`?${E}`);let k=P(p.url);return p.fragmentIdentifier&&(k=`#${w[l]?_(p.fragmentIdentifier,w):p.fragmentIdentifier}`),`${v}${E}${k}`},i.pick=(p,w,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[l]:!1},v);const{url:b,query:D,fragmentIdentifier:u}=i.parseUrl(p,v);return i.stringifyUrl({url:b,query:o(D,w),fragmentIdentifier:u},v)},i.exclude=(p,w,v)=>{const b=Array.isArray(w)?D=>!w.includes(D):(D,u)=>!w(D,u);return i.pick(p,b,v)}})(CE);const RE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function UE(i,e=[]){const t=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];t.push(...o.accounts)}),t}const FE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function $E(i,e){const{message:t,code:s}=FE[i];return{message:e?`${t} ${e}`:t,code:s}}function mu(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}const jE=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,LE=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ME=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function qE(i,e){if(i==="__proto__"||i==="constructor"&&e&&typeof e=="object"&&"prototype"in e){BE(i);return}return e}function BE(i){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`)}function Fo(i,e={}){if(typeof i!="string")return i;const t=i.trim();if(i[0]==='"'&&i.endsWith('"')&&!i.includes("\\"))return t.slice(1,-1);if(t.length<=9){const s=t.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!ME.test(i)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return i}try{if(jE.test(i)||LE.test(i)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(i,qE)}return JSON.parse(i)}catch(s){if(e.strict)throw s;return i}}function zE(i){return!i||typeof i.then!="function"?Promise.resolve(i):i}function kt(i,...e){try{return zE(i(...e))}catch(t){return Promise.reject(t)}}function HE(i){const e=typeof i;return i===null||e!=="object"&&e!=="function"}function KE(i){const e=Object.getPrototypeOf(i);return!e||e.isPrototypeOf(Object)}function zo(i){if(HE(i))return String(i);if(KE(i)||Array.isArray(i))return JSON.stringify(i);if(typeof i.toJSON=="function")return zo(i.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function xp(){if(typeof Buffer>"u")throw new TypeError("[unstorage] Buffer is not supported!")}const vu="base64:";function VE(i){if(typeof i=="string")return i;xp();const e=Buffer.from(i).toString("base64");return vu+e}function kE(i){return typeof i!="string"||!i.startsWith(vu)?i:(xp(),Buffer.from(i.slice(vu.length),"base64"))}function yr(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function WE(...i){return yr(i.join(":"))}function $o(i){return i=yr(i),i?i+":":""}const GE="memory",YE=()=>{const i=new Map;return{name:GE,getInstance:()=>i,hasItem(e){return i.has(e)},getItem(e){return i.get(e)??null},getItemRaw(e){return i.get(e)??null},setItem(e,t){i.set(e,t)},setItemRaw(e,t){i.set(e,t)},removeItem(e){i.delete(e)},getKeys(){return[...i.keys()]},clear(){i.clear()},dispose(){i.clear()}}};function JE(i={}){const e={mounts:{"":i.driver||YE()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=g=>{for(const _ of e.mountpoints)if(g.startsWith(_))return{base:_,relativeKey:g.slice(_.length),driver:e.mounts[_]};return{base:"",relativeKey:g,driver:e.mounts[""]}},s=(g,_)=>e.mountpoints.filter(O=>O.startsWith(g)||_&&g.startsWith(O)).map(O=>({relativeBase:g.length>O.length?g.slice(O.length):void 0,mountpoint:O,driver:e.mounts[O]})),o=(g,_)=>{if(e.watching){_=yr(_);for(const O of e.watchListeners)O(g,_)}},c=async()=>{if(!e.watching){e.watching=!0;for(const g in e.mounts)e.unwatch[g]=await xl(e.mounts[g],o,g)}},l=async()=>{if(e.watching){for(const g in e.unwatch)await e.unwatch[g]();e.unwatch={},e.watching=!1}},d=(g,_,O)=>{const T=new Map,C=P=>{let H=T.get(P.base);return H||(H={driver:P.driver,base:P.base,items:[]},T.set(P.base,H)),H};for(const P of g){const H=typeof P=="string",L=yr(H?P:P.key),Y=H?void 0:P.value,p=H||!P.options?_:{..._,...P.options},w=t(L);C(w).items.push({key:L,value:Y,relativeKey:w.relativeKey,options:p})}return Promise.all([...T.values()].map(P=>O(P))).then(P=>P.flat())},y={hasItem(g,_={}){g=yr(g);const{relativeKey:O,driver:T}=t(g);return kt(T.hasItem,O,_)},getItem(g,_={}){g=yr(g);const{relativeKey:O,driver:T}=t(g);return kt(T.getItem,O,_).then(C=>Fo(C))},getItems(g,_){return d(g,_,O=>O.driver.getItems?kt(O.driver.getItems,O.items.map(T=>({key:T.relativeKey,options:T.options})),_).then(T=>T.map(C=>({key:WE(O.base,C.key),value:Fo(C.value)}))):Promise.all(O.items.map(T=>kt(O.driver.getItem,T.relativeKey,T.options).then(C=>({key:T.key,value:Fo(C)})))))},getItemRaw(g,_={}){g=yr(g);const{relativeKey:O,driver:T}=t(g);return T.getItemRaw?kt(T.getItemRaw,O,_):kt(T.getItem,O,_).then(C=>kE(C))},async setItem(g,_,O={}){if(_===void 0)return y.removeItem(g);g=yr(g);const{relativeKey:T,driver:C}=t(g);C.setItem&&(await kt(C.setItem,T,zo(_),O),C.watch||o("update",g))},async setItems(g,_){await d(g,_,async O=>{if(O.driver.setItems)return kt(O.driver.setItems,O.items.map(T=>({key:T.relativeKey,value:zo(T.value),options:T.options})),_);O.driver.setItem&&await Promise.all(O.items.map(T=>kt(O.driver.setItem,T.relativeKey,zo(T.value),T.options)))})},async setItemRaw(g,_,O={}){if(_===void 0)return y.removeItem(g,O);g=yr(g);const{relativeKey:T,driver:C}=t(g);if(C.setItemRaw)await kt(C.setItemRaw,T,_,O);else if(C.setItem)await kt(C.setItem,T,VE(_),O);else return;C.watch||o("update",g)},async removeItem(g,_={}){typeof _=="boolean"&&(_={removeMeta:_}),g=yr(g);const{relativeKey:O,driver:T}=t(g);T.removeItem&&(await kt(T.removeItem,O,_),(_.removeMeta||_.removeMata)&&await kt(T.removeItem,O+"$",_),T.watch||o("remove",g))},async getMeta(g,_={}){typeof _=="boolean"&&(_={nativeOnly:_}),g=yr(g);const{relativeKey:O,driver:T}=t(g),C=Object.create(null);if(T.getMeta&&Object.assign(C,await kt(T.getMeta,O,_)),!_.nativeOnly){const P=await kt(T.getItem,O+"$",_).then(H=>Fo(H));P&&typeof P=="object"&&(typeof P.atime=="string"&&(P.atime=new Date(P.atime)),typeof P.mtime=="string"&&(P.mtime=new Date(P.mtime)),Object.assign(C,P))}return C},setMeta(g,_,O={}){return this.setItem(g+"$",_,O)},removeMeta(g,_={}){return this.removeItem(g+"$",_)},async getKeys(g,_={}){g=$o(g);const O=s(g,!0);let T=[];const C=[];for(const P of O){const H=await kt(P.driver.getKeys,P.relativeBase,_);for(const L of H){const Y=P.mountpoint+yr(L);T.some(p=>Y.startsWith(p))||C.push(Y)}T=[P.mountpoint,...T.filter(L=>!L.startsWith(P.mountpoint))]}return g?C.filter(P=>P.startsWith(g)&&P[P.length-1]!=="$"):C.filter(P=>P[P.length-1]!=="$")},async clear(g,_={}){g=$o(g),await Promise.all(s(g,!1).map(async O=>{if(O.driver.clear)return kt(O.driver.clear,O.relativeBase,_);if(O.driver.removeItem){const T=await O.driver.getKeys(O.relativeBase||"",_);return Promise.all(T.map(C=>O.driver.removeItem(C,_)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(g=>Al(g)))},async watch(g){return await c(),e.watchListeners.push(g),async()=>{e.watchListeners=e.watchListeners.filter(_=>_!==g),e.watchListeners.length===0&&await l()}},async unwatch(){e.watchListeners=[],await l()},mount(g,_){if(g=$o(g),g&&e.mounts[g])throw new Error(`already mounted at ${g}`);return g&&(e.mountpoints.push(g),e.mountpoints.sort((O,T)=>T.length-O.length)),e.mounts[g]=_,e.watching&&Promise.resolve(xl(_,o,g)).then(O=>{e.unwatch[g]=O}).catch(console.error),y},async unmount(g,_=!0){g=$o(g),!(!g||!e.mounts[g])&&(e.watching&&g in e.unwatch&&(e.unwatch[g](),delete e.unwatch[g]),_&&await Al(e.mounts[g]),e.mountpoints=e.mountpoints.filter(O=>O!==g),delete e.mounts[g])},getMount(g=""){g=yr(g)+":";const _=t(g);return{driver:_.driver,base:_.base}},getMounts(g="",_={}){return g=yr(g),s(g,_.parents).map(T=>({driver:T.driver,base:T.mountpoint}))},keys:(g,_={})=>y.getKeys(g,_),get:(g,_={})=>y.getItem(g,_),set:(g,_,O={})=>y.setItem(g,_,O),has:(g,_={})=>y.hasItem(g,_),del:(g,_={})=>y.removeItem(g,_),remove:(g,_={})=>y.removeItem(g,_)};return y}function xl(i,e,t){return i.watch?i.watch((s,o)=>e(s,t+o)):()=>{}}async function Al(i){typeof i.dispose=="function"&&await kt(i.dispose)}function on(i){return new Promise((e,t)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>t(i.error)})}function Ap(i,e){const t=indexedDB.open(i);t.onupgradeneeded=()=>t.result.createObjectStore(e);const s=on(t);return(o,c)=>s.then(l=>c(l.transaction(e,o).objectStore(e)))}let kc;function Ss(){return kc||(kc=Ap("keyval-store","keyval")),kc}function Pl(i,e=Ss()){return e("readonly",t=>on(t.get(i)))}function QE(i,e,t=Ss()){return t("readwrite",s=>(s.put(e,i),on(s.transaction)))}function XE(i,e=Ss()){return e("readwrite",t=>(t.delete(i),on(t.transaction)))}function ZE(i=Ss()){return i("readwrite",e=>(e.clear(),on(e.transaction)))}function e3(i,e){return i.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},on(i.transaction)}function t3(i=Ss()){return i("readonly",e=>{if(e.getAllKeys)return on(e.getAllKeys());const t=[];return e3(e,s=>t.push(s.key)).then(()=>t)})}const r3=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),i3=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Is(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return i3(i)}catch{return i}}function nn(i){return typeof i=="string"?i:r3(i)||""}const n3="idb-keyval";var s3=(i={})=>{const e=i.base&&i.base.length>0?`${i.base}:`:"",t=o=>e+o;let s;return i.dbName&&i.storeName&&(s=Ap(i.dbName,i.storeName)),{name:n3,options:i,async hasItem(o){return!(typeof await Pl(t(o),s)>"u")},async getItem(o){return await Pl(t(o),s)??null},setItem(o,c){return QE(t(o),c,s)},removeItem(o){return XE(t(o),s)},getKeys(){return t3(s)},clear(){return ZE(s)}}};const o3="WALLET_CONNECT_V2_INDEXED_DB",a3="keyvaluestorage";let c3=class{constructor(){this.indexedDb=JE({driver:s3({dbName:o3,storeName:a3})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,nn(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ho={exports:{}};(function(){let i;function e(){}i=e,i.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,s){this[t]=String(s)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Wc<"u"&&Wc.localStorage?Ho.exports=Wc.localStorage:typeof window<"u"&&window.localStorage?Ho.exports=window.localStorage:Ho.exports=new e})();function u3(i){var e;return[i[0],Is((e=i[1])!=null?e:"")]}let h3=class{constructor(){this.localStorage=Ho.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(u3)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Is(t)}async setItem(e,t){this.localStorage.setItem(e,nn(t))}async removeItem(e){this.localStorage.removeItem(e)}};const f3="wc_storage_version",Cl=1,l3=async(i,e,t)=>{const s=f3,o=await e.getItem(s);if(o&&o>=Cl){t(e);return}const c=await i.getKeys();if(!c.length){t(e);return}const l=[];for(;c.length;){const d=c.shift();if(!d)continue;const y=d.toLowerCase();if(y.includes("wc@")||y.includes("walletconnect")||y.includes("wc_")||y.includes("wallet_connect")){const g=await i.getItem(d);await e.setItem(d,g),l.push(d)}}await e.setItem(s,Cl),t(e),d3(i,l)},d3=async(i,e)=>{e.length&&e.forEach(async t=>{await i.removeItem(t)})};let p3=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new h3;this.storage=e;try{const t=new c3;l3(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Ln={},as={},Gc={},cs={};class an{}const g3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:an},Symbol.toStringTag,{value:"Module"})),y3=Qd(g3);var Tl;function m3(){if(Tl)return cs;Tl=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.IHeartBeat=void 0;const i=y3;class e extends i.IEvents{constructor(s){super()}}return cs.IHeartBeat=e,cs}var Nl;function Pp(){return Nl||(Nl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),wi.__exportStar(m3(),i)}(Gc)),Gc}var Yc={},tn={},Rl;function v3(){if(Rl)return tn;Rl=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.HEARTBEAT_EVENTS=tn.HEARTBEAT_INTERVAL=void 0;const i=pe;return tn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,tn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},tn}var Ul;function Cp(){return Ul||(Ul=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),wi.__exportStar(v3(),i)}(Yc)),Yc}var Fl;function _3(){if(Fl)return as;Fl=1,Object.defineProperty(as,"__esModule",{value:!0}),as.HeartBeat=void 0;const i=wi,e=Or,t=pe,s=Pp(),o=Cp();class c extends s.IHeartBeat{constructor(d){super(d),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(d==null?void 0:d.interval)||o.HEARTBEAT_INTERVAL}static init(d){return i.__awaiter(this,void 0,void 0,function*(){const y=new c(d);return yield y.init(),y})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(d,y){this.events.on(d,y)}once(d,y){this.events.once(d,y)}off(d,y){this.events.off(d,y)}removeListener(d,y){this.events.removeListener(d,y)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return as.HeartBeat=c,as}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=wi;e.__exportStar(_3(),i),e.__exportStar(Pp(),i),e.__exportStar(Cp(),i)})(Ln);function b3(i){try{return JSON.stringify(i)}catch{return'"[Circular]"'}}var w3=E3;function E3(i,e,t){var s=t&&t.stringify||b3,o=1;if(typeof i=="object"&&i!==null){var c=e.length+o;if(c===1)return i;var l=new Array(c);l[0]=s(i);for(var d=1;d<c;d++)l[d]=s(e[d]);return l.join(" ")}if(typeof i!="string")return i;var y=e.length;if(y===0)return i;for(var g="",_=1-o,O=-1,T=i&&i.length||0,C=0;C<T;){if(i.charCodeAt(C)===37&&C+1<T){switch(O=O>-1?O:0,i.charCodeAt(C+1)){case 100:case 102:if(_>=y||e[_]==null)break;O<C&&(g+=i.slice(O,C)),g+=Number(e[_]),O=C+2,C++;break;case 105:if(_>=y||e[_]==null)break;O<C&&(g+=i.slice(O,C)),g+=Math.floor(Number(e[_])),O=C+2,C++;break;case 79:case 111:case 106:if(_>=y||e[_]===void 0)break;O<C&&(g+=i.slice(O,C));var P=typeof e[_];if(P==="string"){g+="'"+e[_]+"'",O=C+2,C++;break}if(P==="function"){g+=e[_].name||"<anonymous>",O=C+2,C++;break}g+=s(e[_]),O=C+2,C++;break;case 115:if(_>=y)break;O<C&&(g+=i.slice(O,C)),g+=String(e[_]),O=C+2,C++;break;case 37:O<C&&(g+=i.slice(O,C)),g+="%",O=C+2,C++,_--;break}++_}++C}return O===-1?i:(O<T&&(g+=i.slice(O)),g)}const $l=w3;var D3=si;const _s=R3().console||{},S3={mapHttpRequest:jo,mapHttpResponse:jo,wrapRequestSerializer:Jc,wrapResponseSerializer:Jc,wrapErrorSerializer:Jc,req:jo,res:jo,err:P3};function I3(i,e){return Array.isArray(i)?i.filter(function(s){return s!=="!stdSerializers.err"}):i===!0?Object.keys(e):!1}function si(i){i=i||{},i.browser=i.browser||{};const e=i.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const t=i.browser.write||_s;i.browser.write&&(i.browser.asObject=!0);const s=i.serializers||{},o=I3(i.browser.serialize,s);let c=i.browser.serialize;Array.isArray(i.browser.serialize)&&i.browser.serialize.indexOf("!stdSerializers.err")>-1&&(c=!1);const l=["error","fatal","warn","info","debug","trace"];typeof t=="function"&&(t.error=t.fatal=t.warn=t.info=t.debug=t.trace=t),i.enabled===!1&&(i.level="silent");const d=i.level||"info",y=Object.create(t);y.log||(y.log=bs),Object.defineProperty(y,"levelVal",{get:_}),Object.defineProperty(y,"level",{get:O,set:T});const g={transmit:e,serialize:o,asObject:i.browser.asObject,levels:l,timestamp:C3(i)};y.levels=si.levels,y.level=d,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=bs,y.serializers=s,y._serialize=o,y._stdErrSerialize=c,y.child=C,e&&(y._logEvent=_u());function _(){return this.level==="silent"?1/0:this.levels.values[this.level]}function O(){return this._level}function T(P){if(P!=="silent"&&!this.levels.values[P])throw Error("unknown level "+P);this._level=P,Tn(g,y,"error","log"),Tn(g,y,"fatal","error"),Tn(g,y,"warn","error"),Tn(g,y,"info","log"),Tn(g,y,"debug","log"),Tn(g,y,"trace","log")}function C(P,H){if(!P)throw new Error("missing bindings for child Pino");H=H||{},o&&P.serializers&&(H.serializers=P.serializers);const L=H.serializers;if(o&&L){var Y=Object.assign({},s,L),p=i.browser.serialize===!0?Object.keys(Y):o;delete P.serializers,ua([P],p,Y,this._stdErrSerialize)}function w(v){this._childLevel=(v._childLevel|0)+1,this.error=Nn(v,P,"error"),this.fatal=Nn(v,P,"fatal"),this.warn=Nn(v,P,"warn"),this.info=Nn(v,P,"info"),this.debug=Nn(v,P,"debug"),this.trace=Nn(v,P,"trace"),Y&&(this.serializers=Y,this._serialize=p),e&&(this._logEvent=_u([].concat(v._logEvent.bindings,P)))}return w.prototype=this,new w(this)}return y}si.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};si.stdSerializers=S3;si.stdTimeFunctions=Object.assign({},{nullTime:Tp,epochTime:Np,unixTime:T3,isoTime:N3});function Tn(i,e,t,s){const o=Object.getPrototypeOf(e);e[t]=e.levelVal>e.levels.values[t]?bs:o[t]?o[t]:_s[t]||_s[s]||bs,O3(i,e,t)}function O3(i,e,t){!i.transmit&&e[t]===bs||(e[t]=function(s){return function(){const c=i.timestamp(),l=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_s?_s:this;for(var y=0;y<l.length;y++)l[y]=arguments[y];if(i.serialize&&!i.asObject&&ua(l,this._serialize,this.serializers,this._stdErrSerialize),i.asObject?s.call(d,x3(this,t,l,c)):s.apply(d,l),i.transmit){const g=i.transmit.level||e.level,_=si.levels.values[g],O=si.levels.values[t];if(O<_)return;A3(this,{ts:c,methodLevel:t,methodValue:O,transmitLevel:g,transmitValue:si.levels.values[i.transmit.level||e.level],send:i.transmit.send,val:e.levelVal},l)}}}(e[t]))}function x3(i,e,t,s){i._serialize&&ua(t,i._serialize,i.serializers,i._stdErrSerialize);const o=t.slice();let c=o[0];const l={};s&&(l.time=s),l.level=si.levels.values[e];let d=(i._childLevel|0)+1;if(d<1&&(d=1),c!==null&&typeof c=="object"){for(;d--&&typeof o[0]=="object";)Object.assign(l,o.shift());c=o.length?$l(o.shift(),o):void 0}else typeof c=="string"&&(c=$l(o.shift(),o));return c!==void 0&&(l.msg=c),l}function ua(i,e,t,s){for(const o in i)if(s&&i[o]instanceof Error)i[o]=si.stdSerializers.err(i[o]);else if(typeof i[o]=="object"&&!Array.isArray(i[o]))for(const c in i[o])e&&e.indexOf(c)>-1&&c in t&&(i[o][c]=t[c](i[o][c]))}function Nn(i,e,t){return function(){const s=new Array(1+arguments.length);s[0]=e;for(var o=1;o<s.length;o++)s[o]=arguments[o-1];return i[t].apply(this,s)}}function A3(i,e,t){const s=e.send,o=e.ts,c=e.methodLevel,l=e.methodValue,d=e.val,y=i._logEvent.bindings;ua(t,i._serialize||Object.keys(i.serializers),i.serializers,i._stdErrSerialize===void 0?!0:i._stdErrSerialize),i._logEvent.ts=o,i._logEvent.messages=t.filter(function(g){return y.indexOf(g)===-1}),i._logEvent.level.label=c,i._logEvent.level.value=l,s(c,i._logEvent,d),i._logEvent=_u(y)}function _u(i){return{ts:0,messages:[],bindings:i||[],level:{label:"",value:0}}}function P3(i){const e={type:i.constructor.name,msg:i.message,stack:i.stack};for(const t in i)e[t]===void 0&&(e[t]=i[t]);return e}function C3(i){return typeof i.timestamp=="function"?i.timestamp:i.timestamp===!1?Tp:Np}function jo(){return{}}function Jc(i){return i}function bs(){}function Tp(){return!1}function Np(){return Date.now()}function T3(){return Math.round(Date.now()/1e3)}function N3(){return new Date(Date.now()).toISOString()}function R3(){function i(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return i(self)||i(window)||i(this)||{}}}const ha=ta(D3),U3={level:"info"},Os="custom_context";var F3=Object.defineProperty,$3=Object.defineProperties,j3=Object.getOwnPropertyDescriptors,jl=Object.getOwnPropertySymbols,L3=Object.prototype.hasOwnProperty,M3=Object.prototype.propertyIsEnumerable,Ll=(i,e,t)=>e in i?F3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,q3=(i,e)=>{for(var t in e||(e={}))L3.call(e,t)&&Ll(i,t,e[t]);if(jl)for(var t of jl(e))M3.call(e,t)&&Ll(i,t,e[t]);return i},B3=(i,e)=>$3(i,j3(e));function fa(i){return B3(q3({},i),{level:(i==null?void 0:i.level)||U3.level})}function z3(i,e=Os){return i[e]||""}function H3(i,e,t=Os){return i[t]=e,i}function _r(i,e=Os){let t="";return typeof i.bindings>"u"?t=z3(i,e):t=i.bindings().context||"",t}function K3(i,e,t=Os){const s=_r(i,t);return s.trim()?`${s}/${e}`:e}function Ar(i,e,t=Os){const s=K3(i,e,t),o=i.child({context:s});return H3(o,s,t)}let V3=class extends an{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}};class k3 extends an{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class W3{constructor(e,t){this.logger=e,this.core=t}}let G3=class extends an{constructor(e,t){super(),this.relayer=e,this.logger=t}},Y3=class extends an{constructor(e){super()}},J3=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}},Q3=class extends an{constructor(e,t){super(),this.relayer=e,this.logger=t}},X3=class extends an{constructor(e,t){super(),this.core=e,this.logger=t}},Z3=class{constructor(e,t){this.projectId=e,this.logger=t}},eD=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},tD=class{constructor(e){this.client=e}};var Hu={},Rp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=$e,t=xr;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function d(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},d.prototype.update=function(y,g){if(g===void 0&&(g=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var _=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&g>0;)this._buffer[this._bufferLength++]=y[_++],g--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(_=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,_,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=y[_++],g--;return this},d.prototype.finish=function(y){if(!this._finished){var g=this._bytesHashed,_=this._bufferLength,O=g/536870912|0,T=g<<3,C=g%128<112?128:256;this._buffer[_]=128;for(var P=_+1;P<C-8;P++)this._buffer[P]=0;e.writeUint32BE(O,this._buffer,C-8),e.writeUint32BE(T,this._buffer,C-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,C),this._finished=!0}for(var P=0;P<this.digestLength/8;P++)e.writeUint32BE(this._stateHi[P],y,P*8),e.writeUint32BE(this._stateLo[P],y,P*8+4);return this},d.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(y){t.wipe(y.stateHi),t.wipe(y.stateLo),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},d}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(d,y,g,_,O,T,C){for(var P=g[0],H=g[1],L=g[2],Y=g[3],p=g[4],w=g[5],v=g[6],b=g[7],D=_[0],u=_[1],E=_[2],k=_[3],ne=_[4],ue=_[5],ye=_[6],me=_[7],A,U,ee,X,V,W,te,ie;C>=128;){for(var De=0;De<16;De++){var oe=8*De+T;d[De]=e.readUint32BE(O,oe),y[De]=e.readUint32BE(O,oe+4)}for(var De=0;De<80;De++){var Se=P,fe=H,Ce=L,z=Y,B=p,$=w,f=v,R=b,se=D,he=u,Ee=E,ze=k,Ve=ne,je=ue,pt=ye,gt=me;if(A=b,U=me,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=(p>>>14|ne<<32-14)^(p>>>18|ne<<32-18)^(ne>>>41-32|p<<32-(41-32)),U=(ne>>>14|p<<32-14)^(ne>>>18|p<<32-18)^(p>>>41-32|ne<<32-(41-32)),V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,A=p&w^~p&v,U=ne&ue^~ne&ye,V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,A=o[De*2],U=o[De*2+1],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,A=d[De%16],U=y[De%16],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,ee=te&65535|ie<<16,X=V&65535|W<<16,A=ee,U=X,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=(P>>>28|D<<32-28)^(D>>>34-32|P<<32-(34-32))^(D>>>39-32|P<<32-(39-32)),U=(D>>>28|P<<32-28)^(P>>>34-32|D<<32-(34-32))^(P>>>39-32|D<<32-(39-32)),V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,A=P&H^P&L^H&L,U=D&u^D&E^u&E,V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,R=te&65535|ie<<16,gt=V&65535|W<<16,A=z,U=ze,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=ee,U=X,V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,z=te&65535|ie<<16,ze=V&65535|W<<16,H=Se,L=fe,Y=Ce,p=z,w=B,v=$,b=f,P=R,u=se,E=he,k=Ee,ne=ze,ue=Ve,ye=je,me=pt,D=gt,De%16===15)for(var oe=0;oe<16;oe++)A=d[oe],U=y[oe],V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=d[(oe+9)%16],U=y[(oe+9)%16],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,ee=d[(oe+1)%16],X=y[(oe+1)%16],A=(ee>>>1|X<<32-1)^(ee>>>8|X<<32-8)^ee>>>7,U=(X>>>1|ee<<32-1)^(X>>>8|ee<<32-8)^(X>>>7|ee<<32-7),V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,ee=d[(oe+14)%16],X=y[(oe+14)%16],A=(ee>>>19|X<<32-19)^(X>>>61-32|ee<<32-(61-32))^ee>>>6,U=(X>>>19|ee<<32-19)^(ee>>>61-32|X<<32-(61-32))^(X>>>6|ee<<32-6),V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,d[oe]=te&65535|ie<<16,y[oe]=V&65535|W<<16}A=P,U=D,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=g[0],U=_[0],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,g[0]=P=te&65535|ie<<16,_[0]=D=V&65535|W<<16,A=H,U=u,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=g[1],U=_[1],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,g[1]=H=te&65535|ie<<16,_[1]=u=V&65535|W<<16,A=L,U=E,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=g[2],U=_[2],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,g[2]=L=te&65535|ie<<16,_[2]=E=V&65535|W<<16,A=Y,U=k,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=g[3],U=_[3],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,g[3]=Y=te&65535|ie<<16,_[3]=k=V&65535|W<<16,A=p,U=ne,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=g[4],U=_[4],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,g[4]=p=te&65535|ie<<16,_[4]=ne=V&65535|W<<16,A=w,U=ue,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=g[5],U=_[5],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,g[5]=w=te&65535|ie<<16,_[5]=ue=V&65535|W<<16,A=v,U=ye,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=g[6],U=_[6],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,g[6]=v=te&65535|ie<<16,_[6]=ye=V&65535|W<<16,A=b,U=me,V=U&65535,W=U>>>16,te=A&65535,ie=A>>>16,A=g[7],U=_[7],V+=U&65535,W+=U>>>16,te+=A&65535,ie+=A>>>16,W+=V>>>16,te+=W>>>16,ie+=te>>>16,g[7]=b=te&65535|ie<<16,_[7]=me=V&65535|W<<16,T+=128,C-=128}return T}function l(d){var y=new s;y.update(d);var g=y.digest();return y.clean(),g}i.hash=l})(Rp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=$n,t=Rp,s=xr;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(z){const B=new Float64Array(16);if(z)for(let $=0;$<z.length;$++)B[$]=z[$];return B}const c=new Uint8Array(32);c[0]=9;const l=o(),d=o([1]),y=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),T=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function C(z,B){for(let $=0;$<16;$++)z[$]=B[$]|0}function P(z){let B=1;for(let $=0;$<16;$++){let f=z[$]+B+65535;B=Math.floor(f/65536),z[$]=f-B*65536}z[0]+=B-1+37*(B-1)}function H(z,B,$){const f=~($-1);for(let R=0;R<16;R++){const se=f&(z[R]^B[R]);z[R]^=se,B[R]^=se}}function L(z,B){const $=o(),f=o();for(let R=0;R<16;R++)f[R]=B[R];P(f),P(f),P(f);for(let R=0;R<2;R++){$[0]=f[0]-65517;for(let he=1;he<15;he++)$[he]=f[he]-65535-($[he-1]>>16&1),$[he-1]&=65535;$[15]=f[15]-32767-($[14]>>16&1);const se=$[15]>>16&1;$[14]&=65535,H(f,$,1-se)}for(let R=0;R<16;R++)z[2*R]=f[R]&255,z[2*R+1]=f[R]>>8}function Y(z,B){let $=0;for(let f=0;f<32;f++)$|=z[f]^B[f];return(1&$-1>>>8)-1}function p(z,B){const $=new Uint8Array(32),f=new Uint8Array(32);return L($,z),L(f,B),Y($,f)}function w(z){const B=new Uint8Array(32);return L(B,z),B[0]&1}function v(z,B){for(let $=0;$<16;$++)z[$]=B[2*$]+(B[2*$+1]<<8);z[15]&=32767}function b(z,B,$){for(let f=0;f<16;f++)z[f]=B[f]+$[f]}function D(z,B,$){for(let f=0;f<16;f++)z[f]=B[f]-$[f]}function u(z,B,$){let f,R,se=0,he=0,Ee=0,ze=0,Ve=0,je=0,pt=0,gt=0,Me=0,Ie=0,Re=0,Ue=0,qe=0,xe=0,Fe=0,we=0,Ae=0,He=0,Oe=0,ke=0,Ge=0,Ze=0,et=0,Je=0,tr=0,hr=0,Jr=0,rr=0,oi=0,Ei=0,Mi=0,wt=$[0],yt=$[1],Et=$[2],Dt=$[3],_t=$[4],mt=$[5],Ut=$[6],Ft=$[7],St=$[8],$t=$[9],It=$[10],Pt=$[11],Ot=$[12],ft=$[13],jt=$[14],Lt=$[15];f=B[0],se+=f*wt,he+=f*yt,Ee+=f*Et,ze+=f*Dt,Ve+=f*_t,je+=f*mt,pt+=f*Ut,gt+=f*Ft,Me+=f*St,Ie+=f*$t,Re+=f*It,Ue+=f*Pt,qe+=f*Ot,xe+=f*ft,Fe+=f*jt,we+=f*Lt,f=B[1],he+=f*wt,Ee+=f*yt,ze+=f*Et,Ve+=f*Dt,je+=f*_t,pt+=f*mt,gt+=f*Ut,Me+=f*Ft,Ie+=f*St,Re+=f*$t,Ue+=f*It,qe+=f*Pt,xe+=f*Ot,Fe+=f*ft,we+=f*jt,Ae+=f*Lt,f=B[2],Ee+=f*wt,ze+=f*yt,Ve+=f*Et,je+=f*Dt,pt+=f*_t,gt+=f*mt,Me+=f*Ut,Ie+=f*Ft,Re+=f*St,Ue+=f*$t,qe+=f*It,xe+=f*Pt,Fe+=f*Ot,we+=f*ft,Ae+=f*jt,He+=f*Lt,f=B[3],ze+=f*wt,Ve+=f*yt,je+=f*Et,pt+=f*Dt,gt+=f*_t,Me+=f*mt,Ie+=f*Ut,Re+=f*Ft,Ue+=f*St,qe+=f*$t,xe+=f*It,Fe+=f*Pt,we+=f*Ot,Ae+=f*ft,He+=f*jt,Oe+=f*Lt,f=B[4],Ve+=f*wt,je+=f*yt,pt+=f*Et,gt+=f*Dt,Me+=f*_t,Ie+=f*mt,Re+=f*Ut,Ue+=f*Ft,qe+=f*St,xe+=f*$t,Fe+=f*It,we+=f*Pt,Ae+=f*Ot,He+=f*ft,Oe+=f*jt,ke+=f*Lt,f=B[5],je+=f*wt,pt+=f*yt,gt+=f*Et,Me+=f*Dt,Ie+=f*_t,Re+=f*mt,Ue+=f*Ut,qe+=f*Ft,xe+=f*St,Fe+=f*$t,we+=f*It,Ae+=f*Pt,He+=f*Ot,Oe+=f*ft,ke+=f*jt,Ge+=f*Lt,f=B[6],pt+=f*wt,gt+=f*yt,Me+=f*Et,Ie+=f*Dt,Re+=f*_t,Ue+=f*mt,qe+=f*Ut,xe+=f*Ft,Fe+=f*St,we+=f*$t,Ae+=f*It,He+=f*Pt,Oe+=f*Ot,ke+=f*ft,Ge+=f*jt,Ze+=f*Lt,f=B[7],gt+=f*wt,Me+=f*yt,Ie+=f*Et,Re+=f*Dt,Ue+=f*_t,qe+=f*mt,xe+=f*Ut,Fe+=f*Ft,we+=f*St,Ae+=f*$t,He+=f*It,Oe+=f*Pt,ke+=f*Ot,Ge+=f*ft,Ze+=f*jt,et+=f*Lt,f=B[8],Me+=f*wt,Ie+=f*yt,Re+=f*Et,Ue+=f*Dt,qe+=f*_t,xe+=f*mt,Fe+=f*Ut,we+=f*Ft,Ae+=f*St,He+=f*$t,Oe+=f*It,ke+=f*Pt,Ge+=f*Ot,Ze+=f*ft,et+=f*jt,Je+=f*Lt,f=B[9],Ie+=f*wt,Re+=f*yt,Ue+=f*Et,qe+=f*Dt,xe+=f*_t,Fe+=f*mt,we+=f*Ut,Ae+=f*Ft,He+=f*St,Oe+=f*$t,ke+=f*It,Ge+=f*Pt,Ze+=f*Ot,et+=f*ft,Je+=f*jt,tr+=f*Lt,f=B[10],Re+=f*wt,Ue+=f*yt,qe+=f*Et,xe+=f*Dt,Fe+=f*_t,we+=f*mt,Ae+=f*Ut,He+=f*Ft,Oe+=f*St,ke+=f*$t,Ge+=f*It,Ze+=f*Pt,et+=f*Ot,Je+=f*ft,tr+=f*jt,hr+=f*Lt,f=B[11],Ue+=f*wt,qe+=f*yt,xe+=f*Et,Fe+=f*Dt,we+=f*_t,Ae+=f*mt,He+=f*Ut,Oe+=f*Ft,ke+=f*St,Ge+=f*$t,Ze+=f*It,et+=f*Pt,Je+=f*Ot,tr+=f*ft,hr+=f*jt,Jr+=f*Lt,f=B[12],qe+=f*wt,xe+=f*yt,Fe+=f*Et,we+=f*Dt,Ae+=f*_t,He+=f*mt,Oe+=f*Ut,ke+=f*Ft,Ge+=f*St,Ze+=f*$t,et+=f*It,Je+=f*Pt,tr+=f*Ot,hr+=f*ft,Jr+=f*jt,rr+=f*Lt,f=B[13],xe+=f*wt,Fe+=f*yt,we+=f*Et,Ae+=f*Dt,He+=f*_t,Oe+=f*mt,ke+=f*Ut,Ge+=f*Ft,Ze+=f*St,et+=f*$t,Je+=f*It,tr+=f*Pt,hr+=f*Ot,Jr+=f*ft,rr+=f*jt,oi+=f*Lt,f=B[14],Fe+=f*wt,we+=f*yt,Ae+=f*Et,He+=f*Dt,Oe+=f*_t,ke+=f*mt,Ge+=f*Ut,Ze+=f*Ft,et+=f*St,Je+=f*$t,tr+=f*It,hr+=f*Pt,Jr+=f*Ot,rr+=f*ft,oi+=f*jt,Ei+=f*Lt,f=B[15],we+=f*wt,Ae+=f*yt,He+=f*Et,Oe+=f*Dt,ke+=f*_t,Ge+=f*mt,Ze+=f*Ut,et+=f*Ft,Je+=f*St,tr+=f*$t,hr+=f*It,Jr+=f*Pt,rr+=f*Ot,oi+=f*ft,Ei+=f*jt,Mi+=f*Lt,se+=38*Ae,he+=38*He,Ee+=38*Oe,ze+=38*ke,Ve+=38*Ge,je+=38*Ze,pt+=38*et,gt+=38*Je,Me+=38*tr,Ie+=38*hr,Re+=38*Jr,Ue+=38*rr,qe+=38*oi,xe+=38*Ei,Fe+=38*Mi,R=1,f=se+R+65535,R=Math.floor(f/65536),se=f-R*65536,f=he+R+65535,R=Math.floor(f/65536),he=f-R*65536,f=Ee+R+65535,R=Math.floor(f/65536),Ee=f-R*65536,f=ze+R+65535,R=Math.floor(f/65536),ze=f-R*65536,f=Ve+R+65535,R=Math.floor(f/65536),Ve=f-R*65536,f=je+R+65535,R=Math.floor(f/65536),je=f-R*65536,f=pt+R+65535,R=Math.floor(f/65536),pt=f-R*65536,f=gt+R+65535,R=Math.floor(f/65536),gt=f-R*65536,f=Me+R+65535,R=Math.floor(f/65536),Me=f-R*65536,f=Ie+R+65535,R=Math.floor(f/65536),Ie=f-R*65536,f=Re+R+65535,R=Math.floor(f/65536),Re=f-R*65536,f=Ue+R+65535,R=Math.floor(f/65536),Ue=f-R*65536,f=qe+R+65535,R=Math.floor(f/65536),qe=f-R*65536,f=xe+R+65535,R=Math.floor(f/65536),xe=f-R*65536,f=Fe+R+65535,R=Math.floor(f/65536),Fe=f-R*65536,f=we+R+65535,R=Math.floor(f/65536),we=f-R*65536,se+=R-1+37*(R-1),R=1,f=se+R+65535,R=Math.floor(f/65536),se=f-R*65536,f=he+R+65535,R=Math.floor(f/65536),he=f-R*65536,f=Ee+R+65535,R=Math.floor(f/65536),Ee=f-R*65536,f=ze+R+65535,R=Math.floor(f/65536),ze=f-R*65536,f=Ve+R+65535,R=Math.floor(f/65536),Ve=f-R*65536,f=je+R+65535,R=Math.floor(f/65536),je=f-R*65536,f=pt+R+65535,R=Math.floor(f/65536),pt=f-R*65536,f=gt+R+65535,R=Math.floor(f/65536),gt=f-R*65536,f=Me+R+65535,R=Math.floor(f/65536),Me=f-R*65536,f=Ie+R+65535,R=Math.floor(f/65536),Ie=f-R*65536,f=Re+R+65535,R=Math.floor(f/65536),Re=f-R*65536,f=Ue+R+65535,R=Math.floor(f/65536),Ue=f-R*65536,f=qe+R+65535,R=Math.floor(f/65536),qe=f-R*65536,f=xe+R+65535,R=Math.floor(f/65536),xe=f-R*65536,f=Fe+R+65535,R=Math.floor(f/65536),Fe=f-R*65536,f=we+R+65535,R=Math.floor(f/65536),we=f-R*65536,se+=R-1+37*(R-1),z[0]=se,z[1]=he,z[2]=Ee,z[3]=ze,z[4]=Ve,z[5]=je,z[6]=pt,z[7]=gt,z[8]=Me,z[9]=Ie,z[10]=Re,z[11]=Ue,z[12]=qe,z[13]=xe,z[14]=Fe,z[15]=we}function E(z,B){u(z,B,B)}function k(z,B){const $=o();let f;for(f=0;f<16;f++)$[f]=B[f];for(f=253;f>=0;f--)E($,$),f!==2&&f!==4&&u($,$,B);for(f=0;f<16;f++)z[f]=$[f]}function ne(z,B){const $=o();let f;for(f=0;f<16;f++)$[f]=B[f];for(f=250;f>=0;f--)E($,$),f!==1&&u($,$,B);for(f=0;f<16;f++)z[f]=$[f]}function ue(z,B){const $=o(),f=o(),R=o(),se=o(),he=o(),Ee=o(),ze=o(),Ve=o(),je=o();D($,z[1],z[0]),D(je,B[1],B[0]),u($,$,je),b(f,z[0],z[1]),b(je,B[0],B[1]),u(f,f,je),u(R,z[3],B[3]),u(R,R,g),u(se,z[2],B[2]),b(se,se,se),D(he,f,$),D(Ee,se,R),b(ze,se,R),b(Ve,f,$),u(z[0],he,Ee),u(z[1],Ve,ze),u(z[2],ze,Ee),u(z[3],he,Ve)}function ye(z,B,$){for(let f=0;f<4;f++)H(z[f],B[f],$)}function me(z,B){const $=o(),f=o(),R=o();k(R,B[2]),u($,B[0],R),u(f,B[1],R),L(z,f),z[31]^=w($)<<7}function A(z,B,$){C(z[0],l),C(z[1],d),C(z[2],d),C(z[3],l);for(let f=255;f>=0;--f){const R=$[f/8|0]>>(f&7)&1;ye(z,B,R),ue(B,z),ue(z,z),ye(z,B,R)}}function U(z,B){const $=[o(),o(),o(),o()];C($[0],_),C($[1],O),C($[2],d),u($[3],_,O),A(z,$,B)}function ee(z){if(z.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const B=(0,t.hash)(z);B[0]&=248,B[31]&=127,B[31]|=64;const $=new Uint8Array(32),f=[o(),o(),o(),o()];U(f,B),me($,f);const R=new Uint8Array(64);return R.set(z),R.set($,32),{publicKey:$,secretKey:R}}i.generateKeyPairFromSeed=ee;function X(z){const B=(0,e.randomBytes)(32,z),$=ee(B);return(0,s.wipe)(B),$}i.generateKeyPair=X;function V(z){if(z.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(z.subarray(32))}i.extractPublicKeyFromSecretKey=V;const W=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function te(z,B){let $,f,R,se;for(f=63;f>=32;--f){for($=0,R=f-32,se=f-12;R<se;++R)B[R]+=$-16*B[f]*W[R-(f-32)],$=Math.floor((B[R]+128)/256),B[R]-=$*256;B[R]+=$,B[f]=0}for($=0,R=0;R<32;R++)B[R]+=$-(B[31]>>4)*W[R],$=B[R]>>8,B[R]&=255;for(R=0;R<32;R++)B[R]-=$*W[R];for(f=0;f<32;f++)B[f+1]+=B[f]>>8,z[f]=B[f]&255}function ie(z){const B=new Float64Array(64);for(let $=0;$<64;$++)B[$]=z[$];for(let $=0;$<64;$++)z[$]=0;te(z,B)}function De(z,B){const $=new Float64Array(64),f=[o(),o(),o(),o()],R=(0,t.hash)(z.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const se=new Uint8Array(64);se.set(R.subarray(32),32);const he=new t.SHA512;he.update(se.subarray(32)),he.update(B);const Ee=he.digest();he.clean(),ie(Ee),U(f,Ee),me(se,f),he.reset(),he.update(se.subarray(0,32)),he.update(z.subarray(32)),he.update(B);const ze=he.digest();ie(ze);for(let Ve=0;Ve<32;Ve++)$[Ve]=Ee[Ve];for(let Ve=0;Ve<32;Ve++)for(let je=0;je<32;je++)$[Ve+je]+=ze[Ve]*R[je];return te(se.subarray(32),$),se}i.sign=De;function oe(z,B){const $=o(),f=o(),R=o(),se=o(),he=o(),Ee=o(),ze=o();return C(z[2],d),v(z[1],B),E(R,z[1]),u(se,R,y),D(R,R,z[2]),b(se,z[2],se),E(he,se),E(Ee,he),u(ze,Ee,he),u($,ze,R),u($,$,se),ne($,$),u($,$,R),u($,$,se),u($,$,se),u(z[0],$,se),E(f,z[0]),u(f,f,se),p(f,R)&&u(z[0],z[0],T),E(f,z[0]),u(f,f,se),p(f,R)?-1:(w(z[0])===B[31]>>7&&D(z[0],l,z[0]),u(z[3],z[0],z[1]),0)}function Se(z,B,$){const f=new Uint8Array(32),R=[o(),o(),o(),o()],se=[o(),o(),o(),o()];if($.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(oe(se,z))return!1;const he=new t.SHA512;he.update($.subarray(0,32)),he.update(z),he.update(B);const Ee=he.digest();return ie(Ee),A(R,se,Ee),U(se,$.subarray(32)),ue(R,se),me(f,R),!Y($,f)}i.verify=Se;function fe(z){let B=[o(),o(),o(),o()];if(oe(B,z))throw new Error("Ed25519: invalid public key");let $=o(),f=o(),R=B[1];b($,d,R),D(f,d,R),k(f,f),u($,$,f);let se=new Uint8Array(32);return L(se,$),se}i.convertPublicKeyToX25519=fe;function Ce(z){const B=(0,t.hash)(z.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const $=new Uint8Array(B.subarray(0,32));return(0,s.wipe)(B),$}i.convertSecretKeyToX25519=Ce})(Hu);const rD="EdDSA",iD="JWT",Up=".",Fp="base64url",nD="utf8",sD="utf8",oD=":",aD="did",cD="key",Ml="base58btc",uD="z",hD="K36",fD=32;function Yo(i){return ur(vr(nn(i),nD),Fp)}function $p(i){const e=vr(hD,Ml),t=uD+ur(lu([e,i]),Ml);return[aD,cD,t].join(oD)}function lD(i){return ur(i,Fp)}function dD(i){return vr([Yo(i.header),Yo(i.payload)].join(Up),sD)}function pD(i){return[Yo(i.header),Yo(i.payload),lD(i.signature)].join(Up)}function ql(i=$n.randomBytes(fD)){return Hu.generateKeyPairFromSeed(i)}async function gD(i,e,t,s,o=pe.fromMiliseconds(Date.now())){const c={alg:rD,typ:iD},l=$p(s.publicKey),d=o+t,y={iss:l,sub:i,aud:e,iat:o,exp:d},g=dD({header:c,payload:y}),_=Hu.sign(s.secretKey,g);return pD({header:c,payload:y,signature:_})}var Bl=globalThis&&globalThis.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||Array.prototype.slice.call(e))},yD=function(){function i(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return i}(),mD=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return i}(),vD=function(){function i(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return i}(),_D=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),bD=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),wD=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ED=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,zl=3,DD=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",wD]],Hl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function SD(i){return i?Kl(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new bD:typeof navigator<"u"?Kl(navigator.userAgent):xD()}function ID(i){return i!==""&&DD.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(i);return!!c&&[s,c]},!1)}function Kl(i){var e=ID(i);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new _D;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<zl&&(o=Bl(Bl([],o,!0),AD(zl-o.length),!0)):o=[];var c=o.join("."),l=OD(i),d=ED.exec(i);return d&&d[1]?new vD(t,c,l,d[1]):new yD(t,c,l)}function OD(i){for(var e=0,t=Hl.length;e<t;e++){var s=Hl[e],o=s[0],c=s[1],l=c.exec(i);if(l)return o}return null}function xD(){var i=typeof process<"u"&&process.version;return i?new mD(process.version.slice(1)):null}function AD(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});var jp=Ku.getWindowMetadata=void 0;const Vl=st;function PD(){let i,e;try{i=Vl.getDocumentOrThrow(),e=Vl.getLocationOrThrow()}catch{return null}function t(){const O=i.getElementsByTagName("link"),T=[];for(let C=0;C<O.length;C++){const P=O[C],H=P.getAttribute("rel");if(H&&H.toLowerCase().indexOf("icon")>-1){const L=P.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let Y=e.protocol+"//"+e.host;if(L.indexOf("/")===0)Y+=L;else{const p=e.pathname.split("/");p.pop();const w=p.join("/");Y+=w+"/"+L}T.push(Y)}else if(L.indexOf("//")===0){const Y=e.protocol+L;T.push(Y)}else T.push(L)}}return T}function s(...O){const T=i.getElementsByTagName("meta");for(let C=0;C<T.length;C++){const P=T[C],H=["itemprop","property","name"].map(L=>P.getAttribute(L)).filter(L=>L?O.includes(L):!1);if(H.length&&H){const L=P.getAttribute("content");if(L)return L}}return""}function o(){let O=s("name","og:site_name","og:title","twitter:title");return O||(O=i.title),O}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),d=c(),y=e.origin,g=t();return{description:d,url:y,icons:g,name:l}}jp=Ku.getWindowMetadata=PD;var ws={};(function(i){const e=Mu,t=qu,s=Bu,o=zu,c=p=>p==null,l=Symbol("encodeFragmentIdentifier");function d(p){switch(p.arrayFormat){case"index":return w=>(v,b)=>{const D=v.length;return b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,[_(w,p),"[",D,"]"].join("")]:[...v,[_(w,p),"[",_(D,p),"]=",_(b,p)].join("")]};case"bracket":return w=>(v,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,[_(w,p),"[]"].join("")]:[...v,[_(w,p),"[]=",_(b,p)].join("")];case"colon-list-separator":return w=>(v,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,[_(w,p),":list="].join("")]:[...v,[_(w,p),":list=",_(b,p)].join("")];case"comma":case"separator":case"bracket-separator":{const w=p.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:(D=D===null?"":D,b.length===0?[[_(v,p),w,_(D,p)].join("")]:[[b,_(D,p)].join(p.arrayFormatSeparator)])}default:return w=>(v,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,_(w,p)]:[...v,[_(w,p),"=",_(b,p)].join("")]}}function y(p){let w;switch(p.arrayFormat){case"index":return(v,b,D)=>{if(w=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!w){D[v]=b;return}D[v]===void 0&&(D[v]={}),D[v][w[1]]=b};case"bracket":return(v,b,D)=>{if(w=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!w){D[v]=b;return}if(D[v]===void 0){D[v]=[b];return}D[v]=[].concat(D[v],b)};case"colon-list-separator":return(v,b,D)=>{if(w=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!w){D[v]=b;return}if(D[v]===void 0){D[v]=[b];return}D[v]=[].concat(D[v],b)};case"comma":case"separator":return(v,b,D)=>{const u=typeof b=="string"&&b.includes(p.arrayFormatSeparator),E=typeof b=="string"&&!u&&O(b,p).includes(p.arrayFormatSeparator);b=E?O(b,p):b;const k=u||E?b.split(p.arrayFormatSeparator).map(ne=>O(ne,p)):b===null?b:O(b,p);D[v]=k};case"bracket-separator":return(v,b,D)=>{const u=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!u){D[v]=b&&O(b,p);return}const E=b===null?[]:b.split(p.arrayFormatSeparator).map(k=>O(k,p));if(D[v]===void 0){D[v]=E;return}D[v]=[].concat(D[v],E)};default:return(v,b,D)=>{if(D[v]===void 0){D[v]=b;return}D[v]=[].concat(D[v],b)}}}function g(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(p,w){return w.encode?w.strict?e(p):encodeURIComponent(p):p}function O(p,w){return w.decode?t(p):p}function T(p){return Array.isArray(p)?p.sort():typeof p=="object"?T(Object.keys(p)).sort((w,v)=>Number(w)-Number(v)).map(w=>p[w]):p}function C(p){const w=p.indexOf("#");return w!==-1&&(p=p.slice(0,w)),p}function P(p){let w="";const v=p.indexOf("#");return v!==-1&&(w=p.slice(v)),w}function H(p){p=C(p);const w=p.indexOf("?");return w===-1?"":p.slice(w+1)}function L(p,w){return w.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):w.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function Y(p,w){w=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},w),g(w.arrayFormatSeparator);const v=y(w),b=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return b;for(const D of p.split("&")){if(D==="")continue;let[u,E]=s(w.decode?D.replace(/\+/g," "):D,"=");E=E===void 0?null:["comma","separator","bracket-separator"].includes(w.arrayFormat)?E:O(E,w),v(O(u,w),E,b)}for(const D of Object.keys(b)){const u=b[D];if(typeof u=="object"&&u!==null)for(const E of Object.keys(u))u[E]=L(u[E],w);else b[D]=L(u,w)}return w.sort===!1?b:(w.sort===!0?Object.keys(b).sort():Object.keys(b).sort(w.sort)).reduce((D,u)=>{const E=b[u];return E&&typeof E=="object"&&!Array.isArray(E)?D[u]=T(E):D[u]=E,D},Object.create(null))}i.extract=H,i.parse=Y,i.stringify=(p,w)=>{if(!p)return"";w=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},w),g(w.arrayFormatSeparator);const v=E=>w.skipNull&&c(p[E])||w.skipEmptyString&&p[E]==="",b=d(w),D={};for(const E of Object.keys(p))v(E)||(D[E]=p[E]);const u=Object.keys(D);return w.sort!==!1&&u.sort(w.sort),u.map(E=>{const k=p[E];return k===void 0?"":k===null?_(E,w):Array.isArray(k)?k.length===0&&w.arrayFormat==="bracket-separator"?_(E,w)+"[]":k.reduce(b(E),[]).join("&"):_(E,w)+"="+_(k,w)}).filter(E=>E.length>0).join("&")},i.parseUrl=(p,w)=>{w=Object.assign({decode:!0},w);const[v,b]=s(p,"#");return Object.assign({url:v.split("?")[0]||"",query:Y(H(p),w)},w&&w.parseFragmentIdentifier&&b?{fragmentIdentifier:O(b,w)}:{})},i.stringifyUrl=(p,w)=>{w=Object.assign({encode:!0,strict:!0,[l]:!0},w);const v=C(p.url).split("?")[0]||"",b=i.extract(p.url),D=i.parse(b,{sort:!1}),u=Object.assign(D,p.query);let E=i.stringify(u,w);E&&(E=`?${E}`);let k=P(p.url);return p.fragmentIdentifier&&(k=`#${w[l]?_(p.fragmentIdentifier,w):p.fragmentIdentifier}`),`${v}${E}${k}`},i.pick=(p,w,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[l]:!1},v);const{url:b,query:D,fragmentIdentifier:u}=i.parseUrl(p,v);return i.stringifyUrl({url:b,query:o(D,w),fragmentIdentifier:u},v)},i.exclude=(p,w,v)=>{const b=Array.isArray(w)?D=>!w.includes(D):(D,u)=>!w(D,u);return i.pick(p,b,v)}})(ws);function Lp(i,e){return i.includes(":")?[i]:e.chains||[]}const Mp="base10",cr="base16",bu="base64pad",Vu="utf8",qp=0,cn=1,CD=0,kl=1,wu=12,ku=32;function TD(){const i=Fu.generateKeyPair();return{privateKey:ur(i.secretKey,cr),publicKey:ur(i.publicKey,cr)}}function Eu(){const i=$n.randomBytes(ku);return ur(i,cr)}function ND(i,e){const t=Fu.sharedKey(vr(i,cr),vr(e,cr)),s=new zb(aa.SHA256,t).expand(ku);return ur(s,cr)}function RD(i){const e=aa.hash(vr(i,cr));return ur(e,cr)}function Fn(i){const e=aa.hash(vr(i,Vu));return ur(e,cr)}function UD(i){return vr(`${i}`,Mp)}function xs(i){return Number(ur(i,Mp))}function FD(i){const e=UD(typeof i.type<"u"?i.type:qp);if(xs(e)===cn&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof i.senderPublicKey<"u"?vr(i.senderPublicKey,cr):void 0,s=typeof i.iv<"u"?vr(i.iv,cr):$n.randomBytes(wu),o=new Ru.ChaCha20Poly1305(vr(i.symKey,cr)).seal(s,vr(i.message,Vu));return jD({type:e,sealed:o,iv:s,senderPublicKey:t})}function $D(i){const e=new Ru.ChaCha20Poly1305(vr(i.symKey,cr)),{sealed:t,iv:s}=Jo(i.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return ur(o,Vu)}function jD(i){if(xs(i.type)===cn){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ur(lu([i.type,i.senderPublicKey,i.iv,i.sealed]),bu)}return ur(lu([i.type,i.iv,i.sealed]),bu)}function Jo(i){const e=vr(i,bu),t=e.slice(CD,kl),s=kl;if(xs(t)===cn){const d=s+ku,y=d+wu,g=e.slice(s,d),_=e.slice(d,y),O=e.slice(y);return{type:t,sealed:O,iv:_,senderPublicKey:g}}const o=s+wu,c=e.slice(s,o),l=e.slice(o);return{type:t,sealed:l,iv:c}}function LD(i,e){const t=Jo(i);return Bp({type:xs(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?ur(t.senderPublicKey,cr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Bp(i){const e=(i==null?void 0:i.type)||qp;if(e===cn){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function Wl(i){return i.type===cn&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var MD=Object.defineProperty,Gl=Object.getOwnPropertySymbols,qD=Object.prototype.hasOwnProperty,BD=Object.prototype.propertyIsEnumerable,Yl=(i,e,t)=>e in i?MD(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Jl=(i,e)=>{for(var t in e||(e={}))qD.call(e,t)&&Yl(i,t,e[t]);if(Gl)for(var t of Gl(e))BD.call(e,t)&&Yl(i,t,e[t]);return i};const zD="ReactNative",Ui={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},HD="js";function Wu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function zp(){return!Sp()&&!!ju()&&navigator.product===zD}function Gu(){return!Wu()&&!!ju()}function Yu(){return zp()?Ui.reactNative:Wu()?Ui.node:Gu()?Ui.browser:Ui.unknown}function KD(i,e){let t=ws.parse(i);return t=Jl(Jl({},t),e),i=ws.stringify(t),i}function VD(){return jp()||{name:"",description:"",url:"",icons:[""]}}function kD(){if(Yu()===Ui.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const i=SD();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function WD(){var i;const e=Yu();return e===Ui.browser?[e,((i=Ip())==null?void 0:i.host)||"unknown"].join(":"):e}function GD(i,e,t){const s=kD(),o=WD();return[[i,e].join("-"),[HD,t].join("-"),s,o].join("/")}function YD({protocol:i,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:l}){const d=t.split("?"),y=GD(i,e,s),g={auth:o,ua:y,projectId:c,useOnCloseEvent:l||void 0},_=KD(d[1]||"",g);return d[0]+"?"+_}function rn(i,e){return i.filter(t=>e.includes(t)).length===i.length}function Hp(i){return Object.fromEntries(i.entries())}function Kp(i){return new Map(Object.entries(i))}function Rn(i=pe.FIVE_MINUTES,e){const t=pe.toMiliseconds(i||pe.FIVE_MINUTES);let s,o,c;return{resolve:l=>{c&&s&&(clearTimeout(c),s(l))},reject:l=>{c&&o&&(clearTimeout(c),o(l))},done:()=>new Promise((l,d)=>{c=setTimeout(()=>{d(new Error(e))},t),s=l,o=d})}}function Qo(i,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const l=await i;s(l)}catch(l){o(l)}clearTimeout(c)})}function Vp(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function JD(i){return Vp("topic",i)}function QD(i){return Vp("id",i)}function kp(i){const[e,t]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Wr(i,e){return pe.fromMiliseconds((e||Date.now())+pe.toMiliseconds(i))}function Ri(i){return Date.now()>=pe.toMiliseconds(i)}function Bt(i,e){return`${i}${e?`:${e}`:""}`}async function XD({id:i,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${i}&sessionTopic=${e}`,l=Yu();l===Ui.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):l===Ui.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}const ZD="irn";function Du(i){return(i==null?void 0:i.relay)||{protocol:ZD}}function Ko(i){const e=RE[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var e6=Object.defineProperty,Ql=Object.getOwnPropertySymbols,t6=Object.prototype.hasOwnProperty,r6=Object.prototype.propertyIsEnumerable,Xl=(i,e,t)=>e in i?e6(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,i6=(i,e)=>{for(var t in e||(e={}))t6.call(e,t)&&Xl(i,t,e[t]);if(Ql)for(var t of Ql(e))r6.call(e,t)&&Xl(i,t,e[t]);return i};function n6(i,e="-"){const t={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),l=i[o];t[c]=l}}),t}function s6(i){const e=i.indexOf(":"),t=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,t).split("@"),c=typeof t<"u"?i.substring(t):"",l=ws.parse(c);return{protocol:s,topic:o6(o[0]),version:parseInt(o[1],10),symKey:l.symKey,relay:n6(l)}}function o6(i){return i.startsWith("//")?i.substring(2):i}function a6(i,e="-"){const t="relay",s={};return Object.keys(i).forEach(o=>{const c=t+e+o;i[o]&&(s[c]=i[o])}),s}function c6(i){return`${i.protocol}:${i.topic}@${i.version}?`+ws.stringify(i6({symKey:i.symKey},a6(i.relay)))}function Mn(i){const e=[];return i.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function u6(i){const e=[];return Object.values(i).forEach(t=>{e.push(...Mn(t.accounts))}),e}function h6(i,e){const t=[];return Object.values(i).forEach(s=>{Mn(s.accounts).includes(e)&&t.push(...s.methods)}),t}function f6(i,e){const t=[];return Object.values(i).forEach(s=>{Mn(s.accounts).includes(e)&&t.push(...s.events)}),t}function l6(i,e){const t=Vo(i,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(i))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(l=>`${l.split(":")[0]}:${l.split(":")[1]}`)};return s}const d6={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},p6={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(i,e){const{message:t,code:s}=p6[i];return{message:e?`${t} ${e}`:t,code:s}}function Wt(i,e){const{message:t,code:s}=d6[i];return{message:e?`${t} ${e}`:t,code:s}}function As(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function ys(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function ar(i){return typeof i>"u"}function Gt(i,e){return e&&ar(i)?!0:typeof i=="string"&&!!i.trim().length}function Ju(i,e){return e&&ar(i)?!0:typeof i=="number"&&!isNaN(i)}function g6(i,e){const{requiredNamespaces:t}=e,s=Object.keys(i.namespaces),o=Object.keys(t);let c=!0;return rn(o,s)?(s.forEach(l=>{const{accounts:d,methods:y,events:g}=i.namespaces[l],_=Mn(d),O=t[l];(!rn(Lp(l,O),_)||!rn(O.methods,y)||!rn(O.events,g))&&(c=!1)}),c):!1}function Xo(i){return Gt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function y6(i){if(Gt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Xo(t)}}return!1}function m6(i){if(Gt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function v6(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function _6(i){return i==null?void 0:i.topic}function b6(i,e){let t=null;return Gt(i==null?void 0:i.publicKey,!1)||(t=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Zl(i){let e=!0;return As(i)?i.length&&(e=i.every(t=>Gt(t,!1))):e=!1,e}function w6(i,e,t){let s=null;return As(e)&&e.length?e.forEach(o=>{s||Xo(o)||(s=Wt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Xo(i)||(s=Wt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function E6(i,e,t){let s=null;return Object.entries(i).forEach(([o,c])=>{if(s)return;const l=w6(o,Lp(o,c),`${e} ${t}`);l&&(s=l)}),s}function D6(i,e){let t=null;return As(i)?i.forEach(s=>{t||y6(s)||(t=Wt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Wt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function S6(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=D6(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function I6(i,e){let t=null;return Zl(i==null?void 0:i.methods)?Zl(i==null?void 0:i.events)||(t=Wt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Wt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Wp(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=I6(s,`${e}, namespace`);o&&(t=o)}),t}function O6(i,e,t){let s=null;if(i&&ys(i)){const o=Wp(i,e);o&&(s=o);const c=E6(i,e,t);c&&(s=c)}else s=ce("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function Vo(i,e){let t=null;if(i&&ys(i)){const s=Wp(i,e);s&&(t=s);const o=S6(i,e);o&&(t=o)}else t=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Gp(i){return Gt(i.protocol,!0)}function x6(i,e){let t=!1;return e&&!i?t=!0:i&&As(i)&&i.length&&i.forEach(s=>{t=Gp(s)}),t}function A6(i){return typeof i=="number"}function mr(i){return typeof i<"u"&&typeof i!==null}function P6(i){return!(!i||typeof i!="object"||!i.code||!Ju(i.code,!1)||!i.message||!Gt(i.message,!1))}function C6(i){return!(ar(i)||!Gt(i.method,!1))}function T6(i){return!(ar(i)||ar(i.result)&&ar(i.error)||!Ju(i.id,!1)||!Gt(i.jsonrpc,!1))}function N6(i){return!(ar(i)||!Gt(i.name,!1))}function ed(i,e){return!(!Xo(e)||!u6(i).includes(e))}function R6(i,e,t){return Gt(t,!1)?h6(i,e).includes(t):!1}function U6(i,e,t){return Gt(t,!1)?f6(i,e).includes(t):!1}function td(i,e,t){let s=null;const o=F6(i),c=$6(e),l=Object.keys(o),d=Object.keys(c),y=rd(Object.keys(i)),g=rd(Object.keys(e)),_=y.filter(O=>!g.includes(O));return _.length&&(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${_.toString()}
      Received: ${Object.keys(e).toString()}`)),rn(l,d)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${l.toString()}
      Approved: ${d.toString()}`)),Object.keys(e).forEach(O=>{if(!O.includes(":")||s)return;const T=Mn(e[O].accounts);T.includes(O)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${O}
        Required: ${O}
        Approved: ${T.toString()}`))}),l.forEach(O=>{s||(rn(o[O].methods,c[O].methods)?rn(o[O].events,c[O].events)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${O}`)):s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${O}`))}),s}function F6(i){const e={};return Object.keys(i).forEach(t=>{var s;t.includes(":")?e[t]=i[t]:(s=i[t].chains)==null||s.forEach(o=>{e[o]={methods:i[t].methods,events:i[t].events}})}),e}function rd(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function $6(i){const e={};return Object.keys(i).forEach(t=>{if(t.includes(":"))e[t]=i[t];else{const s=Mn(i[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:i[t].accounts.filter(c=>c.includes(`${o}:`)),methods:i[t].methods,events:i[t].events}})}}),e}function j6(i,e){return Ju(i,!1)&&i<=e.max&&i>=e.min}const L6="PARSE_ERROR",M6="INVALID_REQUEST",q6="METHOD_NOT_FOUND",B6="INVALID_PARAMS",Yp="INTERNAL_ERROR",Qu="SERVER_ERROR",z6=[-32700,-32600,-32601,-32602,-32603],ms={[L6]:{code:-32700,message:"Parse error"},[M6]:{code:-32600,message:"Invalid Request"},[q6]:{code:-32601,message:"Method not found"},[B6]:{code:-32602,message:"Invalid params"},[Yp]:{code:-32603,message:"Internal error"},[Qu]:{code:-32e3,message:"Server error"}},Jp=Qu;function H6(i){return z6.includes(i)}function id(i){return Object.keys(ms).includes(i)?ms[i]:ms[Jp]}function K6(i){const e=Object.values(ms).find(t=>t.code===i);return e||ms[Jp]}function Qp(i,e,t){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):i}var Xp={},vi={},nd;function V6(){if(nd)return vi;nd=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.isBrowserCryptoAvailable=vi.getSubtleCrypto=vi.getBrowerCrypto=void 0;function i(){return(Yr===null||Yr===void 0?void 0:Yr.crypto)||(Yr===null||Yr===void 0?void 0:Yr.msCrypto)||{}}vi.getBrowerCrypto=i;function e(){const s=i();return s.subtle||s.webkitSubtle}vi.getSubtleCrypto=e;function t(){return!!i()&&!!e()}return vi.isBrowserCryptoAvailable=t,vi}var _i={},sd;function k6(){if(sd)return _i;sd=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.isBrowser=_i.isNode=_i.isReactNative=void 0;function i(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}_i.isReactNative=i;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}_i.isNode=e;function t(){return!i()&&!e()}return _i.isBrowser=t,_i}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=wi;e.__exportStar(V6(),i),e.__exportStar(k6(),i)})(Xp);function Zp(i=3){const e=Date.now()*Math.pow(10,i),t=Math.floor(Math.random()*Math.pow(10,i));return e+t}function Xu(i=6){return BigInt(Zp(i))}function la(i,e,t){return{id:t||Zp(),jsonrpc:"2.0",method:i,params:e}}function Zu(i,e){return{id:i,jsonrpc:"2.0",result:e}}function da(i,e,t){return{id:i,jsonrpc:"2.0",error:W6(e,t)}}function W6(i,e){return typeof i>"u"?id(Yp):(typeof i=="string"&&(i=Object.assign(Object.assign({},id(Qu)),{message:i})),typeof e<"u"&&(i.data=e),H6(i.code)&&(i=K6(i.code)),i)}class G6{}class Y6 extends G6{constructor(){super()}}class J6 extends Y6{constructor(e){super()}}const Q6="^https?:",X6="^wss?:";function Z6(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function eg(i,e){const t=Z6(i);return typeof t>"u"?!1:new RegExp(e).test(t)}function od(i){return eg(i,Q6)}function ad(i){return eg(i,X6)}function e2(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}function tg(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function eh(i){return tg(i)&&"method"in i}function pa(i){return tg(i)&&(bi(i)||Gr(i))}function bi(i){return"result"in i}function Gr(i){return"error"in i}class ji extends J6{constructor(e){super(e),this.events=new Or.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(la(e.method,e.params||[],e.id||Xu().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Gr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),pa(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const t2=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),r2=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",cd=i=>i.split("?")[0],ud=10,i2=t2();class n2{constructor(e){if(this.url=e,this.events=new Or.EventEmitter,this.registering=!1,!ad(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(nn(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!ad(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=Xp.isReactNative()?void 0:{rejectUnauthorized:!e2(e)},c=new i2(e,[],o);r2()?c.onerror=l=>{const d=l;s(this.emitError(d.error))}:c.on("error",l=>{s(this.emitError(l))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Is(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=da(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Qp(e,cd(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ud&&this.events.setMaxListeners(ud)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${cd(this.url)}`));return this.events.emit("register_error",t),t}}var Zo={exports:{}};Zo.exports;(function(i,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,l=9007199254740991,d="[object Arguments]",y="[object Array]",g="[object AsyncFunction]",_="[object Boolean]",O="[object Date]",T="[object Error]",C="[object Function]",P="[object GeneratorFunction]",H="[object Map]",L="[object Number]",Y="[object Null]",p="[object Object]",w="[object Promise]",v="[object Proxy]",b="[object RegExp]",D="[object Set]",u="[object String]",E="[object Symbol]",k="[object Undefined]",ne="[object WeakMap]",ue="[object ArrayBuffer]",ye="[object DataView]",me="[object Float32Array]",A="[object Float64Array]",U="[object Int8Array]",ee="[object Int16Array]",X="[object Int32Array]",V="[object Uint8Array]",W="[object Uint8ClampedArray]",te="[object Uint16Array]",ie="[object Uint32Array]",De=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,Se=/^(?:0|[1-9]\d*)$/,fe={};fe[me]=fe[A]=fe[U]=fe[ee]=fe[X]=fe[V]=fe[W]=fe[te]=fe[ie]=!0,fe[d]=fe[y]=fe[ue]=fe[_]=fe[ye]=fe[O]=fe[T]=fe[C]=fe[H]=fe[L]=fe[p]=fe[b]=fe[D]=fe[u]=fe[ne]=!1;var Ce=typeof Yr=="object"&&Yr&&Yr.Object===Object&&Yr,z=typeof self=="object"&&self&&self.Object===Object&&self,B=Ce||z||Function("return this")(),$=e&&!e.nodeType&&e,f=$&&!0&&i&&!i.nodeType&&i,R=f&&f.exports===$,se=R&&Ce.process,he=function(){try{return se&&se.binding&&se.binding("util")}catch{}}(),Ee=he&&he.isTypedArray;function ze(x,j){for(var Z=-1,le=x==null?0:x.length,ct=0,Te=[];++Z<le;){var lt=x[Z];j(lt,Z,x)&&(Te[ct++]=lt)}return Te}function Ve(x,j){for(var Z=-1,le=j.length,ct=x.length;++Z<le;)x[ct+Z]=j[Z];return x}function je(x,j){for(var Z=-1,le=x==null?0:x.length;++Z<le;)if(j(x[Z],Z,x))return!0;return!1}function pt(x,j){for(var Z=-1,le=Array(x);++Z<x;)le[Z]=j(Z);return le}function gt(x){return function(j){return x(j)}}function Me(x,j){return x.has(j)}function Ie(x,j){return x==null?void 0:x[j]}function Re(x){var j=-1,Z=Array(x.size);return x.forEach(function(le,ct){Z[++j]=[ct,le]}),Z}function Ue(x,j){return function(Z){return x(j(Z))}}function qe(x){var j=-1,Z=Array(x.size);return x.forEach(function(le){Z[++j]=le}),Z}var xe=Array.prototype,Fe=Function.prototype,we=Object.prototype,Ae=B["__core-js_shared__"],He=Fe.toString,Oe=we.hasOwnProperty,ke=function(){var x=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),Ge=we.toString,Ze=RegExp("^"+He.call(Oe).replace(De,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=R?B.Buffer:void 0,Je=B.Symbol,tr=B.Uint8Array,hr=we.propertyIsEnumerable,Jr=xe.splice,rr=Je?Je.toStringTag:void 0,oi=Object.getOwnPropertySymbols,Ei=et?et.isBuffer:void 0,Mi=Ue(Object.keys,Object),wt=br(B,"DataView"),yt=br(B,"Map"),Et=br(B,"Promise"),Dt=br(B,"Set"),_t=br(B,"WeakMap"),mt=br(Object,"create"),Ut=ci(wt),Ft=ci(yt),St=ci(Et),$t=ci(Dt),It=ci(_t),Pt=Je?Je.prototype:void 0,Ot=Pt?Pt.valueOf:void 0;function ft(x){var j=-1,Z=x==null?0:x.length;for(this.clear();++j<Z;){var le=x[j];this.set(le[0],le[1])}}function jt(){this.__data__=mt?mt(null):{},this.size=0}function Lt(x){var j=this.has(x)&&delete this.__data__[x];return this.size-=j?1:0,j}function ma(x){var j=this.__data__;if(mt){var Z=j[x];return Z===s?void 0:Z}return Oe.call(j,x)?j[x]:void 0}function va(x){var j=this.__data__;return mt?j[x]!==void 0:Oe.call(j,x)}function _a(x,j){var Z=this.__data__;return this.size+=this.has(x)?0:1,Z[x]=mt&&j===void 0?s:j,this}ft.prototype.clear=jt,ft.prototype.delete=Lt,ft.prototype.get=ma,ft.prototype.has=va,ft.prototype.set=_a;function Pr(x){var j=-1,Z=x==null?0:x.length;for(this.clear();++j<Z;){var le=x[j];this.set(le[0],le[1])}}function ba(){this.__data__=[],this.size=0}function wa(x){var j=this.__data__,Z=qi(j,x);if(Z<0)return!1;var le=j.length-1;return Z==le?j.pop():Jr.call(j,Z,1),--this.size,!0}function Ea(x){var j=this.__data__,Z=qi(j,x);return Z<0?void 0:j[Z][1]}function Da(x){return qi(this.__data__,x)>-1}function Sa(x,j){var Z=this.__data__,le=qi(Z,x);return le<0?(++this.size,Z.push([x,j])):Z[le][1]=j,this}Pr.prototype.clear=ba,Pr.prototype.delete=wa,Pr.prototype.get=Ea,Pr.prototype.has=Da,Pr.prototype.set=Sa;function ai(x){var j=-1,Z=x==null?0:x.length;for(this.clear();++j<Z;){var le=x[j];this.set(le[0],le[1])}}function hn(){this.size=0,this.__data__={hash:new ft,map:new(yt||Pr),string:new ft}}function Ia(x){var j=Di(this,x).delete(x);return this.size-=j?1:0,j}function fn(x){return Di(this,x).get(x)}function Oa(x){return Di(this,x).has(x)}function xa(x,j){var Z=Di(this,x),le=Z.size;return Z.set(x,j),this.size+=Z.size==le?0:1,this}ai.prototype.clear=hn,ai.prototype.delete=Ia,ai.prototype.get=fn,ai.prototype.has=Oa,ai.prototype.set=xa;function ln(x){var j=-1,Z=x==null?0:x.length;for(this.__data__=new ai;++j<Z;)this.add(x[j])}function Cs(x){return this.__data__.set(x,s),this}function Ts(x){return this.__data__.has(x)}ln.prototype.add=ln.prototype.push=Cs,ln.prototype.has=Ts;function Br(x){var j=this.__data__=new Pr(x);this.size=j.size}function Aa(){this.__data__=new Pr,this.size=0}function Pa(x){var j=this.__data__,Z=j.delete(x);return this.size=j.size,Z}function Ca(x){return this.__data__.get(x)}function Ta(x){return this.__data__.has(x)}function Ns(x,j){var Z=this.__data__;if(Z instanceof Pr){var le=Z.__data__;if(!yt||le.length<t-1)return le.push([x,j]),this.size=++Z.size,this;Z=this.__data__=new ai(le)}return Z.set(x,j),this.size=Z.size,this}Br.prototype.clear=Aa,Br.prototype.delete=Pa,Br.prototype.get=Ca,Br.prototype.has=Ta,Br.prototype.set=Ns;function Rs(x,j){var Z=gn(x),le=!Z&&Vs(x),ct=!Z&&!le&&zn(x),Te=!Z&&!le&&!ct&&Gs(x),lt=Z||le||ct||Te,Mt=lt?pt(x.length,String):[],Qe=Mt.length;for(var ut in x)(j||Oe.call(x,ut))&&!(lt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Te&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||qs(ut,Qe)))&&Mt.push(ut);return Mt}function qi(x,j){for(var Z=x.length;Z--;)if(Ks(x[Z][0],j))return Z;return-1}function qn(x,j,Z){var le=j(x);return gn(x)?le:Ve(le,Z(x))}function Bi(x){return x==null?x===void 0?k:Y:rr&&rr in Object(x)?Ls(x):Ua(x)}function Bn(x){return Hi(x)&&Bi(x)==d}function zi(x,j,Z,le,ct){return x===j?!0:x==null||j==null||!Hi(x)&&!Hi(j)?x!==x&&j!==j:Us(x,j,Z,le,zi,ct)}function Us(x,j,Z,le,ct,Te){var lt=gn(x),Mt=gn(j),Qe=lt?y:Qr(x),ut=Mt?y:Qr(j);Qe=Qe==d?p:Qe,ut=ut==d?p:ut;var Ct=Qe==p,fr=ut==p,qt=Qe==ut;if(qt&&zn(x)){if(!zn(j))return!1;lt=!0,Ct=!1}if(qt&&!Ct)return Te||(Te=new Br),lt||Gs(x)?dn(x,j,Z,le,ct,Te):Ra(x,j,Qe,Z,le,ct,Te);if(!(Z&o)){var dt=Ct&&Oe.call(x,"__wrapped__"),ir=fr&&Oe.call(j,"__wrapped__");if(dt||ir){var zr=dt?x.value():x,Cr=ir?j.value():j;return Te||(Te=new Br),ct(zr,Cr,Z,le,Te)}}return qt?(Te||(Te=new Br),js(x,j,Z,le,ct,Te)):!1}function Na(x){if(!Ws(x)||zs(x))return!1;var j=yn(x)?Ze:oe;return j.test(ci(x))}function Fs(x){return Hi(x)&&ks(x.length)&&!!fe[Bi(x)]}function $s(x){if(!Hs(x))return Mi(x);var j=[];for(var Z in Object(x))Oe.call(x,Z)&&Z!="constructor"&&j.push(Z);return j}function dn(x,j,Z,le,ct,Te){var lt=Z&o,Mt=x.length,Qe=j.length;if(Mt!=Qe&&!(lt&&Qe>Mt))return!1;var ut=Te.get(x);if(ut&&Te.get(j))return ut==j;var Ct=-1,fr=!0,qt=Z&c?new ln:void 0;for(Te.set(x,j),Te.set(j,x);++Ct<Mt;){var dt=x[Ct],ir=j[Ct];if(le)var zr=lt?le(ir,dt,Ct,j,x,Te):le(dt,ir,Ct,x,j,Te);if(zr!==void 0){if(zr)continue;fr=!1;break}if(qt){if(!je(j,function(Cr,Xr){if(!Me(qt,Xr)&&(dt===Cr||ct(dt,Cr,Z,le,Te)))return qt.push(Xr)})){fr=!1;break}}else if(!(dt===ir||ct(dt,ir,Z,le,Te))){fr=!1;break}}return Te.delete(x),Te.delete(j),fr}function Ra(x,j,Z,le,ct,Te,lt){switch(Z){case ye:if(x.byteLength!=j.byteLength||x.byteOffset!=j.byteOffset)return!1;x=x.buffer,j=j.buffer;case ue:return!(x.byteLength!=j.byteLength||!Te(new tr(x),new tr(j)));case _:case O:case L:return Ks(+x,+j);case T:return x.name==j.name&&x.message==j.message;case b:case u:return x==j+"";case H:var Mt=Re;case D:var Qe=le&o;if(Mt||(Mt=qe),x.size!=j.size&&!Qe)return!1;var ut=lt.get(x);if(ut)return ut==j;le|=c,lt.set(x,j);var Ct=dn(Mt(x),Mt(j),le,ct,Te,lt);return lt.delete(x),Ct;case E:if(Ot)return Ot.call(x)==Ot.call(j)}return!1}function js(x,j,Z,le,ct,Te){var lt=Z&o,Mt=pn(x),Qe=Mt.length,ut=pn(j),Ct=ut.length;if(Qe!=Ct&&!lt)return!1;for(var fr=Qe;fr--;){var qt=Mt[fr];if(!(lt?qt in j:Oe.call(j,qt)))return!1}var dt=Te.get(x);if(dt&&Te.get(j))return dt==j;var ir=!0;Te.set(x,j),Te.set(j,x);for(var zr=lt;++fr<Qe;){qt=Mt[fr];var Cr=x[qt],Xr=j[qt];if(le)var Hn=lt?le(Xr,Cr,qt,j,x,Te):le(Cr,Xr,qt,x,j,Te);if(!(Hn===void 0?Cr===Xr||ct(Cr,Xr,Z,le,Te):Hn)){ir=!1;break}zr||(zr=qt=="constructor")}if(ir&&!zr){var Ki=x.constructor,Kt=j.constructor;Ki!=Kt&&"constructor"in x&&"constructor"in j&&!(typeof Ki=="function"&&Ki instanceof Ki&&typeof Kt=="function"&&Kt instanceof Kt)&&(ir=!1)}return Te.delete(x),Te.delete(j),ir}function pn(x){return qn(x,ja,Ms)}function Di(x,j){var Z=x.__data__;return Bs(j)?Z[typeof j=="string"?"string":"hash"]:Z.map}function br(x,j){var Z=Ie(x,j);return Na(Z)?Z:void 0}function Ls(x){var j=Oe.call(x,rr),Z=x[rr];try{x[rr]=void 0;var le=!0}catch{}var ct=Ge.call(x);return le&&(j?x[rr]=Z:delete x[rr]),ct}var Ms=oi?function(x){return x==null?[]:(x=Object(x),ze(oi(x),function(j){return hr.call(x,j)}))}:at,Qr=Bi;(wt&&Qr(new wt(new ArrayBuffer(1)))!=ye||yt&&Qr(new yt)!=H||Et&&Qr(Et.resolve())!=w||Dt&&Qr(new Dt)!=D||_t&&Qr(new _t)!=ne)&&(Qr=function(x){var j=Bi(x),Z=j==p?x.constructor:void 0,le=Z?ci(Z):"";if(le)switch(le){case Ut:return ye;case Ft:return H;case St:return w;case $t:return D;case It:return ne}return j});function qs(x,j){return j=j??l,!!j&&(typeof x=="number"||Se.test(x))&&x>-1&&x%1==0&&x<j}function Bs(x){var j=typeof x;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?x!=="__proto__":x===null}function zs(x){return!!ke&&ke in x}function Hs(x){var j=x&&x.constructor,Z=typeof j=="function"&&j.prototype||we;return x===Z}function Ua(x){return Ge.call(x)}function ci(x){if(x!=null){try{return He.call(x)}catch{}try{return x+""}catch{}}return""}function Ks(x,j){return x===j||x!==x&&j!==j}var Vs=Bn(function(){return arguments}())?Bn:function(x){return Hi(x)&&Oe.call(x,"callee")&&!hr.call(x,"callee")},gn=Array.isArray;function Fa(x){return x!=null&&ks(x.length)&&!yn(x)}var zn=Ei||nt;function $a(x,j){return zi(x,j)}function yn(x){if(!Ws(x))return!1;var j=Bi(x);return j==C||j==P||j==g||j==v}function ks(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=l}function Ws(x){var j=typeof x;return x!=null&&(j=="object"||j=="function")}function Hi(x){return x!=null&&typeof x=="object"}var Gs=Ee?gt(Ee):Fs;function ja(x){return Fa(x)?Rs(x):$s(x)}function at(){return[]}function nt(){return!1}i.exports=$a})(Zo,Zo.exports);var s2=Zo.exports;const o2=ta(s2);function a2(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var d=i.length,y=i.charAt(0),g=Math.log(d)/Math.log(256),_=Math.log(256)/Math.log(d);function O(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var H=0,L=0,Y=0,p=P.length;Y!==p&&P[Y]===0;)Y++,H++;for(var w=(p-Y)*_+1>>>0,v=new Uint8Array(w);Y!==p;){for(var b=P[Y],D=0,u=w-1;(b!==0||D<L)&&u!==-1;u--,D++)b+=256*v[u]>>>0,v[u]=b%d>>>0,b=b/d>>>0;if(b!==0)throw new Error("Non-zero carry");L=D,Y++}for(var E=w-L;E!==w&&v[E]===0;)E++;for(var k=y.repeat(H);E<w;++E)k+=i.charAt(v[E]);return k}function T(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var H=0;if(P[H]!==" "){for(var L=0,Y=0;P[H]===y;)L++,H++;for(var p=(P.length-H)*g+1>>>0,w=new Uint8Array(p);P[H];){var v=t[P.charCodeAt(H)];if(v===255)return;for(var b=0,D=p-1;(v!==0||b<Y)&&D!==-1;D--,b++)v+=d*w[D]>>>0,w[D]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");Y=b,H++}if(P[H]!==" "){for(var u=p-Y;u!==p&&w[u]===0;)u++;for(var E=new Uint8Array(L+(p-u)),k=L;u!==p;)E[k++]=w[u++];return E}}}function C(P){var H=T(P);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:T,decode:C}}var c2=a2,u2=c2;const rg=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},h2=i=>new TextEncoder().encode(i),f2=i=>new TextDecoder().decode(i);class l2{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class d2{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ig(this,e)}}class p2{constructor(e){this.decoders=e}or(e){return ig(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ig=(i,e)=>new p2({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class g2{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new l2(e,t,s),this.decoder=new d2(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ga=({name:i,prefix:e,encode:t,decode:s})=>new g2(i,e,t,s),Ps=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=u2(t,e);return ga({prefix:i,name:e,encode:s,decode:c=>rg(o(c))})},y2=(i,e,t,s)=>{const o={};for(let _=0;_<e.length;++_)o[e[_]]=_;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let d=0,y=0,g=0;for(let _=0;_<c;++_){const O=o[i[_]];if(O===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|O,d+=t,d>=8&&(d-=8,l[g++]=255&y>>d)}if(d>=t||255&y<<8-d)throw new SyntaxError("Unexpected end of data");return l},m2=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,d=0;for(let y=0;y<i.length;++y)for(d=d<<8|i[y],l+=8;l>t;)l-=t,c+=e[o&d>>l];if(l&&(c+=e[o&d<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Qt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ga({prefix:e,name:i,encode(o){return m2(o,s,t)},decode(o){return y2(o,s,t,i)}}),v2=ga({prefix:"\0",name:"identity",encode:i=>f2(i),decode:i=>h2(i)});var _2=Object.freeze({__proto__:null,identity:v2});const b2=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var w2=Object.freeze({__proto__:null,base2:b2});const E2=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var D2=Object.freeze({__proto__:null,base8:E2});const S2=Ps({prefix:"9",name:"base10",alphabet:"0123456789"});var I2=Object.freeze({__proto__:null,base10:S2});const O2=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),x2=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var A2=Object.freeze({__proto__:null,base16:O2,base16upper:x2});const P2=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),C2=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),T2=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),N2=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),R2=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),U2=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),F2=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$2=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),j2=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var L2=Object.freeze({__proto__:null,base32:P2,base32upper:C2,base32pad:T2,base32padupper:N2,base32hex:R2,base32hexupper:U2,base32hexpad:F2,base32hexpadupper:$2,base32z:j2});const M2=Ps({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),q2=Ps({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var B2=Object.freeze({__proto__:null,base36:M2,base36upper:q2});const z2=Ps({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),H2=Ps({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var K2=Object.freeze({__proto__:null,base58btc:z2,base58flickr:H2});const V2=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),k2=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),W2=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),G2=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Y2=Object.freeze({__proto__:null,base64:V2,base64pad:k2,base64url:W2,base64urlpad:G2});const ng=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),J2=ng.reduce((i,e,t)=>(i[t]=e,i),[]),Q2=ng.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function X2(i){return i.reduce((e,t)=>(e+=J2[t],e),"")}function Z2(i){const e=[];for(const t of i){const s=Q2[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const eS=ga({prefix:"🚀",name:"base256emoji",encode:X2,decode:Z2});var tS=Object.freeze({__proto__:null,base256emoji:eS}),rS=sg,hd=128,iS=127,nS=~iS,sS=Math.pow(2,31);function sg(i,e,t){e=e||[],t=t||0;for(var s=t;i>=sS;)e[t++]=i&255|hd,i/=128;for(;i&nS;)e[t++]=i&255|hd,i>>>=7;return e[t]=i|0,sg.bytes=t-s+1,e}var oS=Su,aS=128,fd=127;function Su(i,s){var t=0,s=s||0,o=0,c=s,l,d=i.length;do{if(c>=d)throw Su.bytes=0,new RangeError("Could not decode varint");l=i[c++],t+=o<28?(l&fd)<<o:(l&fd)*Math.pow(2,o),o+=7}while(l>=aS);return Su.bytes=c-s,t}var cS=Math.pow(2,7),uS=Math.pow(2,14),hS=Math.pow(2,21),fS=Math.pow(2,28),lS=Math.pow(2,35),dS=Math.pow(2,42),pS=Math.pow(2,49),gS=Math.pow(2,56),yS=Math.pow(2,63),mS=function(i){return i<cS?1:i<uS?2:i<hS?3:i<fS?4:i<lS?5:i<dS?6:i<pS?7:i<gS?8:i<yS?9:10},vS={encode:rS,decode:oS,encodingLength:mS},og=vS;const ld=(i,e,t=0)=>(og.encode(i,e,t),e),dd=i=>og.encodingLength(i),Iu=(i,e)=>{const t=e.byteLength,s=dd(i),o=s+dd(t),c=new Uint8Array(o+t);return ld(i,c,0),ld(t,c,s),c.set(e,o),new _S(i,t,e,c)};class _S{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const ag=({name:i,code:e,encode:t})=>new bS(i,e,t);class bS{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Iu(this.code,t):t.then(s=>Iu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const cg=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),wS=ag({name:"sha2-256",code:18,encode:cg("SHA-256")}),ES=ag({name:"sha2-512",code:19,encode:cg("SHA-512")});var DS=Object.freeze({__proto__:null,sha256:wS,sha512:ES});const ug=0,SS="identity",hg=rg,IS=i=>Iu(ug,hg(i)),OS={code:ug,name:SS,encode:hg,digest:IS};var xS=Object.freeze({__proto__:null,identity:OS});new TextEncoder,new TextDecoder;const pd={..._2,...w2,...D2,...I2,...A2,...L2,...B2,...K2,...Y2,...tS};({...DS,...xS});function fg(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function AS(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?fg(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function lg(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const gd=lg("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Qc=lg("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=AS(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),PS={utf8:gd,"utf-8":gd,hex:pd.base16,latin1:Qc,ascii:Qc,binary:Qc,...pd};function CS(i,e="utf8"){const t=PS[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?fg(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}const dg="wc",TS=2,th="core",Fi=`${dg}@2:${th}:`,NS={name:th,logger:"error"},RS={database:":memory:"},US="crypto",yd="client_ed25519_seed",FS=pe.ONE_DAY,$S="keychain",jS="0.3",LS="messages",MS="0.3",qS=pe.SIX_HOURS,BS="publisher",pg="irn",zS="error",gg="wss://relay.walletconnect.com",md="wss://relay.walletconnect.org",HS="relayer",At={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},KS="_subscription",us={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},VS=pe.ONE_SECOND/2,kS="2.9.1",WS=1e4,GS="0.3",YS="WALLETCONNECT_CLIENT_ID",ni={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},JS="subscription",QS="0.3",XS=pe.FIVE_SECONDS*1e3,ZS="pairing",eI="0.3",hs={wc_pairingDelete:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:0},res:{ttl:pe.ONE_DAY,prompt:!1,tag:0}}},ii={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},tI="history",rI="0.3",iI="expirer",Mr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},nI="0.3",Xc="verify-api",vd="https://verify.walletconnect.com";class sI{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=$S,this.version=jS,this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=ce("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ar(t,this.name)}get context(){return _r(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Hp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Kp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class oI{constructor(e,t,s){this.core=e,this.logger=t,this.name=US,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=ql(o);return $p(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=TD();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),l=ql(c),d=Eu();return await gD(d,o,FS,l)},this.generateSharedKey=(o,c,l)=>{this.isInitialized();const d=this.getPrivateKey(o),y=ND(d,c);return this.setSymKey(y,l)},this.setSymKey=async(o,c)=>{this.isInitialized();const l=c||RD(o);return await this.keychain.set(l,o),l},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,l)=>{this.isInitialized();const d=Bp(l),y=nn(c);if(Wl(d)){const T=d.senderPublicKey,C=d.receiverPublicKey;o=await this.generateSharedKey(T,C)}const g=this.getSymKey(o),{type:_,senderPublicKey:O}=d;return FD({type:_,symKey:g,message:y,senderPublicKey:O})},this.decode=async(o,c,l)=>{this.isInitialized();const d=LD(c,l);if(Wl(d)){const y=d.receiverPublicKey,g=d.senderPublicKey;o=await this.generateSharedKey(y,g)}try{const y=this.getSymKey(o),g=$D({symKey:y,encoded:c});return Is(g)}catch(y){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(y)}},this.getPayloadType=o=>{const c=Jo(o);return xs(c.type)},this.getPayloadSenderPublicKey=o=>{const c=Jo(o);return c.senderPublicKey?ur(c.senderPublicKey,cr):void 0},this.core=e,this.logger=Ar(t,this.name),this.keychain=s||new sI(this.core,this.logger)}get context(){return _r(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(yd)}catch{e=Eu(),await this.keychain.set(yd,e)}return CS(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class aI extends W3{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=LS,this.version=MS,this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=Fn(o);let l=this.messages.get(s);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=o,this.messages.set(s,l),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),l=Fn(o);return typeof c[l]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ar(e,this.name),this.core=t}get context(){return _r(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Hp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Kp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class cI extends G3{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Or.EventEmitter,this.name=BS,this.queue=new Map,this.publishTimeout=pe.toMiliseconds(pe.TEN_SECONDS),this.queueTimeout=pe.toMiliseconds(pe.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const l=(c==null?void 0:c.ttl)||qS,d=Du(c),y=(c==null?void 0:c.prompt)||!1,g=(c==null?void 0:c.tag)||0,_=(c==null?void 0:c.id)||Xu().toString(),O={topic:s,message:o,opts:{ttl:l,relay:d,prompt:y,tag:g,id:_}},T=setTimeout(()=>this.queue.set(_,O),this.queueTimeout);try{await await Qo(this.rpcPublish(s,o,l,d,y,g,_),this.publishTimeout),clearTimeout(T),this.relayer.events.emit(At.publish,O)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(l){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(l),l}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Ar(t,this.name),this.registerEventListeners()}get context(){return _r(this.logger)}rpcPublish(e,t,s,o,c,l,d){var y,g,_,O;const T={method:Ko(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:l},id:d};return ar((y=T.params)==null?void 0:y.prompt)&&((g=T.params)==null||delete g.prompt),ar((_=T.params)==null?void 0:_.tag)&&((O=T.params)==null||delete O.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:T}),this.relayer.request(T)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ln.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(At.connection_stalled);return}this.checkQueue()}),this.relayer.on(At.message_ack,e=>{this.onPublish(e.id.toString())})}}class uI{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var hI=Object.defineProperty,fI=Object.defineProperties,lI=Object.getOwnPropertyDescriptors,_d=Object.getOwnPropertySymbols,dI=Object.prototype.hasOwnProperty,pI=Object.prototype.propertyIsEnumerable,bd=(i,e,t)=>e in i?hI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,fs=(i,e)=>{for(var t in e||(e={}))dI.call(e,t)&&bd(i,t,e[t]);if(_d)for(var t of _d(e))pI.call(e,t)&&bd(i,t,e[t]);return i},Zc=(i,e)=>fI(i,lI(e));class gI extends Q3{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new uI,this.events=new Or.EventEmitter,this.name=JS,this.version=QS,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Fi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=Du(o),l={topic:s,relay:c};this.pending.set(s,l);const d=await this.rpcSubscribe(s,c);return this.onSubscribe(d,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),d}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const l=new pe.Watch;l.start(this.pendingSubscriptionWatchLabel);const d=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(d),l.stop(this.pendingSubscriptionWatchLabel),o(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=XS&&(clearInterval(d),l.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ar(t,this.name),this.clientId=""}get context(){return _r(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=Du(s);await this.rpcUnsubscribe(e,t,o);const c=Wt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Ko(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Qo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(At.connection_stalled)}return Fn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Ko(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Qo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(At.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Ko(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,Zc(fs({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,fs({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,fs({},t)),this.topicMap.set(t.topic,e),this.events.emit(ni.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(ni.deleted,Zc(fs({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ni.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ni.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);As(t)&&this.onBatchSubscribe(t.map((s,o)=>Zc(fs({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Ln.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(At.connect,async()=>{await this.onConnect()}),this.relayer.on(At.disconnect,()=>{this.onDisconnect()}),this.events.on(ni.created,async e=>{const t=ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(ni.deleted,async e=>{const t=ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var yI=Object.defineProperty,wd=Object.getOwnPropertySymbols,mI=Object.prototype.hasOwnProperty,vI=Object.prototype.propertyIsEnumerable,Ed=(i,e,t)=>e in i?yI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,_I=(i,e)=>{for(var t in e||(e={}))mI.call(e,t)&&Ed(i,t,e[t]);if(wd)for(var t of wd(e))vI.call(e,t)&&Ed(i,t,e[t]);return i};class bI extends Y3{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Or.EventEmitter,this.name=HS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ar(e.logger,this.name):ha(fa({level:e.logger||zS})),this.messages=new aI(this.logger,e.core),this.subscriber=new gI(this,this.logger),this.publisher=new cI(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||gg,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${md}...`),await this.restartTransport(md)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},WS)}get context(){return _r(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(c=>{this.subscriber.once(ni.created,l=>{l.topic===e&&c()})}),new Promise(async c=>{o=await this.subscriber.subscribe(e,t),c()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(At.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(ni.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await Qo(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>t()).finally(()=>this.removeListener(At.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(At.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(At.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(us.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ji(new n2(YD({sdkVersion:kS,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const o=this.messages.has(t,s);return o&&this.logger.debug(`Ignoring duplicate message: ${s}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),eh(e)){if(!e.method.endsWith(KS))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,l={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(_I({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else pa(e)&&this.events.emit(At.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(At.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Zu(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(us.payload,e=>this.onProviderPayload(e)),this.provider.on(us.connect,()=>{this.events.emit(At.connect)}),this.provider.on(us.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(us.error,e=>{this.logger.error(e),this.events.emit(At.error,e)})}registerEventListeners(){this.events.on(At.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(At.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},pe.toMiliseconds(VS))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var wI=Object.defineProperty,Dd=Object.getOwnPropertySymbols,EI=Object.prototype.hasOwnProperty,DI=Object.prototype.propertyIsEnumerable,Sd=(i,e,t)=>e in i?wI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Id=(i,e)=>{for(var t in e||(e={}))EI.call(e,t)&&Sd(i,t,e[t]);if(Dd)for(var t of Dd(e))DI.call(e,t)&&Sd(i,t,e[t]);return i};class ya extends J3{constructor(e,t,s,o=Fi,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=GS,this.cached=[],this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!ar(l)?this.map.set(this.getKey(l),l):v6(l)?this.map.set(l.id,l):_6(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,d)=>{this.isInitialized(),this.map.has(l)?await this.update(l,d):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:d}),this.map.set(l,d),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(d=>Object.keys(l).every(y=>o2(d[y],l[y]))):this.values),this.update=async(l,d)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:d});const y=Id(Id({},this.getData(l)),d);this.map.set(l,y),await this.persist()},this.delete=async(l,d)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:d}),this.map.delete(l),await this.persist())},this.logger=Ar(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return _r(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class SI{constructor(e,t){this.core=e,this.logger=t,this.name=ZS,this.version=eI,this.events=new Nu,this.initialized=!1,this.storagePrefix=Fi,this.ignoredPayloadTypes=[cn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Eu(),o=await this.core.crypto.setSymKey(s),c=Wr(pe.FIVE_MINUTES),l={protocol:pg},d={topic:o,expiry:c,relay:l,active:!1},y=c6({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:l});return await this.pairings.set(o,d),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:y}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:l}=s6(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const d=Wr(pe.FIVE_MINUTES),y={topic:o,relay:l,expiry:d,active:!1};return await this.pairings.set(o,y),await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:l}),this.core.expirer.set(o,d),s.activatePairing&&await this.activate({topic:o}),y},this.activate=async({topic:s})=>{this.isInitialized();const o=Wr(pe.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:l,resolve:d,reject:y}=Rn();this.events.once(Bt("pairing_ping",c),({error:g})=>{g?y(g):d()}),await l()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Wt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const l=la(o,c),d=await this.core.crypto.encode(s,l),y=hs[o].req;return this.core.history.set(s,l),this.core.relayer.publish(s,d,y),l.id},this.sendResult=async(s,o,c)=>{const l=Zu(s,c),d=await this.core.crypto.encode(o,l),y=await this.core.history.get(o,s),g=hs[y.request.method].res;await this.core.relayer.publish(o,d,g),await this.core.history.resolve(l)},this.sendError=async(s,o,c)=>{const l=da(s,c),d=await this.core.crypto.encode(o,l),y=await this.core.history.get(o,s),g=hs[y.request.method]?hs[y.request.method].res:hs.unregistered_method.res;await this.core.relayer.publish(o,d,g),await this.core.history.resolve(l)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Wt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Ri(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,l=(await this.core.history.get(o,c.id)).request.method;switch(l){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit("pairing_ping",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{bi(o)?this.events.emit(Bt("pairing_ping",c),{}):Gr(o)&&this.events.emit(Bt("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:l}=o;try{if(this.registeredMethods.includes(l))return;const d=Wt("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,s,d),this.logger.error(d)}catch(d){await this.sendError(c,s,d),this.logger.error(d)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Wt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!mr(s)){const{message:o}=ce("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!m6(s.uri)){const{message:o}=ce("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!mr(s)){const{message:c}=ce("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!mr(s)){const{message:c}=ce("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:o}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Ri(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ce("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Ar(t,this.name),this.pairings=new ya(this.core,this.logger,this.name,this.storagePrefix)}get context(){return _r(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(At.message,async e=>{const{topic:t,message:s}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);eh(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):pa(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))})}registerExpirerEvents(){this.core.expirer.on(Mr.expired,async e=>{const{topic:t}=kp(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class II extends k3{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Or.EventEmitter,this.name=tI,this.version=rI,this.cached=[],this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const l={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:Wr(pe.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(ii.created,l)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Gr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(ii.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(ii.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ar(t,this.name)}get context(){return _r(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:la(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ii.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ii.created,e=>{const t=ii.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ii.updated,e=>{const t=ii.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ii.deleted,e=>{const t=ii.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Ln.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{pe.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class OI extends X3{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Or.EventEmitter,this.name=iI,this.version=nI,this.cached=[],this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),l={target:c,expiry:o};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(Mr.created,{target:c,expiration:l})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Mr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ar(t,this.name)}get context(){return _r(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return JD(e);if(typeof e=="number")return QD(e);const{message:t}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;pe.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Mr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Ln.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Mr.created,e=>{const t=Mr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Mr.expired,e=>{const t=Mr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Mr.deleted,e=>{const t=Mr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class xI extends Z3{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Xc,this.initialized=!1,this.init=async s=>{zp()||!Gu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||vd,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const c=this.startAbortTimer(pe.FIVE_SECONDS),l=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?(o=await l.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Xc))return s();const c=document.createElement("iframe");c.setAttribute("id",Xc),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,s()}),c.addEventListener("error",l=>{o(l)}),document.body.append(c),this.iframe=c}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),pe.toMiliseconds(pe.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ar(t,this.name),this.verifyUrl=vd,this.abortController=new AbortController,this.isDevEnv=Wu()&&{}.IS_VITEST}get context(){return _r(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),pe.toMiliseconds(e))}}var AI=Object.defineProperty,Od=Object.getOwnPropertySymbols,PI=Object.prototype.hasOwnProperty,CI=Object.prototype.propertyIsEnumerable,xd=(i,e,t)=>e in i?AI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ad=(i,e)=>{for(var t in e||(e={}))PI.call(e,t)&&xd(i,t,e[t]);if(Od)for(var t of Od(e))CI.call(e,t)&&xd(i,t,e[t]);return i};class rh extends V3{constructor(e){super(e),this.protocol=dg,this.version=TS,this.name=th,this.events=new Or.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||gg;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ha(fa({level:(e==null?void 0:e.logger)||NS.logger}));this.logger=Ar(t,this.name),this.heartbeat=new Ln.HeartBeat,this.crypto=new oI(this,this.logger,e==null?void 0:e.keychain),this.history=new II(this,this.logger),this.expirer=new OI(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new p3(Ad(Ad({},RS),e==null?void 0:e.storageOptions)),this.relayer=new bI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new SI(this,this.logger),this.verify=new xI(this.projectId||"",this.logger)}static async init(e){const t=new rh(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(YS,s),t}get context(){return _r(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const TI=rh,yg="wc",mg=2,vg="client",ih=`${yg}@${mg}:${vg}:`,eu={name:vg,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},NI="WALLETCONNECT_DEEPLINK_CHOICE",RI="proposal",_g="Proposal expired",UI="session",Lo=pe.SEVEN_DAYS,FI="engine",ls={wc_sessionPropose:{req:{ttl:pe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:pe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:pe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1115}}},tu={min:pe.FIVE_MINUTES,max:pe.SEVEN_DAYS},ds={idle:"idle",active:"active"},$I="request",jI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var LI=Object.defineProperty,MI=Object.defineProperties,qI=Object.getOwnPropertyDescriptors,Pd=Object.getOwnPropertySymbols,BI=Object.prototype.hasOwnProperty,zI=Object.prototype.propertyIsEnumerable,Cd=(i,e,t)=>e in i?LI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Lr=(i,e)=>{for(var t in e||(e={}))BI.call(e,t)&&Cd(i,t,e[t]);if(Pd)for(var t of Pd(e))zI.call(e,t)&&Cd(i,t,e[t]);return i},ru=(i,e)=>MI(i,qI(e));class HI extends tD{constructor(e){super(e),this.name=FI,this.events=new Nu,this.initialized=!1,this.ignoredPayloadTypes=[cn],this.requestQueue={state:ds.idle,requests:[]},this.requestQueueDelay=pe.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ls)}),this.initialized=!0,setTimeout(()=>{this.requestQueue.requests=this.getPendingSessionRequests(),this.processRequestQueue()},pe.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{this.isInitialized();const s=ru(Lr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:d,relays:y}=s;let g=o,_,O=!1;if(g&&(O=this.client.core.pairing.pairings.get(g).active),!g||!O){const{topic:w,uri:v}=await this.client.core.pairing.create();g=w,_=v}const T=await this.client.core.crypto.generateKeyPair(),C=Lr({requiredNamespaces:c,optionalNamespaces:l,relays:y??[{protocol:pg}],proposer:{publicKey:T,metadata:this.client.metadata}},d&&{sessionProperties:d}),{reject:P,resolve:H,done:L}=Rn(pe.FIVE_MINUTES,_g);if(this.events.once(Bt("session_connect"),async({error:w,session:v})=>{if(w)P(w);else if(v){v.self.publicKey=T;const b=ru(Lr({},v),{requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces});await this.client.session.set(v.topic,b),await this.setExpiry(v.topic,v.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:v.peer.metadata}),H(b)}}),!g){const{message:w}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(w)}const Y=await this.sendRequest(g,"wc_sessionPropose",C),p=Wr(pe.FIVE_MINUTES);return await this.setProposal(Y,Lr({id:Y,expiry:p},C)),{uri:_,approval:L}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:l}=t,d=this.client.proposal.get(s);let{pairingTopic:y,proposer:g,requiredNamespaces:_,optionalNamespaces:O}=d;y=y||"",ys(_)||(_=l6(c,"approve()"));const T=await this.client.core.crypto.generateKeyPair(),C=g.publicKey,P=await this.client.core.crypto.generateSharedKey(T,C);y&&s&&(await this.client.core.pairing.updateMetadata({topic:y,metadata:g.metadata}),await this.sendResult(s,y,{relay:{protocol:o??"irn"},responderPublicKey:T}),await this.client.proposal.delete(s,Wt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:y}));const H=Lr({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:_,optionalNamespaces:O,pairingTopic:y,controller:{publicKey:T,metadata:this.client.metadata},expiry:Wr(Lo)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(P),await this.sendRequest(P,"wc_sessionSettle",H);const L=ru(Lr({},H),{topic:P,pairingTopic:y,acknowledged:!1,self:H.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:T});return await this.client.session.set(P,L),await this.setExpiry(P,Wr(Lo)),{topic:P,acknowledged:()=>new Promise(Y=>setTimeout(()=>Y(this.client.session.get(P)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Wt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:l,resolve:d,reject:y}=Rn();return this.events.once(Bt("session_update",c),({error:g})=>{g?y(g):d()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:l}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:c,resolve:l,reject:d}=Rn();return this.events.once(Bt("session_extend",o),({error:y})=>{y?d(y):l()}),await this.setExpiry(s,Wr(Lo)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:l}=t,d=await this.sendRequest(c,"wc_sessionRequest",{request:o,chainId:s},l),{done:y,resolve:g,reject:_}=Rn(l);this.events.once(Bt("session_request",d),({error:T,result:C})=>{T?_(T):g(C)}),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:d});const O=await this.client.core.storage.getItem(NI);return XD({id:d,topic:c,wcDeepLink:O}),await y()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;bi(o)?await this.sendResult(c,s,o.result):Gr(o)&&await this.sendError(c,s,o.error),this.cleanupAfterResponse(t)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:c,resolve:l,reject:d}=Rn();this.events.once(Bt("session_ping",o),({error:y})=>{y?d(y):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=Xu().toString();let c;const l=d=>{(d==null?void 0:d.id.toString())===o&&(this.client.core.relayer.events.removeListener(At.message_ack,l),c())};await Promise.all([new Promise(d=>{c=d,this.client.core.relayer.on(At.message_ack,l)}),this.sendRequest(s,"wc_sessionDelete",Wt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>g6(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var l,d;return((l=c.peerMetadata)==null?void 0:l.url)&&((d=c.peerMetadata)==null?void 0:d.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Wt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Wt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)]),this.requestQueue.requests=this.requestQueue.requests.filter(c=>c.id!==t),o&&(this.requestQueue.state=ds.idle)},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=ls.wc_sessionRequest.req.ttl,{id:o,topic:c,params:l}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:l}),s&&this.client.core.expirer.set(o,Wr(s))},this.sendRequest=async(t,s,o,c,l)=>{const d=la(s,o);if(Gu()&&jI.includes(s)){const _=Fn(JSON.stringify(d));await this.client.core.verify.register({attestationId:_})}const y=await this.client.core.crypto.encode(t,d),g=ls[s].req;return c&&(g.ttl=c),l&&(g.id=l),this.client.core.history.set(t,d),this.client.core.relayer.publish(t,y,g),d.id},this.sendResult=async(t,s,o)=>{const c=Zu(t,o),l=await this.client.core.crypto.encode(s,c),d=await this.client.core.history.get(s,t),y=ls[d.request.method].res;this.client.core.relayer.publish(s,l,y),await this.client.core.history.resolve(c)},this.sendError=async(t,s,o)=>{const c=da(t,o),l=await this.client.core.crypto.encode(s,c),d=await this.client.core.history.get(s,t),y=ls[d.request.method].res;this.client.core.relayer.publish(s,l,y),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{Ri(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Ri(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(Lr({},s.params));const l=Wr(pe.FIVE_MINUTES),d=Lr({id:c,pairingTopic:t,expiry:l},o);await this.setProposal(c,d);const y=Fn(JSON.stringify(s)),g=await this.getVerifyContext(y,d.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:g})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(bi(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const d=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const y=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:y});const g=await this.client.core.crypto.generateSharedKey(d,y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const _=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:_}),await this.client.core.pairing.activate({topic:t})}else Gr(s)&&(await this.client.proposal.delete(o,Wt("USER_DISCONNECTED")),this.events.emit(Bt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:d,expiry:y,namespaces:g,requiredNamespaces:_,optionalNamespaces:O,sessionProperties:T,pairingTopic:C}=s.params,P=Lr({topic:t,relay:l,expiry:y,namespaces:g,acknowledged:!0,pairingTopic:C,requiredNamespaces:_,optionalNamespaces:O,controller:d.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:d.publicKey,metadata:d.metadata}},T&&{sessionProperties:T});await this.sendResult(s.id,t,!0),this.events.emit(Bt("session_connect"),{session:P}),this.cleanupDuplicatePairings(P)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;bi(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Bt("session_approve",o),{})):Gr(s)&&(await this.client.session.delete(t,Wt("USER_DISCONNECTED")),this.events.emit(Bt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidUpdate(Lr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:o})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;bi(s)?this.events.emit(Bt("session_update",o),{}):Gr(s)&&this.events.emit(Bt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Wr(Lo)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;bi(s)?this.events.emit(Bt("session_extend",o),{}):Gr(s)&&this.events.emit(Bt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{bi(s)?this.events.emit(Bt("session_ping",o),{}):Gr(s)&&this.events.emit(Bt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(At.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(Lr({topic:t},c)),await this.setPendingSessionRequest({id:o,topic:t,params:c}),this.addRequestToQueue({id:o,topic:t,params:c}),await this.processRequestQueue()}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;bi(s)?this.events.emit(Bt("session_request",o),{result:s.result}):Gr(s)&&this.events.emit(Bt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidEmit(Lr({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c})}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.addRequestToQueue=t=>{this.requestQueue.requests.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.requestQueue.state=ds.idle,this.processRequestQueue()},pe.toMiliseconds(this.requestQueueDelay))},this.processRequestQueue=async()=>{if(this.requestQueue.state===ds.active){this.client.logger.info("session request queue is already active.");return}const t=this.requestQueue.requests[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{const{id:s,topic:o,params:c}=t,l=Fn(JSON.stringify({id:s,params:c})),d=this.client.session.get(o),y=await this.getVerifyContext(l,d.peer.metadata);this.requestQueue.state=ds.active,this.client.events.emit("session_request",{id:s,topic:o,params:c,verifyContext:y})}catch(s){this.client.logger.error(s)}},this.isValidConnect=async t=>{if(!mr(t)){const{message:y}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(y)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,relays:d}=t;if(ar(s)||await this.isValidPairingTopic(s),!x6(d,!0)){const{message:y}=ce("MISSING_OR_INVALID",`connect() relays: ${d}`);throw new Error(y)}!ar(o)&&ys(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ar(c)&&ys(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ar(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=O6(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!mr(t))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(s);const d=this.client.proposal.get(s),y=Vo(o,"approve()");if(y)throw new Error(y.message);const g=td(d.requiredNamespaces,o,"approve()");if(g)throw new Error(g.message);if(!Gt(c,!0)){const{message:_}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(_)}ar(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!mr(t)){const{message:c}=ce("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!P6(o)){const{message:c}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!mr(t)){const{message:g}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(g)}const{relay:s,controller:o,namespaces:c,expiry:l}=t;if(!Gp(s)){const{message:g}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const d=b6(o,"onSessionSettleRequest()");if(d)throw new Error(d.message);const y=Vo(c,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(Ri(l)){const{message:g}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async t=>{if(!mr(t)){const{message:y}=ce("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(y)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),l=Vo(o,"update()");if(l)throw new Error(l.message);const d=td(c.requiredNamespaces,o,"update()");if(d)throw new Error(d.message)},this.isValidExtend=async t=>{if(!mr(t)){const{message:o}=ce("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!mr(t)){const{message:y}=ce("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(y)}const{topic:s,request:o,chainId:c,expiry:l}=t;await this.isValidSessionTopic(s);const{namespaces:d}=this.client.session.get(s);if(!ed(d,c)){const{message:y}=ce("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(y)}if(!C6(o)){const{message:y}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(y)}if(!R6(d,c,o.method)){const{message:y}=ce("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(y)}if(l&&!j6(l,tu)){const{message:y}=ce("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${tu.min} and ${tu.max}`);throw new Error(y)}},this.isValidRespond=async t=>{if(!mr(t)){const{message:c}=ce("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!T6(o)){const{message:c}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!mr(t)){const{message:o}=ce("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!mr(t)){const{message:d}=ce("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(d)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!ed(l,c)){const{message:d}=ce("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(d)}if(!N6(o)){const{message:d}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}if(!U6(l,c,o.name)){const{message:d}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidDisconnect=async t=>{if(!mr(t)){const{message:o}=ce("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c,o.verified.validation=c===s.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Gt(o,!1)){const{message:c}=ce("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(At.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);eh(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):pa(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Mr.expired,async e=>{const{topic:t,id:s}=kp(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ce("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ri(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Ri(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ce("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:t}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!A6(e)){const{message:t}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Ri(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class KI extends ya{constructor(e,t){super(e,t,RI,ih),this.core=e,this.logger=t}}class VI extends ya{constructor(e,t){super(e,t,UI,ih),this.core=e,this.logger=t}}class kI extends ya{constructor(e,t){super(e,t,$I,ih,s=>s.id),this.core=e,this.logger=t}}let WI=class bg extends eD{constructor(e){super(e),this.protocol=yg,this.version=mg,this.name=eu.name,this.events=new Or.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||eu.name,this.metadata=(e==null?void 0:e.metadata)||VD();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ha(fa({level:(e==null?void 0:e.logger)||eu.logger}));this.core=(e==null?void 0:e.core)||new TI(e),this.logger=Ar(t,this.name),this.session=new VI(this.core,this.logger),this.proposal=new KI(this.core,this.logger),this.pendingRequest=new kI(this.core,this.logger),this.engine=new HI(this)}static async init(e){const t=new bg(e);return await t.initialize(),t}get context(){return _r(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var nh={};Object.defineProperty(nh,"__esModule",{value:!0});nh.getWindowMetadata=void 0;const Td=st;function GI(){let i,e;try{i=Td.getDocumentOrThrow(),e=Td.getLocationOrThrow()}catch{return null}function t(){const O=i.getElementsByTagName("link"),T=[];for(let C=0;C<O.length;C++){const P=O[C],H=P.getAttribute("rel");if(H&&H.toLowerCase().indexOf("icon")>-1){const L=P.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let Y=e.protocol+"//"+e.host;if(L.indexOf("/")===0)Y+=L;else{const p=e.pathname.split("/");p.pop();const w=p.join("/");Y+=w+"/"+L}T.push(Y)}else if(L.indexOf("//")===0){const Y=e.protocol+L;T.push(Y)}else T.push(L)}}return T}function s(...O){const T=i.getElementsByTagName("meta");for(let C=0;C<T.length;C++){const P=T[C],H=["itemprop","property","name"].map(L=>P.getAttribute(L)).filter(L=>L?O.includes(L):!1);if(H.length&&H){const L=P.getAttribute("content");if(L)return L}}return""}function o(){let O=s("name","og:site_name","og:title","twitter:title");return O||(O=i.title),O}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),d=c(),y=e.origin,g=t();return{description:d,url:y,icons:g,name:l}}nh.getWindowMetadata=GI;var YI={};(function(i){const e=Mu,t=qu,s=Bu,o=zu,c=p=>p==null,l=Symbol("encodeFragmentIdentifier");function d(p){switch(p.arrayFormat){case"index":return w=>(v,b)=>{const D=v.length;return b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,[_(w,p),"[",D,"]"].join("")]:[...v,[_(w,p),"[",_(D,p),"]=",_(b,p)].join("")]};case"bracket":return w=>(v,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,[_(w,p),"[]"].join("")]:[...v,[_(w,p),"[]=",_(b,p)].join("")];case"colon-list-separator":return w=>(v,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,[_(w,p),":list="].join("")]:[...v,[_(w,p),":list=",_(b,p)].join("")];case"comma":case"separator":case"bracket-separator":{const w=p.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:(D=D===null?"":D,b.length===0?[[_(v,p),w,_(D,p)].join("")]:[[b,_(D,p)].join(p.arrayFormatSeparator)])}default:return w=>(v,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?v:b===null?[...v,_(w,p)]:[...v,[_(w,p),"=",_(b,p)].join("")]}}function y(p){let w;switch(p.arrayFormat){case"index":return(v,b,D)=>{if(w=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!w){D[v]=b;return}D[v]===void 0&&(D[v]={}),D[v][w[1]]=b};case"bracket":return(v,b,D)=>{if(w=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!w){D[v]=b;return}if(D[v]===void 0){D[v]=[b];return}D[v]=[].concat(D[v],b)};case"colon-list-separator":return(v,b,D)=>{if(w=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!w){D[v]=b;return}if(D[v]===void 0){D[v]=[b];return}D[v]=[].concat(D[v],b)};case"comma":case"separator":return(v,b,D)=>{const u=typeof b=="string"&&b.includes(p.arrayFormatSeparator),E=typeof b=="string"&&!u&&O(b,p).includes(p.arrayFormatSeparator);b=E?O(b,p):b;const k=u||E?b.split(p.arrayFormatSeparator).map(ne=>O(ne,p)):b===null?b:O(b,p);D[v]=k};case"bracket-separator":return(v,b,D)=>{const u=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!u){D[v]=b&&O(b,p);return}const E=b===null?[]:b.split(p.arrayFormatSeparator).map(k=>O(k,p));if(D[v]===void 0){D[v]=E;return}D[v]=[].concat(D[v],E)};default:return(v,b,D)=>{if(D[v]===void 0){D[v]=b;return}D[v]=[].concat(D[v],b)}}}function g(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(p,w){return w.encode?w.strict?e(p):encodeURIComponent(p):p}function O(p,w){return w.decode?t(p):p}function T(p){return Array.isArray(p)?p.sort():typeof p=="object"?T(Object.keys(p)).sort((w,v)=>Number(w)-Number(v)).map(w=>p[w]):p}function C(p){const w=p.indexOf("#");return w!==-1&&(p=p.slice(0,w)),p}function P(p){let w="";const v=p.indexOf("#");return v!==-1&&(w=p.slice(v)),w}function H(p){p=C(p);const w=p.indexOf("?");return w===-1?"":p.slice(w+1)}function L(p,w){return w.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):w.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function Y(p,w){w=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},w),g(w.arrayFormatSeparator);const v=y(w),b=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return b;for(const D of p.split("&")){if(D==="")continue;let[u,E]=s(w.decode?D.replace(/\+/g," "):D,"=");E=E===void 0?null:["comma","separator","bracket-separator"].includes(w.arrayFormat)?E:O(E,w),v(O(u,w),E,b)}for(const D of Object.keys(b)){const u=b[D];if(typeof u=="object"&&u!==null)for(const E of Object.keys(u))u[E]=L(u[E],w);else b[D]=L(u,w)}return w.sort===!1?b:(w.sort===!0?Object.keys(b).sort():Object.keys(b).sort(w.sort)).reduce((D,u)=>{const E=b[u];return E&&typeof E=="object"&&!Array.isArray(E)?D[u]=T(E):D[u]=E,D},Object.create(null))}i.extract=H,i.parse=Y,i.stringify=(p,w)=>{if(!p)return"";w=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},w),g(w.arrayFormatSeparator);const v=E=>w.skipNull&&c(p[E])||w.skipEmptyString&&p[E]==="",b=d(w),D={};for(const E of Object.keys(p))v(E)||(D[E]=p[E]);const u=Object.keys(D);return w.sort!==!1&&u.sort(w.sort),u.map(E=>{const k=p[E];return k===void 0?"":k===null?_(E,w):Array.isArray(k)?k.length===0&&w.arrayFormat==="bracket-separator"?_(E,w)+"[]":k.reduce(b(E),[]).join("&"):_(E,w)+"="+_(k,w)}).filter(E=>E.length>0).join("&")},i.parseUrl=(p,w)=>{w=Object.assign({decode:!0},w);const[v,b]=s(p,"#");return Object.assign({url:v.split("?")[0]||"",query:Y(H(p),w)},w&&w.parseFragmentIdentifier&&b?{fragmentIdentifier:O(b,w)}:{})},i.stringifyUrl=(p,w)=>{w=Object.assign({encode:!0,strict:!0,[l]:!0},w);const v=C(p.url).split("?")[0]||"",b=i.extract(p.url),D=i.parse(b,{sort:!1}),u=Object.assign(D,p.query);let E=i.stringify(u,w);E&&(E=`?${E}`);let k=P(p.url);return p.fragmentIdentifier&&(k=`#${w[l]?_(p.fragmentIdentifier,w):p.fragmentIdentifier}`),`${v}${E}${k}`},i.pick=(p,w,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[l]:!1},v);const{url:b,query:D,fragmentIdentifier:u}=i.parseUrl(p,v);return i.stringifyUrl({url:b,query:o(D,w),fragmentIdentifier:u},v)},i.exclude=(p,w,v)=>{const b=Array.isArray(w)?D=>!w.includes(D):(D,u)=>!w(D,u);return i.pick(p,b,v)}})(YI);function iu(i=[],e=[]){return[...new Set([...i,...e])]}function sh(i){return i.includes(":")}function ko(i){return sh(i)?i.split(":")[0]:i}const JI={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Nd(i,e){const{message:t,code:s}=JI[i];return{message:e?`${t} ${e}`:t,code:s}}function Rd(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function QI(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}var Ou={exports:{}};(function(i,e){var t=typeof self<"u"?self:Yr,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(l){var d={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function y(A){return A&&DataView.prototype.isPrototypeOf(A)}if(d.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=ArrayBuffer.isView||function(A){return A&&g.indexOf(Object.prototype.toString.call(A))>-1};function O(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(A))throw new TypeError("Invalid character in header field name");return A.toLowerCase()}function T(A){return typeof A!="string"&&(A=String(A)),A}function C(A){var U={next:function(){var ee=A.shift();return{done:ee===void 0,value:ee}}};return d.iterable&&(U[Symbol.iterator]=function(){return U}),U}function P(A){this.map={},A instanceof P?A.forEach(function(U,ee){this.append(ee,U)},this):Array.isArray(A)?A.forEach(function(U){this.append(U[0],U[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(U){this.append(U,A[U])},this)}P.prototype.append=function(A,U){A=O(A),U=T(U);var ee=this.map[A];this.map[A]=ee?ee+", "+U:U},P.prototype.delete=function(A){delete this.map[O(A)]},P.prototype.get=function(A){return A=O(A),this.has(A)?this.map[A]:null},P.prototype.has=function(A){return this.map.hasOwnProperty(O(A))},P.prototype.set=function(A,U){this.map[O(A)]=T(U)},P.prototype.forEach=function(A,U){for(var ee in this.map)this.map.hasOwnProperty(ee)&&A.call(U,this.map[ee],ee,this)},P.prototype.keys=function(){var A=[];return this.forEach(function(U,ee){A.push(ee)}),C(A)},P.prototype.values=function(){var A=[];return this.forEach(function(U){A.push(U)}),C(A)},P.prototype.entries=function(){var A=[];return this.forEach(function(U,ee){A.push([ee,U])}),C(A)},d.iterable&&(P.prototype[Symbol.iterator]=P.prototype.entries);function H(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function L(A){return new Promise(function(U,ee){A.onload=function(){U(A.result)},A.onerror=function(){ee(A.error)}})}function Y(A){var U=new FileReader,ee=L(U);return U.readAsArrayBuffer(A),ee}function p(A){var U=new FileReader,ee=L(U);return U.readAsText(A),ee}function w(A){for(var U=new Uint8Array(A),ee=new Array(U.length),X=0;X<U.length;X++)ee[X]=String.fromCharCode(U[X]);return ee.join("")}function v(A){if(A.slice)return A.slice(0);var U=new Uint8Array(A.byteLength);return U.set(new Uint8Array(A)),U.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(A){this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:d.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:d.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():d.arrayBuffer&&d.blob&&y(A)?(this._bodyArrayBuffer=v(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||_(A))?this._bodyArrayBuffer=v(A):this._bodyText=A=Object.prototype.toString.call(A):this._bodyText="",this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var A=H(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?H(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Y)}),this.text=function(){var A=H(this);if(A)return A;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(A){var U=A.toUpperCase();return D.indexOf(U)>-1?U:A}function E(A,U){U=U||{};var ee=U.body;if(A instanceof E){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,U.headers||(this.headers=new P(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!ee&&A._bodyInit!=null&&(ee=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=U.credentials||this.credentials||"same-origin",(U.headers||!this.headers)&&(this.headers=new P(U.headers)),this.method=u(U.method||this.method||"GET"),this.mode=U.mode||this.mode||null,this.signal=U.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function k(A){var U=new FormData;return A.trim().split("&").forEach(function(ee){if(ee){var X=ee.split("="),V=X.shift().replace(/\+/g," "),W=X.join("=").replace(/\+/g," ");U.append(decodeURIComponent(V),decodeURIComponent(W))}}),U}function ne(A){var U=new P,ee=A.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(X){var V=X.split(":"),W=V.shift().trim();if(W){var te=V.join(":").trim();U.append(W,te)}}),U}b.call(E.prototype);function ue(A,U){U||(U={}),this.type="default",this.status=U.status===void 0?200:U.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in U?U.statusText:"OK",this.headers=new P(U.headers),this.url=U.url||"",this._initBody(A)}b.call(ue.prototype),ue.prototype.clone=function(){return new ue(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new P(this.headers),url:this.url})},ue.error=function(){var A=new ue(null,{status:0,statusText:""});return A.type="error",A};var ye=[301,302,303,307,308];ue.redirect=function(A,U){if(ye.indexOf(U)===-1)throw new RangeError("Invalid status code");return new ue(null,{status:U,headers:{location:A}})},l.DOMException=c.DOMException;try{new l.DOMException}catch{l.DOMException=function(U,ee){this.message=U,this.name=ee;var X=Error(U);this.stack=X.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function me(A,U){return new Promise(function(ee,X){var V=new E(A,U);if(V.signal&&V.signal.aborted)return X(new l.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function te(){W.abort()}W.onload=function(){var ie={status:W.status,statusText:W.statusText,headers:ne(W.getAllResponseHeaders()||"")};ie.url="responseURL"in W?W.responseURL:ie.headers.get("X-Request-URL");var De="response"in W?W.response:W.responseText;ee(new ue(De,ie))},W.onerror=function(){X(new TypeError("Network request failed"))},W.ontimeout=function(){X(new TypeError("Network request failed"))},W.onabort=function(){X(new l.DOMException("Aborted","AbortError"))},W.open(V.method,V.url,!0),V.credentials==="include"?W.withCredentials=!0:V.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&d.blob&&(W.responseType="blob"),V.headers.forEach(function(ie,De){W.setRequestHeader(De,ie)}),V.signal&&(V.signal.addEventListener("abort",te),W.onreadystatechange=function(){W.readyState===4&&V.signal.removeEventListener("abort",te)}),W.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return me.polyfill=!0,c.fetch||(c.fetch=me,c.Headers=P,c.Request=E,c.Response=ue),l.Headers=P,l.Request=E,l.Response=ue,l.fetch=me,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,i.exports=e})(Ou,Ou.exports);var XI=Ou.exports;const Ud=ta(XI);var ZI=Object.defineProperty,e5=Object.defineProperties,t5=Object.getOwnPropertyDescriptors,Fd=Object.getOwnPropertySymbols,r5=Object.prototype.hasOwnProperty,i5=Object.prototype.propertyIsEnumerable,$d=(i,e,t)=>e in i?ZI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,jd=(i,e)=>{for(var t in e||(e={}))r5.call(e,t)&&$d(i,t,e[t]);if(Fd)for(var t of Fd(e))i5.call(e,t)&&$d(i,t,e[t]);return i},Ld=(i,e)=>e5(i,t5(e));const n5={Accept:"application/json","Content-Type":"application/json"},s5="POST",Md={headers:n5,method:s5},qd=10;let un=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Or.EventEmitter,this.isAvailable=!1,this.registering=!1,!od(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=nn(e),s=await(await Ud(this.url,Ld(jd({},Md),{body:t}))).json();this.onPayload({data:s})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!od(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=nn({id:1,jsonrpc:"2.0",method:"test",params:[]});await Ud(e,Ld(jd({},Md),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Is(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=da(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Qp(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>qd&&this.events.setMaxListeners(qd)}};const Bd="error",o5="wss://relay.walletconnect.com",a5="wc",c5="universal_provider",zd=`${a5}@2:${c5}:`,u5="https://rpc.walletconnect.com/v1",Li={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",d="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",g=500,_="__lodash_placeholder__",O=1,T=2,C=4,P=1,H=2,L=1,Y=2,p=4,w=8,v=16,b=32,D=64,u=128,E=256,k=512,ne=30,ue="...",ye=800,me=16,A=1,U=2,ee=3,X=1/0,V=9007199254740991,W=17976931348623157e292,te=0/0,ie=4294967295,De=ie-1,oe=ie>>>1,Se=[["ary",u],["bind",L],["bindKey",Y],["curry",w],["curryRight",v],["flip",k],["partial",b],["partialRight",D],["rearg",E]],fe="[object Arguments]",Ce="[object Array]",z="[object AsyncFunction]",B="[object Boolean]",$="[object Date]",f="[object DOMException]",R="[object Error]",se="[object Function]",he="[object GeneratorFunction]",Ee="[object Map]",ze="[object Number]",Ve="[object Null]",je="[object Object]",pt="[object Promise]",gt="[object Proxy]",Me="[object RegExp]",Ie="[object Set]",Re="[object String]",Ue="[object Symbol]",qe="[object Undefined]",xe="[object WeakMap]",Fe="[object WeakSet]",we="[object ArrayBuffer]",Ae="[object DataView]",He="[object Float32Array]",Oe="[object Float64Array]",ke="[object Int8Array]",Ge="[object Int16Array]",Ze="[object Int32Array]",et="[object Uint8Array]",Je="[object Uint8ClampedArray]",tr="[object Uint16Array]",hr="[object Uint32Array]",Jr=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,oi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ei=/&(?:amp|lt|gt|quot|#39);/g,Mi=/[&<>"']/g,wt=RegExp(Ei.source),yt=RegExp(Mi.source),Et=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,$t=RegExp(St.source),It=/^\s+/,Pt=/\s/,Ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ft=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ma=/[()=,{}\[\]\/\s]/,va=/\\(\\)?/g,_a=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pr=/\w*$/,ba=/^[-+]0x[0-9a-f]+$/i,wa=/^0b[01]+$/i,Ea=/^\[object .+?Constructor\]$/,Da=/^0o[0-7]+$/i,Sa=/^(?:0|[1-9]\d*)$/,ai=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hn=/($^)/,Ia=/['\n\r\u2028\u2029\\]/g,fn="\\ud800-\\udfff",Oa="\\u0300-\\u036f",xa="\\ufe20-\\ufe2f",ln="\\u20d0-\\u20ff",Cs=Oa+xa+ln,Ts="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",Aa="\\xac\\xb1\\xd7\\xf7",Pa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ca="\\u2000-\\u206f",Ta=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ns="A-Z\\xc0-\\xd6\\xd8-\\xde",Rs="\\ufe0e\\ufe0f",qi=Aa+Pa+Ca+Ta,qn="['’]",Bi="["+fn+"]",Bn="["+qi+"]",zi="["+Cs+"]",Us="\\d+",Na="["+Ts+"]",Fs="["+Br+"]",$s="[^"+fn+qi+Us+Ts+Br+Ns+"]",dn="\\ud83c[\\udffb-\\udfff]",Ra="(?:"+zi+"|"+dn+")",js="[^"+fn+"]",pn="(?:\\ud83c[\\udde6-\\uddff]){2}",Di="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+Ns+"]",Ls="\\u200d",Ms="(?:"+Fs+"|"+$s+")",Qr="(?:"+br+"|"+$s+")",qs="(?:"+qn+"(?:d|ll|m|re|s|t|ve))?",Bs="(?:"+qn+"(?:D|LL|M|RE|S|T|VE))?",zs=Ra+"?",Hs="["+Rs+"]?",Ua="(?:"+Ls+"(?:"+[js,pn,Di].join("|")+")"+Hs+zs+")*",ci="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ks="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vs=Hs+zs+Ua,gn="(?:"+[Na,pn,Di].join("|")+")"+Vs,Fa="(?:"+[js+zi+"?",zi,pn,Di,Bi].join("|")+")",zn=RegExp(qn,"g"),$a=RegExp(zi,"g"),yn=RegExp(dn+"(?="+dn+")|"+Fa+Vs,"g"),ks=RegExp([br+"?"+Fs+"+"+qs+"(?="+[Bn,br,"$"].join("|")+")",Qr+"+"+Bs+"(?="+[Bn,br+Ms,"$"].join("|")+")",br+"?"+Ms+"+"+qs,br+"+"+Bs,Ks,ci,Us,gn].join("|"),"g"),Ws=RegExp("["+Ls+fn+Cs+Rs+"]"),Hi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ja=-1,at={};at[He]=at[Oe]=at[ke]=at[Ge]=at[Ze]=at[et]=at[Je]=at[tr]=at[hr]=!0,at[fe]=at[Ce]=at[we]=at[B]=at[Ae]=at[$]=at[R]=at[se]=at[Ee]=at[ze]=at[je]=at[Me]=at[Ie]=at[Re]=at[xe]=!1;var nt={};nt[fe]=nt[Ce]=nt[we]=nt[Ae]=nt[B]=nt[$]=nt[He]=nt[Oe]=nt[ke]=nt[Ge]=nt[Ze]=nt[Ee]=nt[ze]=nt[je]=nt[Me]=nt[Ie]=nt[Re]=nt[Ue]=nt[et]=nt[Je]=nt[tr]=nt[hr]=!0,nt[R]=nt[se]=nt[xe]=!1;var x={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Te=parseInt,lt=typeof ps=="object"&&ps&&ps.Object===Object&&ps,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Qe=lt||Mt||Function("return this")(),ut=e&&!e.nodeType&&e,Ct=ut&&!0&&i&&!i.nodeType&&i,fr=Ct&&Ct.exports===ut,qt=fr&&lt.process,dt=function(){try{var M=Ct&&Ct.require&&Ct.require("util").types;return M||qt&&qt.binding&&qt.binding("util")}catch{}}(),ir=dt&&dt.isArrayBuffer,zr=dt&&dt.isDate,Cr=dt&&dt.isMap,Xr=dt&&dt.isRegExp,Hn=dt&&dt.isSet,Ki=dt&&dt.isTypedArray;function Kt(M,G,K){switch(K.length){case 0:return M.call(G);case 1:return M.call(G,K[0]);case 2:return M.call(G,K[0],K[1]);case 3:return M.call(G,K[0],K[1],K[2])}return M.apply(G,K)}function Dg(M,G,K,de){for(var Pe=-1,tt=M==null?0:M.length;++Pe<tt;){var zt=M[Pe];G(de,zt,K(zt),M)}return de}function Tr(M,G){for(var K=-1,de=M==null?0:M.length;++K<de&&G(M[K],K,M)!==!1;);return M}function Sg(M,G){for(var K=M==null?0:M.length;K--&&G(M[K],K,M)!==!1;);return M}function ch(M,G){for(var K=-1,de=M==null?0:M.length;++K<de;)if(!G(M[K],K,M))return!1;return!0}function Si(M,G){for(var K=-1,de=M==null?0:M.length,Pe=0,tt=[];++K<de;){var zt=M[K];G(zt,K,M)&&(tt[Pe++]=zt)}return tt}function Ys(M,G){var K=M==null?0:M.length;return!!K&&mn(M,G,0)>-1}function La(M,G,K){for(var de=-1,Pe=M==null?0:M.length;++de<Pe;)if(K(G,M[de]))return!0;return!1}function vt(M,G){for(var K=-1,de=M==null?0:M.length,Pe=Array(de);++K<de;)Pe[K]=G(M[K],K,M);return Pe}function Ii(M,G){for(var K=-1,de=G.length,Pe=M.length;++K<de;)M[Pe+K]=G[K];return M}function Ma(M,G,K,de){var Pe=-1,tt=M==null?0:M.length;for(de&&tt&&(K=M[++Pe]);++Pe<tt;)K=G(K,M[Pe],Pe,M);return K}function Ig(M,G,K,de){var Pe=M==null?0:M.length;for(de&&Pe&&(K=M[--Pe]);Pe--;)K=G(K,M[Pe],Pe,M);return K}function qa(M,G){for(var K=-1,de=M==null?0:M.length;++K<de;)if(G(M[K],K,M))return!0;return!1}var Og=Ba("length");function xg(M){return M.split("")}function Ag(M){return M.match(Lt)||[]}function uh(M,G,K){var de;return K(M,function(Pe,tt,zt){if(G(Pe,tt,zt))return de=tt,!1}),de}function Js(M,G,K,de){for(var Pe=M.length,tt=K+(de?1:-1);de?tt--:++tt<Pe;)if(G(M[tt],tt,M))return tt;return-1}function mn(M,G,K){return G===G?qg(M,G,K):Js(M,hh,K)}function Pg(M,G,K,de){for(var Pe=K-1,tt=M.length;++Pe<tt;)if(de(M[Pe],G))return Pe;return-1}function hh(M){return M!==M}function fh(M,G){var K=M==null?0:M.length;return K?Ha(M,G)/K:te}function Ba(M){return function(G){return G==null?t:G[M]}}function za(M){return function(G){return M==null?t:M[G]}}function lh(M,G,K,de,Pe){return Pe(M,function(tt,zt,ht){K=de?(de=!1,tt):G(K,tt,zt,ht)}),K}function Cg(M,G){var K=M.length;for(M.sort(G);K--;)M[K]=M[K].value;return M}function Ha(M,G){for(var K,de=-1,Pe=M.length;++de<Pe;){var tt=G(M[de]);tt!==t&&(K=K===t?tt:K+tt)}return K}function Ka(M,G){for(var K=-1,de=Array(M);++K<M;)de[K]=G(K);return de}function Tg(M,G){return vt(G,function(K){return[K,M[K]]})}function dh(M){return M&&M.slice(0,mh(M)+1).replace(It,"")}function wr(M){return function(G){return M(G)}}function Va(M,G){return vt(G,function(K){return M[K]})}function Kn(M,G){return M.has(G)}function ph(M,G){for(var K=-1,de=M.length;++K<de&&mn(G,M[K],0)>-1;);return K}function gh(M,G){for(var K=M.length;K--&&mn(G,M[K],0)>-1;);return K}function Ng(M,G){for(var K=M.length,de=0;K--;)M[K]===G&&++de;return de}var Rg=za(x),Ug=za(j);function Fg(M){return"\\"+le[M]}function $g(M,G){return M==null?t:M[G]}function vn(M){return Ws.test(M)}function jg(M){return Hi.test(M)}function Lg(M){for(var G,K=[];!(G=M.next()).done;)K.push(G.value);return K}function ka(M){var G=-1,K=Array(M.size);return M.forEach(function(de,Pe){K[++G]=[Pe,de]}),K}function yh(M,G){return function(K){return M(G(K))}}function Oi(M,G){for(var K=-1,de=M.length,Pe=0,tt=[];++K<de;){var zt=M[K];(zt===G||zt===_)&&(M[K]=_,tt[Pe++]=K)}return tt}function Qs(M){var G=-1,K=Array(M.size);return M.forEach(function(de){K[++G]=de}),K}function Mg(M){var G=-1,K=Array(M.size);return M.forEach(function(de){K[++G]=[de,de]}),K}function qg(M,G,K){for(var de=K-1,Pe=M.length;++de<Pe;)if(M[de]===G)return de;return-1}function Bg(M,G,K){for(var de=K+1;de--;)if(M[de]===G)return de;return de}function _n(M){return vn(M)?Hg(M):Og(M)}function Hr(M){return vn(M)?Kg(M):xg(M)}function mh(M){for(var G=M.length;G--&&Pt.test(M.charAt(G)););return G}var zg=za(Z);function Hg(M){for(var G=yn.lastIndex=0;yn.test(M);)++G;return G}function Kg(M){return M.match(yn)||[]}function Vg(M){return M.match(ks)||[]}var kg=function M(G){G=G==null?Qe:bn.defaults(Qe.Object(),G,bn.pick(Qe,Gs));var K=G.Array,de=G.Date,Pe=G.Error,tt=G.Function,zt=G.Math,ht=G.Object,Wa=G.RegExp,Wg=G.String,Nr=G.TypeError,Xs=K.prototype,Gg=tt.prototype,wn=ht.prototype,Zs=G["__core-js_shared__"],eo=Gg.toString,it=wn.hasOwnProperty,Yg=0,vh=function(){var r=/[^.]+$/.exec(Zs&&Zs.keys&&Zs.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),to=wn.toString,Jg=eo.call(ht),Qg=Qe._,Xg=Wa("^"+eo.call(it).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ro=fr?G.Buffer:t,xi=G.Symbol,io=G.Uint8Array,_h=ro?ro.allocUnsafe:t,no=yh(ht.getPrototypeOf,ht),bh=ht.create,wh=wn.propertyIsEnumerable,so=Xs.splice,Eh=xi?xi.isConcatSpreadable:t,Vn=xi?xi.iterator:t,Vi=xi?xi.toStringTag:t,oo=function(){try{var r=Ji(ht,"defineProperty");return r({},"",{}),r}catch{}}(),Zg=G.clearTimeout!==Qe.clearTimeout&&G.clearTimeout,e0=de&&de.now!==Qe.Date.now&&de.now,t0=G.setTimeout!==Qe.setTimeout&&G.setTimeout,ao=zt.ceil,co=zt.floor,Ga=ht.getOwnPropertySymbols,r0=ro?ro.isBuffer:t,Dh=G.isFinite,i0=Xs.join,n0=yh(ht.keys,ht),Ht=zt.max,Xt=zt.min,s0=de.now,o0=G.parseInt,Sh=zt.random,a0=Xs.reverse,Ya=Ji(G,"DataView"),kn=Ji(G,"Map"),Ja=Ji(G,"Promise"),En=Ji(G,"Set"),Wn=Ji(G,"WeakMap"),Gn=Ji(ht,"create"),uo=Wn&&new Wn,Dn={},c0=Qi(Ya),u0=Qi(kn),h0=Qi(Ja),f0=Qi(En),l0=Qi(Wn),ho=xi?xi.prototype:t,Yn=ho?ho.valueOf:t,Ih=ho?ho.toString:t;function S(r){if(xt(r)&&!Ne(r)&&!(r instanceof Ye)){if(r instanceof Rr)return r;if(it.call(r,"__wrapped__"))return xf(r)}return new Rr(r)}var Sn=function(){function r(){}return function(n){if(!bt(n))return{};if(bh)return bh(n);r.prototype=n;var a=new r;return r.prototype=t,a}}();function fo(){}function Rr(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}S.templateSettings={escape:Et,evaluate:Dt,interpolate:_t,variable:"",imports:{_:S}},S.prototype=fo.prototype,S.prototype.constructor=S,Rr.prototype=Sn(fo.prototype),Rr.prototype.constructor=Rr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function d0(){var r=new Ye(this.__wrapped__);return r.__actions__=lr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=lr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=lr(this.__views__),r}function p0(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function g0(){var r=this.__wrapped__.value(),n=this.__dir__,a=Ne(r),h=n<0,m=a?r.length:0,I=xy(0,m,this.__views__),N=I.start,F=I.end,q=F-N,J=h?F:N-1,Q=this.__iteratees__,re=Q.length,ae=0,ge=Xt(q,this.__takeCount__);if(!a||!h&&m==q&&ge==q)return Yh(r,this.__actions__);var _e=[];e:for(;q--&&ae<ge;){J+=n;for(var Be=-1,be=r[J];++Be<re;){var We=Q[Be],Xe=We.iteratee,Sr=We.type,or=Xe(be);if(Sr==U)be=or;else if(!or){if(Sr==A)continue e;break e}}_e[ae++]=be}return _e}Ye.prototype=Sn(fo.prototype),Ye.prototype.constructor=Ye;function ki(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function y0(){this.__data__=Gn?Gn(null):{},this.size=0}function m0(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}function v0(r){var n=this.__data__;if(Gn){var a=n[r];return a===y?t:a}return it.call(n,r)?n[r]:t}function _0(r){var n=this.__data__;return Gn?n[r]!==t:it.call(n,r)}function b0(r,n){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=Gn&&n===t?y:n,this}ki.prototype.clear=y0,ki.prototype.delete=m0,ki.prototype.get=v0,ki.prototype.has=_0,ki.prototype.set=b0;function ui(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function w0(){this.__data__=[],this.size=0}function E0(r){var n=this.__data__,a=lo(n,r);if(a<0)return!1;var h=n.length-1;return a==h?n.pop():so.call(n,a,1),--this.size,!0}function D0(r){var n=this.__data__,a=lo(n,r);return a<0?t:n[a][1]}function S0(r){return lo(this.__data__,r)>-1}function I0(r,n){var a=this.__data__,h=lo(a,r);return h<0?(++this.size,a.push([r,n])):a[h][1]=n,this}ui.prototype.clear=w0,ui.prototype.delete=E0,ui.prototype.get=D0,ui.prototype.has=S0,ui.prototype.set=I0;function hi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function O0(){this.size=0,this.__data__={hash:new ki,map:new(kn||ui),string:new ki}}function x0(r){var n=Io(this,r).delete(r);return this.size-=n?1:0,n}function A0(r){return Io(this,r).get(r)}function P0(r){return Io(this,r).has(r)}function C0(r,n){var a=Io(this,r),h=a.size;return a.set(r,n),this.size+=a.size==h?0:1,this}hi.prototype.clear=O0,hi.prototype.delete=x0,hi.prototype.get=A0,hi.prototype.has=P0,hi.prototype.set=C0;function Wi(r){var n=-1,a=r==null?0:r.length;for(this.__data__=new hi;++n<a;)this.add(r[n])}function T0(r){return this.__data__.set(r,y),this}function N0(r){return this.__data__.has(r)}Wi.prototype.add=Wi.prototype.push=T0,Wi.prototype.has=N0;function Kr(r){var n=this.__data__=new ui(r);this.size=n.size}function R0(){this.__data__=new ui,this.size=0}function U0(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}function F0(r){return this.__data__.get(r)}function $0(r){return this.__data__.has(r)}function j0(r,n){var a=this.__data__;if(a instanceof ui){var h=a.__data__;if(!kn||h.length<o-1)return h.push([r,n]),this.size=++a.size,this;a=this.__data__=new hi(h)}return a.set(r,n),this.size=a.size,this}Kr.prototype.clear=R0,Kr.prototype.delete=U0,Kr.prototype.get=F0,Kr.prototype.has=$0,Kr.prototype.set=j0;function Oh(r,n){var a=Ne(r),h=!a&&Xi(r),m=!a&&!h&&Ni(r),I=!a&&!h&&!m&&An(r),N=a||h||m||I,F=N?Ka(r.length,Wg):[],q=F.length;for(var J in r)(n||it.call(r,J))&&!(N&&(J=="length"||m&&(J=="offset"||J=="parent")||I&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||pi(J,q)))&&F.push(J);return F}function xh(r){var n=r.length;return n?r[ac(0,n-1)]:t}function L0(r,n){return Oo(lr(r),Gi(n,0,r.length))}function M0(r){return Oo(lr(r))}function Qa(r,n,a){(a!==t&&!Vr(r[n],a)||a===t&&!(n in r))&&fi(r,n,a)}function Jn(r,n,a){var h=r[n];(!(it.call(r,n)&&Vr(h,a))||a===t&&!(n in r))&&fi(r,n,a)}function lo(r,n){for(var a=r.length;a--;)if(Vr(r[a][0],n))return a;return-1}function q0(r,n,a,h){return Ai(r,function(m,I,N){n(h,m,a(m),N)}),h}function Ah(r,n){return r&&ei(n,Vt(n),r)}function B0(r,n){return r&&ei(n,pr(n),r)}function fi(r,n,a){n=="__proto__"&&oo?oo(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}function Xa(r,n){for(var a=-1,h=n.length,m=K(h),I=r==null;++a<h;)m[a]=I?t:Nc(r,n[a]);return m}function Gi(r,n,a){return r===r&&(a!==t&&(r=r<=a?r:a),n!==t&&(r=r>=n?r:n)),r}function Ur(r,n,a,h,m,I){var N,F=n&O,q=n&T,J=n&C;if(a&&(N=m?a(r,h,m,I):a(r)),N!==t)return N;if(!bt(r))return r;var Q=Ne(r);if(Q){if(N=Py(r),!F)return lr(r,N)}else{var re=Zt(r),ae=re==se||re==he;if(Ni(r))return Xh(r,F);if(re==je||re==fe||ae&&!m){if(N=q||ae?{}:vf(r),!F)return q?vy(r,B0(N,r)):my(r,Ah(N,r))}else{if(!nt[re])return m?r:{};N=Cy(r,re,F)}}I||(I=new Kr);var ge=I.get(r);if(ge)return ge;I.set(r,N),Wf(r)?r.forEach(function(be){N.add(Ur(be,n,a,be,r,I))}):Vf(r)&&r.forEach(function(be,We){N.set(We,Ur(be,n,a,We,r,I))});var _e=J?q?vc:mc:q?pr:Vt,Be=Q?t:_e(r);return Tr(Be||r,function(be,We){Be&&(We=be,be=r[We]),Jn(N,We,Ur(be,n,a,We,r,I))}),N}function z0(r){var n=Vt(r);return function(a){return Ph(a,r,n)}}function Ph(r,n,a){var h=a.length;if(r==null)return!h;for(r=ht(r);h--;){var m=a[h],I=n[m],N=r[m];if(N===t&&!(m in r)||!I(N))return!1}return!0}function Ch(r,n,a){if(typeof r!="function")throw new Nr(l);return is(function(){r.apply(t,a)},n)}function Qn(r,n,a,h){var m=-1,I=Ys,N=!0,F=r.length,q=[],J=n.length;if(!F)return q;a&&(n=vt(n,wr(a))),h?(I=La,N=!1):n.length>=o&&(I=Kn,N=!1,n=new Wi(n));e:for(;++m<F;){var Q=r[m],re=a==null?Q:a(Q);if(Q=h||Q!==0?Q:0,N&&re===re){for(var ae=J;ae--;)if(n[ae]===re)continue e;q.push(Q)}else I(n,re,h)||q.push(Q)}return q}var Ai=nf(Zr),Th=nf(ec,!0);function H0(r,n){var a=!0;return Ai(r,function(h,m,I){return a=!!n(h,m,I),a}),a}function po(r,n,a){for(var h=-1,m=r.length;++h<m;){var I=r[h],N=n(I);if(N!=null&&(F===t?N===N&&!Dr(N):a(N,F)))var F=N,q=I}return q}function K0(r,n,a,h){var m=r.length;for(a=Le(a),a<0&&(a=-a>m?0:m+a),h=h===t||h>m?m:Le(h),h<0&&(h+=m),h=a>h?0:Yf(h);a<h;)r[a++]=n;return r}function Nh(r,n){var a=[];return Ai(r,function(h,m,I){n(h,m,I)&&a.push(h)}),a}function Yt(r,n,a,h,m){var I=-1,N=r.length;for(a||(a=Ny),m||(m=[]);++I<N;){var F=r[I];n>0&&a(F)?n>1?Yt(F,n-1,a,h,m):Ii(m,F):h||(m[m.length]=F)}return m}var Za=sf(),Rh=sf(!0);function Zr(r,n){return r&&Za(r,n,Vt)}function ec(r,n){return r&&Rh(r,n,Vt)}function go(r,n){return Si(n,function(a){return gi(r[a])})}function Yi(r,n){n=Ci(n,r);for(var a=0,h=n.length;r!=null&&a<h;)r=r[ti(n[a++])];return a&&a==h?r:t}function Uh(r,n,a){var h=n(r);return Ne(r)?h:Ii(h,a(r))}function nr(r){return r==null?r===t?qe:Ve:Vi&&Vi in ht(r)?Oy(r):My(r)}function tc(r,n){return r>n}function V0(r,n){return r!=null&&it.call(r,n)}function k0(r,n){return r!=null&&n in ht(r)}function W0(r,n,a){return r>=Xt(n,a)&&r<Ht(n,a)}function rc(r,n,a){for(var h=a?La:Ys,m=r[0].length,I=r.length,N=I,F=K(I),q=1/0,J=[];N--;){var Q=r[N];N&&n&&(Q=vt(Q,wr(n))),q=Xt(Q.length,q),F[N]=!a&&(n||m>=120&&Q.length>=120)?new Wi(N&&Q):t}Q=r[0];var re=-1,ae=F[0];e:for(;++re<m&&J.length<q;){var ge=Q[re],_e=n?n(ge):ge;if(ge=a||ge!==0?ge:0,!(ae?Kn(ae,_e):h(J,_e,a))){for(N=I;--N;){var Be=F[N];if(!(Be?Kn(Be,_e):h(r[N],_e,a)))continue e}ae&&ae.push(_e),J.push(ge)}}return J}function G0(r,n,a,h){return Zr(r,function(m,I,N){n(h,a(m),I,N)}),h}function Xn(r,n,a){n=Ci(n,r),r=Ef(r,n);var h=r==null?r:r[ti($r(n))];return h==null?t:Kt(h,r,a)}function Fh(r){return xt(r)&&nr(r)==fe}function Y0(r){return xt(r)&&nr(r)==we}function J0(r){return xt(r)&&nr(r)==$}function Zn(r,n,a,h,m){return r===n?!0:r==null||n==null||!xt(r)&&!xt(n)?r!==r&&n!==n:Q0(r,n,a,h,Zn,m)}function Q0(r,n,a,h,m,I){var N=Ne(r),F=Ne(n),q=N?Ce:Zt(r),J=F?Ce:Zt(n);q=q==fe?je:q,J=J==fe?je:J;var Q=q==je,re=J==je,ae=q==J;if(ae&&Ni(r)){if(!Ni(n))return!1;N=!0,Q=!1}if(ae&&!Q)return I||(I=new Kr),N||An(r)?gf(r,n,a,h,m,I):Sy(r,n,q,a,h,m,I);if(!(a&P)){var ge=Q&&it.call(r,"__wrapped__"),_e=re&&it.call(n,"__wrapped__");if(ge||_e){var Be=ge?r.value():r,be=_e?n.value():n;return I||(I=new Kr),m(Be,be,a,h,I)}}return ae?(I||(I=new Kr),Iy(r,n,a,h,m,I)):!1}function X0(r){return xt(r)&&Zt(r)==Ee}function ic(r,n,a,h){var m=a.length,I=m,N=!h;if(r==null)return!I;for(r=ht(r);m--;){var F=a[m];if(N&&F[2]?F[1]!==r[F[0]]:!(F[0]in r))return!1}for(;++m<I;){F=a[m];var q=F[0],J=r[q],Q=F[1];if(N&&F[2]){if(J===t&&!(q in r))return!1}else{var re=new Kr;if(h)var ae=h(J,Q,q,r,n,re);if(!(ae===t?Zn(Q,J,P|H,h,re):ae))return!1}}return!0}function $h(r){if(!bt(r)||Uy(r))return!1;var n=gi(r)?Xg:Ea;return n.test(Qi(r))}function Z0(r){return xt(r)&&nr(r)==Me}function ey(r){return xt(r)&&Zt(r)==Ie}function ty(r){return xt(r)&&No(r.length)&&!!at[nr(r)]}function jh(r){return typeof r=="function"?r:r==null?gr:typeof r=="object"?Ne(r)?qh(r[0],r[1]):Mh(r):ol(r)}function nc(r){if(!rs(r))return n0(r);var n=[];for(var a in ht(r))it.call(r,a)&&a!="constructor"&&n.push(a);return n}function ry(r){if(!bt(r))return Ly(r);var n=rs(r),a=[];for(var h in r)h=="constructor"&&(n||!it.call(r,h))||a.push(h);return a}function sc(r,n){return r<n}function Lh(r,n){var a=-1,h=dr(r)?K(r.length):[];return Ai(r,function(m,I,N){h[++a]=n(m,I,N)}),h}function Mh(r){var n=bc(r);return n.length==1&&n[0][2]?bf(n[0][0],n[0][1]):function(a){return a===r||ic(a,r,n)}}function qh(r,n){return Ec(r)&&_f(n)?bf(ti(r),n):function(a){var h=Nc(a,r);return h===t&&h===n?Rc(a,r):Zn(n,h,P|H)}}function yo(r,n,a,h,m){r!==n&&Za(n,function(I,N){if(m||(m=new Kr),bt(I))iy(r,n,N,a,yo,h,m);else{var F=h?h(Sc(r,N),I,N+"",r,n,m):t;F===t&&(F=I),Qa(r,N,F)}},pr)}function iy(r,n,a,h,m,I,N){var F=Sc(r,a),q=Sc(n,a),J=N.get(q);if(J){Qa(r,a,J);return}var Q=I?I(F,q,a+"",r,n,N):t,re=Q===t;if(re){var ae=Ne(q),ge=!ae&&Ni(q),_e=!ae&&!ge&&An(q);Q=q,ae||ge||_e?Ne(F)?Q=F:Tt(F)?Q=lr(F):ge?(re=!1,Q=Xh(q,!0)):_e?(re=!1,Q=Zh(q,!0)):Q=[]:ns(q)||Xi(q)?(Q=F,Xi(F)?Q=Jf(F):(!bt(F)||gi(F))&&(Q=vf(q))):re=!1}re&&(N.set(q,Q),m(Q,q,h,I,N),N.delete(q)),Qa(r,a,Q)}function Bh(r,n){var a=r.length;if(a)return n+=n<0?a:0,pi(n,a)?r[n]:t}function zh(r,n,a){n.length?n=vt(n,function(I){return Ne(I)?function(N){return Yi(N,I.length===1?I[0]:I)}:I}):n=[gr];var h=-1;n=vt(n,wr(ve()));var m=Lh(r,function(I,N,F){var q=vt(n,function(J){return J(I)});return{criteria:q,index:++h,value:I}});return Cg(m,function(I,N){return yy(I,N,a)})}function ny(r,n){return Hh(r,n,function(a,h){return Rc(r,h)})}function Hh(r,n,a){for(var h=-1,m=n.length,I={};++h<m;){var N=n[h],F=Yi(r,N);a(F,N)&&es(I,Ci(N,r),F)}return I}function sy(r){return function(n){return Yi(n,r)}}function oc(r,n,a,h){var m=h?Pg:mn,I=-1,N=n.length,F=r;for(r===n&&(n=lr(n)),a&&(F=vt(r,wr(a)));++I<N;)for(var q=0,J=n[I],Q=a?a(J):J;(q=m(F,Q,q,h))>-1;)F!==r&&so.call(F,q,1),so.call(r,q,1);return r}function Kh(r,n){for(var a=r?n.length:0,h=a-1;a--;){var m=n[a];if(a==h||m!==I){var I=m;pi(m)?so.call(r,m,1):hc(r,m)}}return r}function ac(r,n){return r+co(Sh()*(n-r+1))}function oy(r,n,a,h){for(var m=-1,I=Ht(ao((n-r)/(a||1)),0),N=K(I);I--;)N[h?I:++m]=r,r+=a;return N}function cc(r,n){var a="";if(!r||n<1||n>V)return a;do n%2&&(a+=r),n=co(n/2),n&&(r+=r);while(n);return a}function Ke(r,n){return Ic(wf(r,n,gr),r+"")}function ay(r){return xh(Pn(r))}function cy(r,n){var a=Pn(r);return Oo(a,Gi(n,0,a.length))}function es(r,n,a,h){if(!bt(r))return r;n=Ci(n,r);for(var m=-1,I=n.length,N=I-1,F=r;F!=null&&++m<I;){var q=ti(n[m]),J=a;if(q==="__proto__"||q==="constructor"||q==="prototype")return r;if(m!=N){var Q=F[q];J=h?h(Q,q,F):t,J===t&&(J=bt(Q)?Q:pi(n[m+1])?[]:{})}Jn(F,q,J),F=F[q]}return r}var Vh=uo?function(r,n){return uo.set(r,n),r}:gr,uy=oo?function(r,n){return oo(r,"toString",{configurable:!0,enumerable:!1,value:Fc(n),writable:!0})}:gr;function hy(r){return Oo(Pn(r))}function Fr(r,n,a){var h=-1,m=r.length;n<0&&(n=-n>m?0:m+n),a=a>m?m:a,a<0&&(a+=m),m=n>a?0:a-n>>>0,n>>>=0;for(var I=K(m);++h<m;)I[h]=r[h+n];return I}function fy(r,n){var a;return Ai(r,function(h,m,I){return a=n(h,m,I),!a}),!!a}function mo(r,n,a){var h=0,m=r==null?h:r.length;if(typeof n=="number"&&n===n&&m<=oe){for(;h<m;){var I=h+m>>>1,N=r[I];N!==null&&!Dr(N)&&(a?N<=n:N<n)?h=I+1:m=I}return m}return uc(r,n,gr,a)}function uc(r,n,a,h){var m=0,I=r==null?0:r.length;if(I===0)return 0;n=a(n);for(var N=n!==n,F=n===null,q=Dr(n),J=n===t;m<I;){var Q=co((m+I)/2),re=a(r[Q]),ae=re!==t,ge=re===null,_e=re===re,Be=Dr(re);if(N)var be=h||_e;else J?be=_e&&(h||ae):F?be=_e&&ae&&(h||!ge):q?be=_e&&ae&&!ge&&(h||!Be):ge||Be?be=!1:be=h?re<=n:re<n;be?m=Q+1:I=Q}return Xt(I,De)}function kh(r,n){for(var a=-1,h=r.length,m=0,I=[];++a<h;){var N=r[a],F=n?n(N):N;if(!a||!Vr(F,q)){var q=F;I[m++]=N===0?0:N}}return I}function Wh(r){return typeof r=="number"?r:Dr(r)?te:+r}function Er(r){if(typeof r=="string")return r;if(Ne(r))return vt(r,Er)+"";if(Dr(r))return Ih?Ih.call(r):"";var n=r+"";return n=="0"&&1/r==-X?"-0":n}function Pi(r,n,a){var h=-1,m=Ys,I=r.length,N=!0,F=[],q=F;if(a)N=!1,m=La;else if(I>=o){var J=n?null:Ey(r);if(J)return Qs(J);N=!1,m=Kn,q=new Wi}else q=n?[]:F;e:for(;++h<I;){var Q=r[h],re=n?n(Q):Q;if(Q=a||Q!==0?Q:0,N&&re===re){for(var ae=q.length;ae--;)if(q[ae]===re)continue e;n&&q.push(re),F.push(Q)}else m(q,re,a)||(q!==F&&q.push(re),F.push(Q))}return F}function hc(r,n){return n=Ci(n,r),r=Ef(r,n),r==null||delete r[ti($r(n))]}function Gh(r,n,a,h){return es(r,n,a(Yi(r,n)),h)}function vo(r,n,a,h){for(var m=r.length,I=h?m:-1;(h?I--:++I<m)&&n(r[I],I,r););return a?Fr(r,h?0:I,h?I+1:m):Fr(r,h?I+1:0,h?m:I)}function Yh(r,n){var a=r;return a instanceof Ye&&(a=a.value()),Ma(n,function(h,m){return m.func.apply(m.thisArg,Ii([h],m.args))},a)}function fc(r,n,a){var h=r.length;if(h<2)return h?Pi(r[0]):[];for(var m=-1,I=K(h);++m<h;)for(var N=r[m],F=-1;++F<h;)F!=m&&(I[m]=Qn(I[m]||N,r[F],n,a));return Pi(Yt(I,1),n,a)}function Jh(r,n,a){for(var h=-1,m=r.length,I=n.length,N={};++h<m;){var F=h<I?n[h]:t;a(N,r[h],F)}return N}function lc(r){return Tt(r)?r:[]}function dc(r){return typeof r=="function"?r:gr}function Ci(r,n){return Ne(r)?r:Ec(r,n)?[r]:Of(rt(r))}var ly=Ke;function Ti(r,n,a){var h=r.length;return a=a===t?h:a,!n&&a>=h?r:Fr(r,n,a)}var Qh=Zg||function(r){return Qe.clearTimeout(r)};function Xh(r,n){if(n)return r.slice();var a=r.length,h=_h?_h(a):new r.constructor(a);return r.copy(h),h}function pc(r){var n=new r.constructor(r.byteLength);return new io(n).set(new io(r)),n}function dy(r,n){var a=n?pc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function py(r){var n=new r.constructor(r.source,Pr.exec(r));return n.lastIndex=r.lastIndex,n}function gy(r){return Yn?ht(Yn.call(r)):{}}function Zh(r,n){var a=n?pc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function ef(r,n){if(r!==n){var a=r!==t,h=r===null,m=r===r,I=Dr(r),N=n!==t,F=n===null,q=n===n,J=Dr(n);if(!F&&!J&&!I&&r>n||I&&N&&q&&!F&&!J||h&&N&&q||!a&&q||!m)return 1;if(!h&&!I&&!J&&r<n||J&&a&&m&&!h&&!I||F&&a&&m||!N&&m||!q)return-1}return 0}function yy(r,n,a){for(var h=-1,m=r.criteria,I=n.criteria,N=m.length,F=a.length;++h<N;){var q=ef(m[h],I[h]);if(q){if(h>=F)return q;var J=a[h];return q*(J=="desc"?-1:1)}}return r.index-n.index}function tf(r,n,a,h){for(var m=-1,I=r.length,N=a.length,F=-1,q=n.length,J=Ht(I-N,0),Q=K(q+J),re=!h;++F<q;)Q[F]=n[F];for(;++m<N;)(re||m<I)&&(Q[a[m]]=r[m]);for(;J--;)Q[F++]=r[m++];return Q}function rf(r,n,a,h){for(var m=-1,I=r.length,N=-1,F=a.length,q=-1,J=n.length,Q=Ht(I-F,0),re=K(Q+J),ae=!h;++m<Q;)re[m]=r[m];for(var ge=m;++q<J;)re[ge+q]=n[q];for(;++N<F;)(ae||m<I)&&(re[ge+a[N]]=r[m++]);return re}function lr(r,n){var a=-1,h=r.length;for(n||(n=K(h));++a<h;)n[a]=r[a];return n}function ei(r,n,a,h){var m=!a;a||(a={});for(var I=-1,N=n.length;++I<N;){var F=n[I],q=h?h(a[F],r[F],F,a,r):t;q===t&&(q=r[F]),m?fi(a,F,q):Jn(a,F,q)}return a}function my(r,n){return ei(r,wc(r),n)}function vy(r,n){return ei(r,yf(r),n)}function _o(r,n){return function(a,h){var m=Ne(a)?Dg:q0,I=n?n():{};return m(a,r,ve(h,2),I)}}function In(r){return Ke(function(n,a){var h=-1,m=a.length,I=m>1?a[m-1]:t,N=m>2?a[2]:t;for(I=r.length>3&&typeof I=="function"?(m--,I):t,N&&sr(a[0],a[1],N)&&(I=m<3?t:I,m=1),n=ht(n);++h<m;){var F=a[h];F&&r(n,F,h,I)}return n})}function nf(r,n){return function(a,h){if(a==null)return a;if(!dr(a))return r(a,h);for(var m=a.length,I=n?m:-1,N=ht(a);(n?I--:++I<m)&&h(N[I],I,N)!==!1;);return a}}function sf(r){return function(n,a,h){for(var m=-1,I=ht(n),N=h(n),F=N.length;F--;){var q=N[r?F:++m];if(a(I[q],q,I)===!1)break}return n}}function _y(r,n,a){var h=n&L,m=ts(r);function I(){var N=this&&this!==Qe&&this instanceof I?m:r;return N.apply(h?a:this,arguments)}return I}function of(r){return function(n){n=rt(n);var a=vn(n)?Hr(n):t,h=a?a[0]:n.charAt(0),m=a?Ti(a,1).join(""):n.slice(1);return h[r]()+m}}function On(r){return function(n){return Ma(nl(il(n).replace(zn,"")),r,"")}}function ts(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Sn(r.prototype),h=r.apply(a,n);return bt(h)?h:a}}function by(r,n,a){var h=ts(r);function m(){for(var I=arguments.length,N=K(I),F=I,q=xn(m);F--;)N[F]=arguments[F];var J=I<3&&N[0]!==q&&N[I-1]!==q?[]:Oi(N,q);if(I-=J.length,I<a)return ff(r,n,bo,m.placeholder,t,N,J,t,t,a-I);var Q=this&&this!==Qe&&this instanceof m?h:r;return Kt(Q,this,N)}return m}function af(r){return function(n,a,h){var m=ht(n);if(!dr(n)){var I=ve(a,3);n=Vt(n),a=function(F){return I(m[F],F,m)}}var N=r(n,a,h);return N>-1?m[I?n[N]:N]:t}}function cf(r){return di(function(n){var a=n.length,h=a,m=Rr.prototype.thru;for(r&&n.reverse();h--;){var I=n[h];if(typeof I!="function")throw new Nr(l);if(m&&!N&&So(I)=="wrapper")var N=new Rr([],!0)}for(h=N?h:a;++h<a;){I=n[h];var F=So(I),q=F=="wrapper"?_c(I):t;q&&Dc(q[0])&&q[1]==(u|w|b|E)&&!q[4].length&&q[9]==1?N=N[So(q[0])].apply(N,q[3]):N=I.length==1&&Dc(I)?N[F]():N.thru(I)}return function(){var J=arguments,Q=J[0];if(N&&J.length==1&&Ne(Q))return N.plant(Q).value();for(var re=0,ae=a?n[re].apply(this,J):Q;++re<a;)ae=n[re].call(this,ae);return ae}})}function bo(r,n,a,h,m,I,N,F,q,J){var Q=n&u,re=n&L,ae=n&Y,ge=n&(w|v),_e=n&k,Be=ae?t:ts(r);function be(){for(var We=arguments.length,Xe=K(We),Sr=We;Sr--;)Xe[Sr]=arguments[Sr];if(ge)var or=xn(be),Ir=Ng(Xe,or);if(h&&(Xe=tf(Xe,h,m,ge)),I&&(Xe=rf(Xe,I,N,ge)),We-=Ir,ge&&We<J){var Nt=Oi(Xe,or);return ff(r,n,bo,be.placeholder,a,Xe,Nt,F,q,J-We)}var kr=re?a:this,mi=ae?kr[r]:r;return We=Xe.length,F?Xe=qy(Xe,F):_e&&We>1&&Xe.reverse(),Q&&q<We&&(Xe.length=q),this&&this!==Qe&&this instanceof be&&(mi=Be||ts(mi)),mi.apply(kr,Xe)}return be}function uf(r,n){return function(a,h){return G0(a,r,n(h),{})}}function wo(r,n){return function(a,h){var m;if(a===t&&h===t)return n;if(a!==t&&(m=a),h!==t){if(m===t)return h;typeof a=="string"||typeof h=="string"?(a=Er(a),h=Er(h)):(a=Wh(a),h=Wh(h)),m=r(a,h)}return m}}function gc(r){return di(function(n){return n=vt(n,wr(ve())),Ke(function(a){var h=this;return r(n,function(m){return Kt(m,h,a)})})})}function Eo(r,n){n=n===t?" ":Er(n);var a=n.length;if(a<2)return a?cc(n,r):n;var h=cc(n,ao(r/_n(n)));return vn(n)?Ti(Hr(h),0,r).join(""):h.slice(0,r)}function wy(r,n,a,h){var m=n&L,I=ts(r);function N(){for(var F=-1,q=arguments.length,J=-1,Q=h.length,re=K(Q+q),ae=this&&this!==Qe&&this instanceof N?I:r;++J<Q;)re[J]=h[J];for(;q--;)re[J++]=arguments[++F];return Kt(ae,m?a:this,re)}return N}function hf(r){return function(n,a,h){return h&&typeof h!="number"&&sr(n,a,h)&&(a=h=t),n=yi(n),a===t?(a=n,n=0):a=yi(a),h=h===t?n<a?1:-1:yi(h),oy(n,a,h,r)}}function Do(r){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=jr(n),a=jr(a)),r(n,a)}}function ff(r,n,a,h,m,I,N,F,q,J){var Q=n&w,re=Q?N:t,ae=Q?t:N,ge=Q?I:t,_e=Q?t:I;n|=Q?b:D,n&=~(Q?D:b),n&p||(n&=~(L|Y));var Be=[r,n,m,ge,re,_e,ae,F,q,J],be=a.apply(t,Be);return Dc(r)&&Df(be,Be),be.placeholder=h,Sf(be,r,n)}function yc(r){var n=zt[r];return function(a,h){if(a=jr(a),h=h==null?0:Xt(Le(h),292),h&&Dh(a)){var m=(rt(a)+"e").split("e"),I=n(m[0]+"e"+(+m[1]+h));return m=(rt(I)+"e").split("e"),+(m[0]+"e"+(+m[1]-h))}return n(a)}}var Ey=En&&1/Qs(new En([,-0]))[1]==X?function(r){return new En(r)}:Lc;function lf(r){return function(n){var a=Zt(n);return a==Ee?ka(n):a==Ie?Mg(n):Tg(n,r(n))}}function li(r,n,a,h,m,I,N,F){var q=n&Y;if(!q&&typeof r!="function")throw new Nr(l);var J=h?h.length:0;if(J||(n&=~(b|D),h=m=t),N=N===t?N:Ht(Le(N),0),F=F===t?F:Le(F),J-=m?m.length:0,n&D){var Q=h,re=m;h=m=t}var ae=q?t:_c(r),ge=[r,n,a,h,m,Q,re,I,N,F];if(ae&&jy(ge,ae),r=ge[0],n=ge[1],a=ge[2],h=ge[3],m=ge[4],F=ge[9]=ge[9]===t?q?0:r.length:Ht(ge[9]-J,0),!F&&n&(w|v)&&(n&=~(w|v)),!n||n==L)var _e=_y(r,n,a);else n==w||n==v?_e=by(r,n,F):(n==b||n==(L|b))&&!m.length?_e=wy(r,n,a,h):_e=bo.apply(t,ge);var Be=ae?Vh:Df;return Sf(Be(_e,ge),r,n)}function df(r,n,a,h){return r===t||Vr(r,wn[a])&&!it.call(h,a)?n:r}function pf(r,n,a,h,m,I){return bt(r)&&bt(n)&&(I.set(n,r),yo(r,n,t,pf,I),I.delete(n)),r}function Dy(r){return ns(r)?t:r}function gf(r,n,a,h,m,I){var N=a&P,F=r.length,q=n.length;if(F!=q&&!(N&&q>F))return!1;var J=I.get(r),Q=I.get(n);if(J&&Q)return J==n&&Q==r;var re=-1,ae=!0,ge=a&H?new Wi:t;for(I.set(r,n),I.set(n,r);++re<F;){var _e=r[re],Be=n[re];if(h)var be=N?h(Be,_e,re,n,r,I):h(_e,Be,re,r,n,I);if(be!==t){if(be)continue;ae=!1;break}if(ge){if(!qa(n,function(We,Xe){if(!Kn(ge,Xe)&&(_e===We||m(_e,We,a,h,I)))return ge.push(Xe)})){ae=!1;break}}else if(!(_e===Be||m(_e,Be,a,h,I))){ae=!1;break}}return I.delete(r),I.delete(n),ae}function Sy(r,n,a,h,m,I,N){switch(a){case Ae:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case we:return!(r.byteLength!=n.byteLength||!I(new io(r),new io(n)));case B:case $:case ze:return Vr(+r,+n);case R:return r.name==n.name&&r.message==n.message;case Me:case Re:return r==n+"";case Ee:var F=ka;case Ie:var q=h&P;if(F||(F=Qs),r.size!=n.size&&!q)return!1;var J=N.get(r);if(J)return J==n;h|=H,N.set(r,n);var Q=gf(F(r),F(n),h,m,I,N);return N.delete(r),Q;case Ue:if(Yn)return Yn.call(r)==Yn.call(n)}return!1}function Iy(r,n,a,h,m,I){var N=a&P,F=mc(r),q=F.length,J=mc(n),Q=J.length;if(q!=Q&&!N)return!1;for(var re=q;re--;){var ae=F[re];if(!(N?ae in n:it.call(n,ae)))return!1}var ge=I.get(r),_e=I.get(n);if(ge&&_e)return ge==n&&_e==r;var Be=!0;I.set(r,n),I.set(n,r);for(var be=N;++re<q;){ae=F[re];var We=r[ae],Xe=n[ae];if(h)var Sr=N?h(Xe,We,ae,n,r,I):h(We,Xe,ae,r,n,I);if(!(Sr===t?We===Xe||m(We,Xe,a,h,I):Sr)){Be=!1;break}be||(be=ae=="constructor")}if(Be&&!be){var or=r.constructor,Ir=n.constructor;or!=Ir&&"constructor"in r&&"constructor"in n&&!(typeof or=="function"&&or instanceof or&&typeof Ir=="function"&&Ir instanceof Ir)&&(Be=!1)}return I.delete(r),I.delete(n),Be}function di(r){return Ic(wf(r,t,Cf),r+"")}function mc(r){return Uh(r,Vt,wc)}function vc(r){return Uh(r,pr,yf)}var _c=uo?function(r){return uo.get(r)}:Lc;function So(r){for(var n=r.name+"",a=Dn[n],h=it.call(Dn,n)?a.length:0;h--;){var m=a[h],I=m.func;if(I==null||I==r)return m.name}return n}function xn(r){var n=it.call(S,"placeholder")?S:r;return n.placeholder}function ve(){var r=S.iteratee||$c;return r=r===$c?jh:r,arguments.length?r(arguments[0],arguments[1]):r}function Io(r,n){var a=r.__data__;return Ry(n)?a[typeof n=="string"?"string":"hash"]:a.map}function bc(r){for(var n=Vt(r),a=n.length;a--;){var h=n[a],m=r[h];n[a]=[h,m,_f(m)]}return n}function Ji(r,n){var a=$g(r,n);return $h(a)?a:t}function Oy(r){var n=it.call(r,Vi),a=r[Vi];try{r[Vi]=t;var h=!0}catch{}var m=to.call(r);return h&&(n?r[Vi]=a:delete r[Vi]),m}var wc=Ga?function(r){return r==null?[]:(r=ht(r),Si(Ga(r),function(n){return wh.call(r,n)}))}:Mc,yf=Ga?function(r){for(var n=[];r;)Ii(n,wc(r)),r=no(r);return n}:Mc,Zt=nr;(Ya&&Zt(new Ya(new ArrayBuffer(1)))!=Ae||kn&&Zt(new kn)!=Ee||Ja&&Zt(Ja.resolve())!=pt||En&&Zt(new En)!=Ie||Wn&&Zt(new Wn)!=xe)&&(Zt=function(r){var n=nr(r),a=n==je?r.constructor:t,h=a?Qi(a):"";if(h)switch(h){case c0:return Ae;case u0:return Ee;case h0:return pt;case f0:return Ie;case l0:return xe}return n});function xy(r,n,a){for(var h=-1,m=a.length;++h<m;){var I=a[h],N=I.size;switch(I.type){case"drop":r+=N;break;case"dropRight":n-=N;break;case"take":n=Xt(n,r+N);break;case"takeRight":r=Ht(r,n-N);break}}return{start:r,end:n}}function Ay(r){var n=r.match(ft);return n?n[1].split(jt):[]}function mf(r,n,a){n=Ci(n,r);for(var h=-1,m=n.length,I=!1;++h<m;){var N=ti(n[h]);if(!(I=r!=null&&a(r,N)))break;r=r[N]}return I||++h!=m?I:(m=r==null?0:r.length,!!m&&No(m)&&pi(N,m)&&(Ne(r)||Xi(r)))}function Py(r){var n=r.length,a=new r.constructor(n);return n&&typeof r[0]=="string"&&it.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function vf(r){return typeof r.constructor=="function"&&!rs(r)?Sn(no(r)):{}}function Cy(r,n,a){var h=r.constructor;switch(n){case we:return pc(r);case B:case $:return new h(+r);case Ae:return dy(r,a);case He:case Oe:case ke:case Ge:case Ze:case et:case Je:case tr:case hr:return Zh(r,a);case Ee:return new h;case ze:case Re:return new h(r);case Me:return py(r);case Ie:return new h;case Ue:return gy(r)}}function Ty(r,n){var a=n.length;if(!a)return r;var h=a-1;return n[h]=(a>1?"& ":"")+n[h],n=n.join(a>2?", ":" "),r.replace(Ot,`{
/* [wrapped with `+n+`] */
`)}function Ny(r){return Ne(r)||Xi(r)||!!(Eh&&r&&r[Eh])}function pi(r,n){var a=typeof r;return n=n??V,!!n&&(a=="number"||a!="symbol"&&Sa.test(r))&&r>-1&&r%1==0&&r<n}function sr(r,n,a){if(!bt(a))return!1;var h=typeof n;return(h=="number"?dr(a)&&pi(n,a.length):h=="string"&&n in a)?Vr(a[n],r):!1}function Ec(r,n){if(Ne(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Dr(r)?!0:Ut.test(r)||!mt.test(r)||n!=null&&r in ht(n)}function Ry(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}function Dc(r){var n=So(r),a=S[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(r===a)return!0;var h=_c(a);return!!h&&r===h[0]}function Uy(r){return!!vh&&vh in r}var Fy=Zs?gi:qc;function rs(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||wn;return r===a}function _f(r){return r===r&&!bt(r)}function bf(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==t||r in ht(a))}}function $y(r){var n=Co(r,function(h){return a.size===g&&a.clear(),h}),a=n.cache;return n}function jy(r,n){var a=r[1],h=n[1],m=a|h,I=m<(L|Y|u),N=h==u&&a==w||h==u&&a==E&&r[7].length<=n[8]||h==(u|E)&&n[7].length<=n[8]&&a==w;if(!(I||N))return r;h&L&&(r[2]=n[2],m|=a&L?0:p);var F=n[3];if(F){var q=r[3];r[3]=q?tf(q,F,n[4]):F,r[4]=q?Oi(r[3],_):n[4]}return F=n[5],F&&(q=r[5],r[5]=q?rf(q,F,n[6]):F,r[6]=q?Oi(r[5],_):n[6]),F=n[7],F&&(r[7]=F),h&u&&(r[8]=r[8]==null?n[8]:Xt(r[8],n[8])),r[9]==null&&(r[9]=n[9]),r[0]=n[0],r[1]=m,r}function Ly(r){var n=[];if(r!=null)for(var a in ht(r))n.push(a);return n}function My(r){return to.call(r)}function wf(r,n,a){return n=Ht(n===t?r.length-1:n,0),function(){for(var h=arguments,m=-1,I=Ht(h.length-n,0),N=K(I);++m<I;)N[m]=h[n+m];m=-1;for(var F=K(n+1);++m<n;)F[m]=h[m];return F[n]=a(N),Kt(r,this,F)}}function Ef(r,n){return n.length<2?r:Yi(r,Fr(n,0,-1))}function qy(r,n){for(var a=r.length,h=Xt(n.length,a),m=lr(r);h--;){var I=n[h];r[h]=pi(I,a)?m[I]:t}return r}function Sc(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}var Df=If(Vh),is=t0||function(r,n){return Qe.setTimeout(r,n)},Ic=If(uy);function Sf(r,n,a){var h=n+"";return Ic(r,Ty(h,By(Ay(h),a)))}function If(r){var n=0,a=0;return function(){var h=s0(),m=me-(h-a);if(a=h,m>0){if(++n>=ye)return arguments[0]}else n=0;return r.apply(t,arguments)}}function Oo(r,n){var a=-1,h=r.length,m=h-1;for(n=n===t?h:n;++a<n;){var I=ac(a,m),N=r[I];r[I]=r[a],r[a]=N}return r.length=n,r}var Of=$y(function(r){var n=[];return r.charCodeAt(0)===46&&n.push(""),r.replace(Ft,function(a,h,m,I){n.push(m?I.replace(va,"$1"):h||a)}),n});function ti(r){if(typeof r=="string"||Dr(r))return r;var n=r+"";return n=="0"&&1/r==-X?"-0":n}function Qi(r){if(r!=null){try{return eo.call(r)}catch{}try{return r+""}catch{}}return""}function By(r,n){return Tr(Se,function(a){var h="_."+a[0];n&a[1]&&!Ys(r,h)&&r.push(h)}),r.sort()}function xf(r){if(r instanceof Ye)return r.clone();var n=new Rr(r.__wrapped__,r.__chain__);return n.__actions__=lr(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}function zy(r,n,a){(a?sr(r,n,a):n===t)?n=1:n=Ht(Le(n),0);var h=r==null?0:r.length;if(!h||n<1)return[];for(var m=0,I=0,N=K(ao(h/n));m<h;)N[I++]=Fr(r,m,m+=n);return N}function Hy(r){for(var n=-1,a=r==null?0:r.length,h=0,m=[];++n<a;){var I=r[n];I&&(m[h++]=I)}return m}function Ky(){var r=arguments.length;if(!r)return[];for(var n=K(r-1),a=arguments[0],h=r;h--;)n[h-1]=arguments[h];return Ii(Ne(a)?lr(a):[a],Yt(n,1))}var Vy=Ke(function(r,n){return Tt(r)?Qn(r,Yt(n,1,Tt,!0)):[]}),ky=Ke(function(r,n){var a=$r(n);return Tt(a)&&(a=t),Tt(r)?Qn(r,Yt(n,1,Tt,!0),ve(a,2)):[]}),Wy=Ke(function(r,n){var a=$r(n);return Tt(a)&&(a=t),Tt(r)?Qn(r,Yt(n,1,Tt,!0),t,a):[]});function Gy(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Le(n),Fr(r,n<0?0:n,h)):[]}function Yy(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Le(n),n=h-n,Fr(r,0,n<0?0:n)):[]}function Jy(r,n){return r&&r.length?vo(r,ve(n,3),!0,!0):[]}function Qy(r,n){return r&&r.length?vo(r,ve(n,3),!0):[]}function Xy(r,n,a,h){var m=r==null?0:r.length;return m?(a&&typeof a!="number"&&sr(r,n,a)&&(a=0,h=m),K0(r,n,a,h)):[]}function Af(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var m=a==null?0:Le(a);return m<0&&(m=Ht(h+m,0)),Js(r,ve(n,3),m)}function Pf(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var m=h-1;return a!==t&&(m=Le(a),m=a<0?Ht(h+m,0):Xt(m,h-1)),Js(r,ve(n,3),m,!0)}function Cf(r){var n=r==null?0:r.length;return n?Yt(r,1):[]}function Zy(r){var n=r==null?0:r.length;return n?Yt(r,X):[]}function e1(r,n){var a=r==null?0:r.length;return a?(n=n===t?1:Le(n),Yt(r,n)):[]}function t1(r){for(var n=-1,a=r==null?0:r.length,h={};++n<a;){var m=r[n];h[m[0]]=m[1]}return h}function Tf(r){return r&&r.length?r[0]:t}function r1(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var m=a==null?0:Le(a);return m<0&&(m=Ht(h+m,0)),mn(r,n,m)}function i1(r){var n=r==null?0:r.length;return n?Fr(r,0,-1):[]}var n1=Ke(function(r){var n=vt(r,lc);return n.length&&n[0]===r[0]?rc(n):[]}),s1=Ke(function(r){var n=$r(r),a=vt(r,lc);return n===$r(a)?n=t:a.pop(),a.length&&a[0]===r[0]?rc(a,ve(n,2)):[]}),o1=Ke(function(r){var n=$r(r),a=vt(r,lc);return n=typeof n=="function"?n:t,n&&a.pop(),a.length&&a[0]===r[0]?rc(a,t,n):[]});function a1(r,n){return r==null?"":i0.call(r,n)}function $r(r){var n=r==null?0:r.length;return n?r[n-1]:t}function c1(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var m=h;return a!==t&&(m=Le(a),m=m<0?Ht(h+m,0):Xt(m,h-1)),n===n?Bg(r,n,m):Js(r,hh,m,!0)}function u1(r,n){return r&&r.length?Bh(r,Le(n)):t}var h1=Ke(Nf);function Nf(r,n){return r&&r.length&&n&&n.length?oc(r,n):r}function f1(r,n,a){return r&&r.length&&n&&n.length?oc(r,n,ve(a,2)):r}function l1(r,n,a){return r&&r.length&&n&&n.length?oc(r,n,t,a):r}var d1=di(function(r,n){var a=r==null?0:r.length,h=Xa(r,n);return Kh(r,vt(n,function(m){return pi(m,a)?+m:m}).sort(ef)),h});function p1(r,n){var a=[];if(!(r&&r.length))return a;var h=-1,m=[],I=r.length;for(n=ve(n,3);++h<I;){var N=r[h];n(N,h,r)&&(a.push(N),m.push(h))}return Kh(r,m),a}function Oc(r){return r==null?r:a0.call(r)}function g1(r,n,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&sr(r,n,a)?(n=0,a=h):(n=n==null?0:Le(n),a=a===t?h:Le(a)),Fr(r,n,a)):[]}function y1(r,n){return mo(r,n)}function m1(r,n,a){return uc(r,n,ve(a,2))}function v1(r,n){var a=r==null?0:r.length;if(a){var h=mo(r,n);if(h<a&&Vr(r[h],n))return h}return-1}function _1(r,n){return mo(r,n,!0)}function b1(r,n,a){return uc(r,n,ve(a,2),!0)}function w1(r,n){var a=r==null?0:r.length;if(a){var h=mo(r,n,!0)-1;if(Vr(r[h],n))return h}return-1}function E1(r){return r&&r.length?kh(r):[]}function D1(r,n){return r&&r.length?kh(r,ve(n,2)):[]}function S1(r){var n=r==null?0:r.length;return n?Fr(r,1,n):[]}function I1(r,n,a){return r&&r.length?(n=a||n===t?1:Le(n),Fr(r,0,n<0?0:n)):[]}function O1(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Le(n),n=h-n,Fr(r,n<0?0:n,h)):[]}function x1(r,n){return r&&r.length?vo(r,ve(n,3),!1,!0):[]}function A1(r,n){return r&&r.length?vo(r,ve(n,3)):[]}var P1=Ke(function(r){return Pi(Yt(r,1,Tt,!0))}),C1=Ke(function(r){var n=$r(r);return Tt(n)&&(n=t),Pi(Yt(r,1,Tt,!0),ve(n,2))}),T1=Ke(function(r){var n=$r(r);return n=typeof n=="function"?n:t,Pi(Yt(r,1,Tt,!0),t,n)});function N1(r){return r&&r.length?Pi(r):[]}function R1(r,n){return r&&r.length?Pi(r,ve(n,2)):[]}function U1(r,n){return n=typeof n=="function"?n:t,r&&r.length?Pi(r,t,n):[]}function xc(r){if(!(r&&r.length))return[];var n=0;return r=Si(r,function(a){if(Tt(a))return n=Ht(a.length,n),!0}),Ka(n,function(a){return vt(r,Ba(a))})}function Rf(r,n){if(!(r&&r.length))return[];var a=xc(r);return n==null?a:vt(a,function(h){return Kt(n,t,h)})}var F1=Ke(function(r,n){return Tt(r)?Qn(r,n):[]}),$1=Ke(function(r){return fc(Si(r,Tt))}),j1=Ke(function(r){var n=$r(r);return Tt(n)&&(n=t),fc(Si(r,Tt),ve(n,2))}),L1=Ke(function(r){var n=$r(r);return n=typeof n=="function"?n:t,fc(Si(r,Tt),t,n)}),M1=Ke(xc);function q1(r,n){return Jh(r||[],n||[],Jn)}function B1(r,n){return Jh(r||[],n||[],es)}var z1=Ke(function(r){var n=r.length,a=n>1?r[n-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Rf(r,a)});function Uf(r){var n=S(r);return n.__chain__=!0,n}function H1(r,n){return n(r),r}function xo(r,n){return n(r)}var K1=di(function(r){var n=r.length,a=n?r[0]:0,h=this.__wrapped__,m=function(I){return Xa(I,r)};return n>1||this.__actions__.length||!(h instanceof Ye)||!pi(a)?this.thru(m):(h=h.slice(a,+a+(n?1:0)),h.__actions__.push({func:xo,args:[m],thisArg:t}),new Rr(h,this.__chain__).thru(function(I){return n&&!I.length&&I.push(t),I}))});function V1(){return Uf(this)}function k1(){return new Rr(this.value(),this.__chain__)}function W1(){this.__values__===t&&(this.__values__=Gf(this.value()));var r=this.__index__>=this.__values__.length,n=r?t:this.__values__[this.__index__++];return{done:r,value:n}}function G1(){return this}function Y1(r){for(var n,a=this;a instanceof fo;){var h=xf(a);h.__index__=0,h.__values__=t,n?m.__wrapped__=h:n=h;var m=h;a=a.__wrapped__}return m.__wrapped__=r,n}function J1(){var r=this.__wrapped__;if(r instanceof Ye){var n=r;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:xo,args:[Oc],thisArg:t}),new Rr(n,this.__chain__)}return this.thru(Oc)}function Q1(){return Yh(this.__wrapped__,this.__actions__)}var X1=_o(function(r,n,a){it.call(r,a)?++r[a]:fi(r,a,1)});function Z1(r,n,a){var h=Ne(r)?ch:H0;return a&&sr(r,n,a)&&(n=t),h(r,ve(n,3))}function em(r,n){var a=Ne(r)?Si:Nh;return a(r,ve(n,3))}var tm=af(Af),rm=af(Pf);function im(r,n){return Yt(Ao(r,n),1)}function nm(r,n){return Yt(Ao(r,n),X)}function sm(r,n,a){return a=a===t?1:Le(a),Yt(Ao(r,n),a)}function Ff(r,n){var a=Ne(r)?Tr:Ai;return a(r,ve(n,3))}function $f(r,n){var a=Ne(r)?Sg:Th;return a(r,ve(n,3))}var om=_o(function(r,n,a){it.call(r,a)?r[a].push(n):fi(r,a,[n])});function am(r,n,a,h){r=dr(r)?r:Pn(r),a=a&&!h?Le(a):0;var m=r.length;return a<0&&(a=Ht(m+a,0)),Ro(r)?a<=m&&r.indexOf(n,a)>-1:!!m&&mn(r,n,a)>-1}var cm=Ke(function(r,n,a){var h=-1,m=typeof n=="function",I=dr(r)?K(r.length):[];return Ai(r,function(N){I[++h]=m?Kt(n,N,a):Xn(N,n,a)}),I}),um=_o(function(r,n,a){fi(r,a,n)});function Ao(r,n){var a=Ne(r)?vt:Lh;return a(r,ve(n,3))}function hm(r,n,a,h){return r==null?[]:(Ne(n)||(n=n==null?[]:[n]),a=h?t:a,Ne(a)||(a=a==null?[]:[a]),zh(r,n,a))}var fm=_o(function(r,n,a){r[a?0:1].push(n)},function(){return[[],[]]});function lm(r,n,a){var h=Ne(r)?Ma:lh,m=arguments.length<3;return h(r,ve(n,4),a,m,Ai)}function dm(r,n,a){var h=Ne(r)?Ig:lh,m=arguments.length<3;return h(r,ve(n,4),a,m,Th)}function pm(r,n){var a=Ne(r)?Si:Nh;return a(r,To(ve(n,3)))}function gm(r){var n=Ne(r)?xh:ay;return n(r)}function ym(r,n,a){(a?sr(r,n,a):n===t)?n=1:n=Le(n);var h=Ne(r)?L0:cy;return h(r,n)}function mm(r){var n=Ne(r)?M0:hy;return n(r)}function vm(r){if(r==null)return 0;if(dr(r))return Ro(r)?_n(r):r.length;var n=Zt(r);return n==Ee||n==Ie?r.size:nc(r).length}function _m(r,n,a){var h=Ne(r)?qa:fy;return a&&sr(r,n,a)&&(n=t),h(r,ve(n,3))}var bm=Ke(function(r,n){if(r==null)return[];var a=n.length;return a>1&&sr(r,n[0],n[1])?n=[]:a>2&&sr(n[0],n[1],n[2])&&(n=[n[0]]),zh(r,Yt(n,1),[])}),Po=e0||function(){return Qe.Date.now()};function wm(r,n){if(typeof n!="function")throw new Nr(l);return r=Le(r),function(){if(--r<1)return n.apply(this,arguments)}}function jf(r,n,a){return n=a?t:n,n=r&&n==null?r.length:n,li(r,u,t,t,t,t,n)}function Lf(r,n){var a;if(typeof n!="function")throw new Nr(l);return r=Le(r),function(){return--r>0&&(a=n.apply(this,arguments)),r<=1&&(n=t),a}}var Ac=Ke(function(r,n,a){var h=L;if(a.length){var m=Oi(a,xn(Ac));h|=b}return li(r,h,n,a,m)}),Mf=Ke(function(r,n,a){var h=L|Y;if(a.length){var m=Oi(a,xn(Mf));h|=b}return li(n,h,r,a,m)});function qf(r,n,a){n=a?t:n;var h=li(r,w,t,t,t,t,t,n);return h.placeholder=qf.placeholder,h}function Bf(r,n,a){n=a?t:n;var h=li(r,v,t,t,t,t,t,n);return h.placeholder=Bf.placeholder,h}function zf(r,n,a){var h,m,I,N,F,q,J=0,Q=!1,re=!1,ae=!0;if(typeof r!="function")throw new Nr(l);n=jr(n)||0,bt(a)&&(Q=!!a.leading,re="maxWait"in a,I=re?Ht(jr(a.maxWait)||0,n):I,ae="trailing"in a?!!a.trailing:ae);function ge(Nt){var kr=h,mi=m;return h=m=t,J=Nt,N=r.apply(mi,kr),N}function _e(Nt){return J=Nt,F=is(We,n),Q?ge(Nt):N}function Be(Nt){var kr=Nt-q,mi=Nt-J,al=n-kr;return re?Xt(al,I-mi):al}function be(Nt){var kr=Nt-q,mi=Nt-J;return q===t||kr>=n||kr<0||re&&mi>=I}function We(){var Nt=Po();if(be(Nt))return Xe(Nt);F=is(We,Be(Nt))}function Xe(Nt){return F=t,ae&&h?ge(Nt):(h=m=t,N)}function Sr(){F!==t&&Qh(F),J=0,h=q=m=F=t}function or(){return F===t?N:Xe(Po())}function Ir(){var Nt=Po(),kr=be(Nt);if(h=arguments,m=this,q=Nt,kr){if(F===t)return _e(q);if(re)return Qh(F),F=is(We,n),ge(q)}return F===t&&(F=is(We,n)),N}return Ir.cancel=Sr,Ir.flush=or,Ir}var Em=Ke(function(r,n){return Ch(r,1,n)}),Dm=Ke(function(r,n,a){return Ch(r,jr(n)||0,a)});function Sm(r){return li(r,k)}function Co(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new Nr(l);var a=function(){var h=arguments,m=n?n.apply(this,h):h[0],I=a.cache;if(I.has(m))return I.get(m);var N=r.apply(this,h);return a.cache=I.set(m,N)||I,N};return a.cache=new(Co.Cache||hi),a}Co.Cache=hi;function To(r){if(typeof r!="function")throw new Nr(l);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}function Im(r){return Lf(2,r)}var Om=ly(function(r,n){n=n.length==1&&Ne(n[0])?vt(n[0],wr(ve())):vt(Yt(n,1),wr(ve()));var a=n.length;return Ke(function(h){for(var m=-1,I=Xt(h.length,a);++m<I;)h[m]=n[m].call(this,h[m]);return Kt(r,this,h)})}),Pc=Ke(function(r,n){var a=Oi(n,xn(Pc));return li(r,b,t,n,a)}),Hf=Ke(function(r,n){var a=Oi(n,xn(Hf));return li(r,D,t,n,a)}),xm=di(function(r,n){return li(r,E,t,t,t,n)});function Am(r,n){if(typeof r!="function")throw new Nr(l);return n=n===t?n:Le(n),Ke(r,n)}function Pm(r,n){if(typeof r!="function")throw new Nr(l);return n=n==null?0:Ht(Le(n),0),Ke(function(a){var h=a[n],m=Ti(a,0,n);return h&&Ii(m,h),Kt(r,this,m)})}function Cm(r,n,a){var h=!0,m=!0;if(typeof r!="function")throw new Nr(l);return bt(a)&&(h="leading"in a?!!a.leading:h,m="trailing"in a?!!a.trailing:m),zf(r,n,{leading:h,maxWait:n,trailing:m})}function Tm(r){return jf(r,1)}function Nm(r,n){return Pc(dc(n),r)}function Rm(){if(!arguments.length)return[];var r=arguments[0];return Ne(r)?r:[r]}function Um(r){return Ur(r,C)}function Fm(r,n){return n=typeof n=="function"?n:t,Ur(r,C,n)}function $m(r){return Ur(r,O|C)}function jm(r,n){return n=typeof n=="function"?n:t,Ur(r,O|C,n)}function Lm(r,n){return n==null||Ph(r,n,Vt(n))}function Vr(r,n){return r===n||r!==r&&n!==n}var Mm=Do(tc),qm=Do(function(r,n){return r>=n}),Xi=Fh(function(){return arguments}())?Fh:function(r){return xt(r)&&it.call(r,"callee")&&!wh.call(r,"callee")},Ne=K.isArray,Bm=ir?wr(ir):Y0;function dr(r){return r!=null&&No(r.length)&&!gi(r)}function Tt(r){return xt(r)&&dr(r)}function zm(r){return r===!0||r===!1||xt(r)&&nr(r)==B}var Ni=r0||qc,Hm=zr?wr(zr):J0;function Km(r){return xt(r)&&r.nodeType===1&&!ns(r)}function Vm(r){if(r==null)return!0;if(dr(r)&&(Ne(r)||typeof r=="string"||typeof r.splice=="function"||Ni(r)||An(r)||Xi(r)))return!r.length;var n=Zt(r);if(n==Ee||n==Ie)return!r.size;if(rs(r))return!nc(r).length;for(var a in r)if(it.call(r,a))return!1;return!0}function km(r,n){return Zn(r,n)}function Wm(r,n,a){a=typeof a=="function"?a:t;var h=a?a(r,n):t;return h===t?Zn(r,n,t,a):!!h}function Cc(r){if(!xt(r))return!1;var n=nr(r);return n==R||n==f||typeof r.message=="string"&&typeof r.name=="string"&&!ns(r)}function Gm(r){return typeof r=="number"&&Dh(r)}function gi(r){if(!bt(r))return!1;var n=nr(r);return n==se||n==he||n==z||n==gt}function Kf(r){return typeof r=="number"&&r==Le(r)}function No(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=V}function bt(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}function xt(r){return r!=null&&typeof r=="object"}var Vf=Cr?wr(Cr):X0;function Ym(r,n){return r===n||ic(r,n,bc(n))}function Jm(r,n,a){return a=typeof a=="function"?a:t,ic(r,n,bc(n),a)}function Qm(r){return kf(r)&&r!=+r}function Xm(r){if(Fy(r))throw new Pe(c);return $h(r)}function Zm(r){return r===null}function ev(r){return r==null}function kf(r){return typeof r=="number"||xt(r)&&nr(r)==ze}function ns(r){if(!xt(r)||nr(r)!=je)return!1;var n=no(r);if(n===null)return!0;var a=it.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&eo.call(a)==Jg}var Tc=Xr?wr(Xr):Z0;function tv(r){return Kf(r)&&r>=-V&&r<=V}var Wf=Hn?wr(Hn):ey;function Ro(r){return typeof r=="string"||!Ne(r)&&xt(r)&&nr(r)==Re}function Dr(r){return typeof r=="symbol"||xt(r)&&nr(r)==Ue}var An=Ki?wr(Ki):ty;function rv(r){return r===t}function iv(r){return xt(r)&&Zt(r)==xe}function nv(r){return xt(r)&&nr(r)==Fe}var sv=Do(sc),ov=Do(function(r,n){return r<=n});function Gf(r){if(!r)return[];if(dr(r))return Ro(r)?Hr(r):lr(r);if(Vn&&r[Vn])return Lg(r[Vn]());var n=Zt(r),a=n==Ee?ka:n==Ie?Qs:Pn;return a(r)}function yi(r){if(!r)return r===0?r:0;if(r=jr(r),r===X||r===-X){var n=r<0?-1:1;return n*W}return r===r?r:0}function Le(r){var n=yi(r),a=n%1;return n===n?a?n-a:n:0}function Yf(r){return r?Gi(Le(r),0,ie):0}function jr(r){if(typeof r=="number")return r;if(Dr(r))return te;if(bt(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=bt(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=dh(r);var a=wa.test(r);return a||Da.test(r)?Te(r.slice(2),a?2:8):ba.test(r)?te:+r}function Jf(r){return ei(r,pr(r))}function av(r){return r?Gi(Le(r),-V,V):r===0?r:0}function rt(r){return r==null?"":Er(r)}var cv=In(function(r,n){if(rs(n)||dr(n)){ei(n,Vt(n),r);return}for(var a in n)it.call(n,a)&&Jn(r,a,n[a])}),Qf=In(function(r,n){ei(n,pr(n),r)}),Uo=In(function(r,n,a,h){ei(n,pr(n),r,h)}),uv=In(function(r,n,a,h){ei(n,Vt(n),r,h)}),hv=di(Xa);function fv(r,n){var a=Sn(r);return n==null?a:Ah(a,n)}var lv=Ke(function(r,n){r=ht(r);var a=-1,h=n.length,m=h>2?n[2]:t;for(m&&sr(n[0],n[1],m)&&(h=1);++a<h;)for(var I=n[a],N=pr(I),F=-1,q=N.length;++F<q;){var J=N[F],Q=r[J];(Q===t||Vr(Q,wn[J])&&!it.call(r,J))&&(r[J]=I[J])}return r}),dv=Ke(function(r){return r.push(t,pf),Kt(Xf,t,r)});function pv(r,n){return uh(r,ve(n,3),Zr)}function gv(r,n){return uh(r,ve(n,3),ec)}function yv(r,n){return r==null?r:Za(r,ve(n,3),pr)}function mv(r,n){return r==null?r:Rh(r,ve(n,3),pr)}function vv(r,n){return r&&Zr(r,ve(n,3))}function _v(r,n){return r&&ec(r,ve(n,3))}function bv(r){return r==null?[]:go(r,Vt(r))}function wv(r){return r==null?[]:go(r,pr(r))}function Nc(r,n,a){var h=r==null?t:Yi(r,n);return h===t?a:h}function Ev(r,n){return r!=null&&mf(r,n,V0)}function Rc(r,n){return r!=null&&mf(r,n,k0)}var Dv=uf(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=to.call(n)),r[n]=a},Fc(gr)),Sv=uf(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=to.call(n)),it.call(r,n)?r[n].push(a):r[n]=[a]},ve),Iv=Ke(Xn);function Vt(r){return dr(r)?Oh(r):nc(r)}function pr(r){return dr(r)?Oh(r,!0):ry(r)}function Ov(r,n){var a={};return n=ve(n,3),Zr(r,function(h,m,I){fi(a,n(h,m,I),h)}),a}function xv(r,n){var a={};return n=ve(n,3),Zr(r,function(h,m,I){fi(a,m,n(h,m,I))}),a}var Av=In(function(r,n,a){yo(r,n,a)}),Xf=In(function(r,n,a,h){yo(r,n,a,h)}),Pv=di(function(r,n){var a={};if(r==null)return a;var h=!1;n=vt(n,function(I){return I=Ci(I,r),h||(h=I.length>1),I}),ei(r,vc(r),a),h&&(a=Ur(a,O|T|C,Dy));for(var m=n.length;m--;)hc(a,n[m]);return a});function Cv(r,n){return Zf(r,To(ve(n)))}var Tv=di(function(r,n){return r==null?{}:ny(r,n)});function Zf(r,n){if(r==null)return{};var a=vt(vc(r),function(h){return[h]});return n=ve(n),Hh(r,a,function(h,m){return n(h,m[0])})}function Nv(r,n,a){n=Ci(n,r);var h=-1,m=n.length;for(m||(m=1,r=t);++h<m;){var I=r==null?t:r[ti(n[h])];I===t&&(h=m,I=a),r=gi(I)?I.call(r):I}return r}function Rv(r,n,a){return r==null?r:es(r,n,a)}function Uv(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:es(r,n,a,h)}var el=lf(Vt),tl=lf(pr);function Fv(r,n,a){var h=Ne(r),m=h||Ni(r)||An(r);if(n=ve(n,4),a==null){var I=r&&r.constructor;m?a=h?new I:[]:bt(r)?a=gi(I)?Sn(no(r)):{}:a={}}return(m?Tr:Zr)(r,function(N,F,q){return n(a,N,F,q)}),a}function $v(r,n){return r==null?!0:hc(r,n)}function jv(r,n,a){return r==null?r:Gh(r,n,dc(a))}function Lv(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:Gh(r,n,dc(a),h)}function Pn(r){return r==null?[]:Va(r,Vt(r))}function Mv(r){return r==null?[]:Va(r,pr(r))}function qv(r,n,a){return a===t&&(a=n,n=t),a!==t&&(a=jr(a),a=a===a?a:0),n!==t&&(n=jr(n),n=n===n?n:0),Gi(jr(r),n,a)}function Bv(r,n,a){return n=yi(n),a===t?(a=n,n=0):a=yi(a),r=jr(r),W0(r,n,a)}function zv(r,n,a){if(a&&typeof a!="boolean"&&sr(r,n,a)&&(n=a=t),a===t&&(typeof n=="boolean"?(a=n,n=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&n===t?(r=0,n=1):(r=yi(r),n===t?(n=r,r=0):n=yi(n)),r>n){var h=r;r=n,n=h}if(a||r%1||n%1){var m=Sh();return Xt(r+m*(n-r+ct("1e-"+((m+"").length-1))),n)}return ac(r,n)}var Hv=On(function(r,n,a){return n=n.toLowerCase(),r+(a?rl(n):n)});function rl(r){return Uc(rt(r).toLowerCase())}function il(r){return r=rt(r),r&&r.replace(ai,Rg).replace($a,"")}function Kv(r,n,a){r=rt(r),n=Er(n);var h=r.length;a=a===t?h:Gi(Le(a),0,h);var m=a;return a-=n.length,a>=0&&r.slice(a,m)==n}function Vv(r){return r=rt(r),r&&yt.test(r)?r.replace(Mi,Ug):r}function kv(r){return r=rt(r),r&&$t.test(r)?r.replace(St,"\\$&"):r}var Wv=On(function(r,n,a){return r+(a?"-":"")+n.toLowerCase()}),Gv=On(function(r,n,a){return r+(a?" ":"")+n.toLowerCase()}),Yv=of("toLowerCase");function Jv(r,n,a){r=rt(r),n=Le(n);var h=n?_n(r):0;if(!n||h>=n)return r;var m=(n-h)/2;return Eo(co(m),a)+r+Eo(ao(m),a)}function Qv(r,n,a){r=rt(r),n=Le(n);var h=n?_n(r):0;return n&&h<n?r+Eo(n-h,a):r}function Xv(r,n,a){r=rt(r),n=Le(n);var h=n?_n(r):0;return n&&h<n?Eo(n-h,a)+r:r}function Zv(r,n,a){return a||n==null?n=0:n&&(n=+n),o0(rt(r).replace(It,""),n||0)}function e_(r,n,a){return(a?sr(r,n,a):n===t)?n=1:n=Le(n),cc(rt(r),n)}function t_(){var r=arguments,n=rt(r[0]);return r.length<3?n:n.replace(r[1],r[2])}var r_=On(function(r,n,a){return r+(a?"_":"")+n.toLowerCase()});function i_(r,n,a){return a&&typeof a!="number"&&sr(r,n,a)&&(n=a=t),a=a===t?ie:a>>>0,a?(r=rt(r),r&&(typeof n=="string"||n!=null&&!Tc(n))&&(n=Er(n),!n&&vn(r))?Ti(Hr(r),0,a):r.split(n,a)):[]}var n_=On(function(r,n,a){return r+(a?" ":"")+Uc(n)});function s_(r,n,a){return r=rt(r),a=a==null?0:Gi(Le(a),0,r.length),n=Er(n),r.slice(a,a+n.length)==n}function o_(r,n,a){var h=S.templateSettings;a&&sr(r,n,a)&&(n=t),r=rt(r),n=Uo({},n,h,df);var m=Uo({},n.imports,h.imports,df),I=Vt(m),N=Va(m,I),F,q,J=0,Q=n.interpolate||hn,re="__p += '",ae=Wa((n.escape||hn).source+"|"+Q.source+"|"+(Q===_t?_a:hn).source+"|"+(n.evaluate||hn).source+"|$","g"),ge="//# sourceURL="+(it.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ja+"]")+`
`;r.replace(ae,function(be,We,Xe,Sr,or,Ir){return Xe||(Xe=Sr),re+=r.slice(J,Ir).replace(Ia,Fg),We&&(F=!0,re+=`' +
__e(`+We+`) +
'`),or&&(q=!0,re+=`';
`+or+`;
__p += '`),Xe&&(re+=`' +
((__t = (`+Xe+`)) == null ? '' : __t) +
'`),J=Ir+be.length,be}),re+=`';
`;var _e=it.call(n,"variable")&&n.variable;if(!_e)re=`with (obj) {
`+re+`
}
`;else if(ma.test(_e))throw new Pe(d);re=(q?re.replace(Jr,""):re).replace(rr,"$1").replace(oi,"$1;"),re="function("+(_e||"obj")+`) {
`+(_e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(F?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+re+`return __p
}`;var Be=sl(function(){return tt(I,ge+"return "+re).apply(t,N)});if(Be.source=re,Cc(Be))throw Be;return Be}function a_(r){return rt(r).toLowerCase()}function c_(r){return rt(r).toUpperCase()}function u_(r,n,a){if(r=rt(r),r&&(a||n===t))return dh(r);if(!r||!(n=Er(n)))return r;var h=Hr(r),m=Hr(n),I=ph(h,m),N=gh(h,m)+1;return Ti(h,I,N).join("")}function h_(r,n,a){if(r=rt(r),r&&(a||n===t))return r.slice(0,mh(r)+1);if(!r||!(n=Er(n)))return r;var h=Hr(r),m=gh(h,Hr(n))+1;return Ti(h,0,m).join("")}function f_(r,n,a){if(r=rt(r),r&&(a||n===t))return r.replace(It,"");if(!r||!(n=Er(n)))return r;var h=Hr(r),m=ph(h,Hr(n));return Ti(h,m).join("")}function l_(r,n){var a=ne,h=ue;if(bt(n)){var m="separator"in n?n.separator:m;a="length"in n?Le(n.length):a,h="omission"in n?Er(n.omission):h}r=rt(r);var I=r.length;if(vn(r)){var N=Hr(r);I=N.length}if(a>=I)return r;var F=a-_n(h);if(F<1)return h;var q=N?Ti(N,0,F).join(""):r.slice(0,F);if(m===t)return q+h;if(N&&(F+=q.length-F),Tc(m)){if(r.slice(F).search(m)){var J,Q=q;for(m.global||(m=Wa(m.source,rt(Pr.exec(m))+"g")),m.lastIndex=0;J=m.exec(Q);)var re=J.index;q=q.slice(0,re===t?F:re)}}else if(r.indexOf(Er(m),F)!=F){var ae=q.lastIndexOf(m);ae>-1&&(q=q.slice(0,ae))}return q+h}function d_(r){return r=rt(r),r&&wt.test(r)?r.replace(Ei,zg):r}var p_=On(function(r,n,a){return r+(a?" ":"")+n.toUpperCase()}),Uc=of("toUpperCase");function nl(r,n,a){return r=rt(r),n=a?t:n,n===t?jg(r)?Vg(r):Ag(r):r.match(n)||[]}var sl=Ke(function(r,n){try{return Kt(r,t,n)}catch(a){return Cc(a)?a:new Pe(a)}}),g_=di(function(r,n){return Tr(n,function(a){a=ti(a),fi(r,a,Ac(r[a],r))}),r});function y_(r){var n=r==null?0:r.length,a=ve();return r=n?vt(r,function(h){if(typeof h[1]!="function")throw new Nr(l);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var m=-1;++m<n;){var I=r[m];if(Kt(I[0],this,h))return Kt(I[1],this,h)}})}function m_(r){return z0(Ur(r,O))}function Fc(r){return function(){return r}}function v_(r,n){return r==null||r!==r?n:r}var __=cf(),b_=cf(!0);function gr(r){return r}function $c(r){return jh(typeof r=="function"?r:Ur(r,O))}function w_(r){return Mh(Ur(r,O))}function E_(r,n){return qh(r,Ur(n,O))}var D_=Ke(function(r,n){return function(a){return Xn(a,r,n)}}),S_=Ke(function(r,n){return function(a){return Xn(r,a,n)}});function jc(r,n,a){var h=Vt(n),m=go(n,h);a==null&&!(bt(n)&&(m.length||!h.length))&&(a=n,n=r,r=this,m=go(n,Vt(n)));var I=!(bt(a)&&"chain"in a)||!!a.chain,N=gi(r);return Tr(m,function(F){var q=n[F];r[F]=q,N&&(r.prototype[F]=function(){var J=this.__chain__;if(I||J){var Q=r(this.__wrapped__),re=Q.__actions__=lr(this.__actions__);return re.push({func:q,args:arguments,thisArg:r}),Q.__chain__=J,Q}return q.apply(r,Ii([this.value()],arguments))})}),r}function I_(){return Qe._===this&&(Qe._=Qg),this}function Lc(){}function O_(r){return r=Le(r),Ke(function(n){return Bh(n,r)})}var x_=gc(vt),A_=gc(ch),P_=gc(qa);function ol(r){return Ec(r)?Ba(ti(r)):sy(r)}function C_(r){return function(n){return r==null?t:Yi(r,n)}}var T_=hf(),N_=hf(!0);function Mc(){return[]}function qc(){return!1}function R_(){return{}}function U_(){return""}function F_(){return!0}function $_(r,n){if(r=Le(r),r<1||r>V)return[];var a=ie,h=Xt(r,ie);n=ve(n),r-=ie;for(var m=Ka(h,n);++a<r;)n(a);return m}function j_(r){return Ne(r)?vt(r,ti):Dr(r)?[r]:lr(Of(rt(r)))}function L_(r){var n=++Yg;return rt(r)+n}var M_=wo(function(r,n){return r+n},0),q_=yc("ceil"),B_=wo(function(r,n){return r/n},1),z_=yc("floor");function H_(r){return r&&r.length?po(r,gr,tc):t}function K_(r,n){return r&&r.length?po(r,ve(n,2),tc):t}function V_(r){return fh(r,gr)}function k_(r,n){return fh(r,ve(n,2))}function W_(r){return r&&r.length?po(r,gr,sc):t}function G_(r,n){return r&&r.length?po(r,ve(n,2),sc):t}var Y_=wo(function(r,n){return r*n},1),J_=yc("round"),Q_=wo(function(r,n){return r-n},0);function X_(r){return r&&r.length?Ha(r,gr):0}function Z_(r,n){return r&&r.length?Ha(r,ve(n,2)):0}return S.after=wm,S.ary=jf,S.assign=cv,S.assignIn=Qf,S.assignInWith=Uo,S.assignWith=uv,S.at=hv,S.before=Lf,S.bind=Ac,S.bindAll=g_,S.bindKey=Mf,S.castArray=Rm,S.chain=Uf,S.chunk=zy,S.compact=Hy,S.concat=Ky,S.cond=y_,S.conforms=m_,S.constant=Fc,S.countBy=X1,S.create=fv,S.curry=qf,S.curryRight=Bf,S.debounce=zf,S.defaults=lv,S.defaultsDeep=dv,S.defer=Em,S.delay=Dm,S.difference=Vy,S.differenceBy=ky,S.differenceWith=Wy,S.drop=Gy,S.dropRight=Yy,S.dropRightWhile=Jy,S.dropWhile=Qy,S.fill=Xy,S.filter=em,S.flatMap=im,S.flatMapDeep=nm,S.flatMapDepth=sm,S.flatten=Cf,S.flattenDeep=Zy,S.flattenDepth=e1,S.flip=Sm,S.flow=__,S.flowRight=b_,S.fromPairs=t1,S.functions=bv,S.functionsIn=wv,S.groupBy=om,S.initial=i1,S.intersection=n1,S.intersectionBy=s1,S.intersectionWith=o1,S.invert=Dv,S.invertBy=Sv,S.invokeMap=cm,S.iteratee=$c,S.keyBy=um,S.keys=Vt,S.keysIn=pr,S.map=Ao,S.mapKeys=Ov,S.mapValues=xv,S.matches=w_,S.matchesProperty=E_,S.memoize=Co,S.merge=Av,S.mergeWith=Xf,S.method=D_,S.methodOf=S_,S.mixin=jc,S.negate=To,S.nthArg=O_,S.omit=Pv,S.omitBy=Cv,S.once=Im,S.orderBy=hm,S.over=x_,S.overArgs=Om,S.overEvery=A_,S.overSome=P_,S.partial=Pc,S.partialRight=Hf,S.partition=fm,S.pick=Tv,S.pickBy=Zf,S.property=ol,S.propertyOf=C_,S.pull=h1,S.pullAll=Nf,S.pullAllBy=f1,S.pullAllWith=l1,S.pullAt=d1,S.range=T_,S.rangeRight=N_,S.rearg=xm,S.reject=pm,S.remove=p1,S.rest=Am,S.reverse=Oc,S.sampleSize=ym,S.set=Rv,S.setWith=Uv,S.shuffle=mm,S.slice=g1,S.sortBy=bm,S.sortedUniq=E1,S.sortedUniqBy=D1,S.split=i_,S.spread=Pm,S.tail=S1,S.take=I1,S.takeRight=O1,S.takeRightWhile=x1,S.takeWhile=A1,S.tap=H1,S.throttle=Cm,S.thru=xo,S.toArray=Gf,S.toPairs=el,S.toPairsIn=tl,S.toPath=j_,S.toPlainObject=Jf,S.transform=Fv,S.unary=Tm,S.union=P1,S.unionBy=C1,S.unionWith=T1,S.uniq=N1,S.uniqBy=R1,S.uniqWith=U1,S.unset=$v,S.unzip=xc,S.unzipWith=Rf,S.update=jv,S.updateWith=Lv,S.values=Pn,S.valuesIn=Mv,S.without=F1,S.words=nl,S.wrap=Nm,S.xor=$1,S.xorBy=j1,S.xorWith=L1,S.zip=M1,S.zipObject=q1,S.zipObjectDeep=B1,S.zipWith=z1,S.entries=el,S.entriesIn=tl,S.extend=Qf,S.extendWith=Uo,jc(S,S),S.add=M_,S.attempt=sl,S.camelCase=Hv,S.capitalize=rl,S.ceil=q_,S.clamp=qv,S.clone=Um,S.cloneDeep=$m,S.cloneDeepWith=jm,S.cloneWith=Fm,S.conformsTo=Lm,S.deburr=il,S.defaultTo=v_,S.divide=B_,S.endsWith=Kv,S.eq=Vr,S.escape=Vv,S.escapeRegExp=kv,S.every=Z1,S.find=tm,S.findIndex=Af,S.findKey=pv,S.findLast=rm,S.findLastIndex=Pf,S.findLastKey=gv,S.floor=z_,S.forEach=Ff,S.forEachRight=$f,S.forIn=yv,S.forInRight=mv,S.forOwn=vv,S.forOwnRight=_v,S.get=Nc,S.gt=Mm,S.gte=qm,S.has=Ev,S.hasIn=Rc,S.head=Tf,S.identity=gr,S.includes=am,S.indexOf=r1,S.inRange=Bv,S.invoke=Iv,S.isArguments=Xi,S.isArray=Ne,S.isArrayBuffer=Bm,S.isArrayLike=dr,S.isArrayLikeObject=Tt,S.isBoolean=zm,S.isBuffer=Ni,S.isDate=Hm,S.isElement=Km,S.isEmpty=Vm,S.isEqual=km,S.isEqualWith=Wm,S.isError=Cc,S.isFinite=Gm,S.isFunction=gi,S.isInteger=Kf,S.isLength=No,S.isMap=Vf,S.isMatch=Ym,S.isMatchWith=Jm,S.isNaN=Qm,S.isNative=Xm,S.isNil=ev,S.isNull=Zm,S.isNumber=kf,S.isObject=bt,S.isObjectLike=xt,S.isPlainObject=ns,S.isRegExp=Tc,S.isSafeInteger=tv,S.isSet=Wf,S.isString=Ro,S.isSymbol=Dr,S.isTypedArray=An,S.isUndefined=rv,S.isWeakMap=iv,S.isWeakSet=nv,S.join=a1,S.kebabCase=Wv,S.last=$r,S.lastIndexOf=c1,S.lowerCase=Gv,S.lowerFirst=Yv,S.lt=sv,S.lte=ov,S.max=H_,S.maxBy=K_,S.mean=V_,S.meanBy=k_,S.min=W_,S.minBy=G_,S.stubArray=Mc,S.stubFalse=qc,S.stubObject=R_,S.stubString=U_,S.stubTrue=F_,S.multiply=Y_,S.nth=u1,S.noConflict=I_,S.noop=Lc,S.now=Po,S.pad=Jv,S.padEnd=Qv,S.padStart=Xv,S.parseInt=Zv,S.random=zv,S.reduce=lm,S.reduceRight=dm,S.repeat=e_,S.replace=t_,S.result=Nv,S.round=J_,S.runInContext=M,S.sample=gm,S.size=vm,S.snakeCase=r_,S.some=_m,S.sortedIndex=y1,S.sortedIndexBy=m1,S.sortedIndexOf=v1,S.sortedLastIndex=_1,S.sortedLastIndexBy=b1,S.sortedLastIndexOf=w1,S.startCase=n_,S.startsWith=s_,S.subtract=Q_,S.sum=X_,S.sumBy=Z_,S.template=o_,S.times=$_,S.toFinite=yi,S.toInteger=Le,S.toLength=Yf,S.toLower=a_,S.toNumber=jr,S.toSafeInteger=av,S.toString=rt,S.toUpper=c_,S.trim=u_,S.trimEnd=h_,S.trimStart=f_,S.truncate=l_,S.unescape=d_,S.uniqueId=L_,S.upperCase=p_,S.upperFirst=Uc,S.each=Ff,S.eachRight=$f,S.first=Tf,jc(S,function(){var r={};return Zr(S,function(n,a){it.call(S.prototype,a)||(r[a]=n)}),r}(),{chain:!1}),S.VERSION=s,Tr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){S[r].placeholder=S}),Tr(["drop","take"],function(r,n){Ye.prototype[r]=function(a){a=a===t?1:Ht(Le(a),0);var h=this.__filtered__&&!n?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Xt(a,h.__takeCount__):h.__views__.push({size:Xt(a,ie),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Tr(["filter","map","takeWhile"],function(r,n){var a=n+1,h=a==A||a==ee;Ye.prototype[r]=function(m){var I=this.clone();return I.__iteratees__.push({iteratee:ve(m,3),type:a}),I.__filtered__=I.__filtered__||h,I}}),Tr(["head","last"],function(r,n){var a="take"+(n?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Tr(["initial","tail"],function(r,n){var a="drop"+(n?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(gr)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,n){return typeof r=="function"?new Ye(this):this.map(function(a){return Xn(a,r,n)})}),Ye.prototype.reject=function(r){return this.filter(To(ve(r)))},Ye.prototype.slice=function(r,n){r=Le(r);var a=this;return a.__filtered__&&(r>0||n<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),n!==t&&(n=Le(n),a=n<0?a.dropRight(-n):a.take(n-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(ie)},Zr(Ye.prototype,function(r,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),m=S[h?"take"+(n=="last"?"Right":""):n],I=h||/^find/.test(n);m&&(S.prototype[n]=function(){var N=this.__wrapped__,F=h?[1]:arguments,q=N instanceof Ye,J=F[0],Q=q||Ne(N),re=function(We){var Xe=m.apply(S,Ii([We],F));return h&&ae?Xe[0]:Xe};Q&&a&&typeof J=="function"&&J.length!=1&&(q=Q=!1);var ae=this.__chain__,ge=!!this.__actions__.length,_e=I&&!ae,Be=q&&!ge;if(!I&&Q){N=Be?N:new Ye(this);var be=r.apply(N,F);return be.__actions__.push({func:xo,args:[re],thisArg:t}),new Rr(be,ae)}return _e&&Be?r.apply(this,F):(be=this.thru(re),_e?h?be.value()[0]:be.value():be)})}),Tr(["pop","push","shift","sort","splice","unshift"],function(r){var n=Xs[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);S.prototype[r]=function(){var m=arguments;if(h&&!this.__chain__){var I=this.value();return n.apply(Ne(I)?I:[],m)}return this[a](function(N){return n.apply(Ne(N)?N:[],m)})}}),Zr(Ye.prototype,function(r,n){var a=S[n];if(a){var h=a.name+"";it.call(Dn,h)||(Dn[h]=[]),Dn[h].push({name:n,func:a})}}),Dn[bo(t,Y).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=d0,Ye.prototype.reverse=p0,Ye.prototype.value=g0,S.prototype.at=K1,S.prototype.chain=V1,S.prototype.commit=k1,S.prototype.next=W1,S.prototype.plant=Y1,S.prototype.reverse=J1,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=Q1,S.prototype.first=S.prototype.head,Vn&&(S.prototype[Vn]=G1),S},bn=kg();Ct?((Ct.exports=bn)._=bn,ut._=bn):Qe._=bn}).call(ps)})(xu,xu.exports);var h5=Object.defineProperty,f5=Object.defineProperties,l5=Object.getOwnPropertyDescriptors,Hd=Object.getOwnPropertySymbols,d5=Object.prototype.hasOwnProperty,p5=Object.prototype.propertyIsEnumerable,Kd=(i,e,t)=>e in i?h5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Mo=(i,e)=>{for(var t in e||(e={}))d5.call(e,t)&&Kd(i,t,e[t]);if(Hd)for(var t of Hd(e))p5.call(e,t)&&Kd(i,t,e[t]);return i},g5=(i,e)=>f5(i,l5(e));function qr(i,e,t){let s;const o=Au(i);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${u5}?chainId=eip155:${o}&projectId=${t}`),s}function Au(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function wg(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function y5(i,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function m5(i={},e={}){const t=Vd(i),s=Vd(e);return xu.exports.merge(t,s)}function Vd(i){var e,t,s,o;const c={};if(!QI(i))return c;for(const[l,d]of Object.entries(i)){const y=sh(l)?[l]:d.chains,g=d.methods||[],_=d.events||[],O=d.rpcMap||{},T=ko(l);c[T]=g5(Mo(Mo({},c[T]),d),{chains:iu(y,(e=c[T])==null?void 0:e.chains),methods:iu(g,(t=c[T])==null?void 0:t.methods),events:iu(_,(s=c[T])==null?void 0:s.events),rpcMap:Mo(Mo({},O),(o=c[T])==null?void 0:o.rpcMap)})}return c}function v5(i){return i.includes(":")?i.split(":")[2]:i}function _5(i){const e={};for(const[t,s]of Object.entries(i)){const o=s.methods||[],c=s.events||[],l=s.accounts||[],d=sh(t)?[t]:s.chains?s.chains:wg(s.accounts);e[t]={chains:d,methods:o,events:c,accounts:l}}return e}const Eg={},Rt=i=>Eg[i],nu=(i,e)=>{Eg[i]=e};class b5{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||qr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qr(e,this.namespace);return typeof s>"u"?void 0:new ji(new un(s,Rt("disableProviderPing")))}}class w5{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=Au(e);if(!this.httpProviders[s]){const o=t||qr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||qr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new ji(new un(s,Rt("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=Au(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class E5{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||qr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new ji(new un(s,Rt("disableProviderPing")))}}class D5{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||qr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new ji(new un(s,Rt("disableProviderPing")))}}class S5{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new ji(new un(s,Rt("disableProviderPing")))}}class I5{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||qr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new ji(new un(s,Rt("disableProviderPing")))}}class O5{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||qr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new ji(new un(s,Rt("disableProviderPing")))}}var x5=Object.defineProperty,A5=Object.defineProperties,P5=Object.getOwnPropertyDescriptors,kd=Object.getOwnPropertySymbols,C5=Object.prototype.hasOwnProperty,T5=Object.prototype.propertyIsEnumerable,Wd=(i,e,t)=>e in i?x5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,qo=(i,e)=>{for(var t in e||(e={}))C5.call(e,t)&&Wd(i,t,e[t]);if(kd)for(var t of kd(e))T5.call(e,t)&&Wd(i,t,e[t]);return i},su=(i,e)=>A5(i,P5(e));class oh{constructor(e){this.events=new Nu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ha(fa({level:(e==null?void 0:e.logger)||Bd})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new oh(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:qo({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Nd("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=_5(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==_g)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Rd(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await WI.init({logger:this.providerOpts.logger||Bd,relayUrl:this.providerOpts.relayUrl||o5,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>ko(t)))];nu("client",this.client),nu("events",this.events),nu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=y5(t,this.session),o=wg(s),c=m5(this.namespaces,this.optionalNamespaces),l=su(qo({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new w5({namespace:l});break;case"solana":this.rpcProviders[t]=new E5({namespace:l});break;case"cosmos":this.rpcProviders[t]=new D5({namespace:l});break;case"polkadot":this.rpcProviders[t]=new b5({namespace:l});break;case"cip34":this.rpcProviders[t]=new S5({namespace:l});break;case"elrond":this.rpcProviders[t]=new I5({namespace:l});break;case"multiversx":this.rpcProviders[t]=new O5({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&Rd(o)&&this.events.emit("accountsChanged",o.map(v5))}else s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=su(qo({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",su(qo({},Nd("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Li.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(l=>ko(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=ko(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${zd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${zd}/${e}`)}}const N5=oh,R5="wc",U5="ethereum_provider",F5=`${R5}@2:${U5}:`,$5="https://rpc.walletconnect.com/v1/",Pu=["eth_sendTransaction","personal_sign"],j5=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Cu=["chainChanged","accountsChanged"],L5=["message","disconnect","connect"];var M5=Object.defineProperty,q5=Object.defineProperties,B5=Object.getOwnPropertyDescriptors,Gd=Object.getOwnPropertySymbols,z5=Object.prototype.hasOwnProperty,H5=Object.prototype.propertyIsEnumerable,Yd=(i,e,t)=>e in i?M5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,gs=(i,e)=>{for(var t in e||(e={}))z5.call(e,t)&&Yd(i,t,e[t]);if(Gd)for(var t of Gd(e))H5.call(e,t)&&Yd(i,t,e[t]);return i},Jd=(i,e)=>q5(i,B5(e));function ea(i){return Number(i[0].split(":")[1])}function ou(i){return`0x${i.toString(16)}`}function K5(i){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:l,rpcMap:d}=i;if(!mu(e))throw new Error("Invalid chains");const y={chains:e,methods:s||Pu,events:c||Cu,rpcMap:gs({},e.length?{[ea(e)]:d[ea(e)]}:{})},g=c==null?void 0:c.filter(C=>!Cu.includes(C)),_=s==null?void 0:s.filter(C=>!Pu.includes(C));if(!t&&!l&&!o&&!(g!=null&&g.length)&&!(_!=null&&_.length))return{required:e.length?y:void 0};const O=(g==null?void 0:g.length)&&(_==null?void 0:_.length)||!t,T={chains:[...new Set(O?y.chains.concat(t||[]):t)],methods:[...new Set(y.methods.concat(o!=null&&o.length?o:j5))],events:[...new Set(y.events.concat(l||L5))],rpcMap:d};return{required:e.length?y:void 0,optional:t.length?T:void 0}}class ah{constructor(){this.events=new Or.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=F5,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new ah;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=K5(this.rpc);try{const o=await new Promise(async(l,d)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),d(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Jd(gs({namespaces:gs({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(g=>{l(g)}).catch(g=>{d(new Error(g.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const c=UE(o.namespaces,[this.namespace]);this.setAccounts(c),this.events.emit("connect",{chainId:ou(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",ou(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Jd(gs({},$E("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",ou(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],l=o.concat(c);if(!l.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const d=o.length?(e==null?void 0:e.methods)||Pu:[],y=o.length?(e==null?void 0:e.events)||Cu:[],g=(e==null?void 0:e.optionalMethods)||[],_=(e==null?void 0:e.optionalEvents)||[],O=(e==null?void 0:e.rpcMap)||this.buildRpcMap(l,e.projectId),T=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(C=>this.formatChainId(C)),optionalChains:c.map(C=>this.formatChainId(C)),methods:d,events:y,optionalMethods:g,optionalEvents:_,rpcMap:O,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:T,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?ea(this.rpc.chains):ea(this.rpc.optionalChains),this.signer=await N5.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await tb(()=>import("./index-7fde6aef.js").then(o=>o.i),["assets/index-7fde6aef.js","assets/index-06a81a86.js","assets/index-f645abdd.css"]);t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(gs({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&mu(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),s&&mu(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${$5}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const oO=ah;export{oO as EthereumProvider,L5 as OPTIONAL_EVENTS,j5 as OPTIONAL_METHODS,Cu as REQUIRED_EVENTS,Pu as REQUIRED_METHODS,ah as default};
